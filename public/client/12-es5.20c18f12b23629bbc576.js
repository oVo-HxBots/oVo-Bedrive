!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n,i){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,n,i||e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkbedrive2=self.webpackChunkbedrive2||[]).push([[12],{21554:function(e,t,n){"use strict";n.d(t,{XC:function(){return B},Bb:function(){return V},ZL:function(){return J}});var r=n(19238),o=n(39490),a=n(80521),l=n(37716),d=n(72458),p=n(75319),h=n(79765),v=n(41439),g=n(66682),m=n(25917),y=n(22759),b=n(38583),k=n(90625),w=n(71386),x=n(36461),_=n(87636),C=n(3679),A=n(98295),Z=n(15257),O=n(43190),S=n(45435),I=n(88002),T=n(93342),E=n(71289),P=n(70946),F=["panel"];function M(e,t){if(1&e&&(l.TgZ(0,"div",0,1),l.Hsn(2),l.qZA()),2&e){var n=t.id,i=l.oxw();l.Q6J("id",i.id)("ngClass",i._classList),l.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(n))}}var U=["*"],D=0,L=function e(t,n){f(this,e),this.source=t,this.option=n},q=(0,d.Kr)(function e(){f(this,e)}),N=new l.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function(){return{autoActiveFirstOption:!1}}}),$=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,o){var a;return f(this,n),(a=t.call(this))._changeDetectorRef=e,a._elementRef=i,a._activeOptionChanges=p.w.EMPTY,a.showPanel=!1,a._isOpen=!1,a.displayWith=null,a.optionSelected=new l.vpe,a.opened=new l.vpe,a.closed=new l.vpe,a.optionActivated=new l.vpe,a._classList={},a.id="mat-autocomplete-"+D++,a.inertGroups=(null==o?void 0:o.SAFARI)||!1,a._autoActiveFirstOption=!!r.autoActiveFirstOption,a}return s(n,[{key:"isOpen",get:function(){return this._isOpen&&this.showPanel}},{key:"autoActiveFirstOption",get:function(){return this._autoActiveFirstOption},set:function(e){this._autoActiveFirstOption=(0,o.Ig)(e)}},{key:"classList",set:function(e){this._classList=e&&e.length?(0,o.du)(e).reduce(function(e,t){return e[t]=!0,e},{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}},{key:"ngAfterContentInit",value:function(){var e=this;this._keyManager=new r.s1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(function(t){e.optionActivated.emit({source:e,option:e.options.toArray()[t]||null})}),this._setVisibility()}},{key:"ngOnDestroy",value:function(){this._activeOptionChanges.unsubscribe()}},{key:"_setScrollTop",value:function(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}},{key:"_getScrollTop",value:function(){return this.panel?this.panel.nativeElement.scrollTop:0}},{key:"_setVisibility",value:function(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}},{key:"_emitSelectEvent",value:function(e){var t=new L(this,e);this.optionSelected.emit(t)}},{key:"_getPanelAriaLabelledby",value:function(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}},{key:"_setVisibilityClasses",value:function(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}]),n}(q);return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(N),l.Y36(a.t4))},e.\u0275dir=l.lG2({type:e,viewQuery:function(e,t){var n;(1&e&&(l.Gf(l.Rgc,7),l.Gf(F,5)),2&e)&&(l.iGM(n=l.CRH())&&(t.template=n.first),l.iGM(n=l.CRH())&&(t.panel=n.first))},inputs:{displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",classList:["class","classList"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],panelWidth:"panelWidth"},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[l.qOj]}),e}(),B=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._visibleClass="mat-autocomplete-visible",e._hiddenClass="mat-autocomplete-hidden",e}return n}($);return t.\u0275fac=function(n){return(e||(e=l.n5z(t)))(n||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(e,t,n){var i;(1&e&&(l.Suo(n,d.K7,5),l.Suo(n,d.ey,5)),2&e)&&(l.iGM(i=l.CRH())&&(t.optionGroups=i),l.iGM(i=l.CRH())&&(t.options=i))},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[l._Bn([{provide:d.HF,useExisting:t}]),l.qOj],ngContentSelectors:U,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,t){1&e&&(l.F$t(),l.YNc(0,M,3,4,"ng-template"))},directives:[b.mk],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),t}(),R=new l.OlP("mat-autocomplete-scroll-strategy"),Y={provide:R,deps:[k.aV],useFactory:function(e){return function(){return e.scrollStrategies.reposition()}}},j={provide:C.JU,useExisting:(0,l.Gpc)(function(){return J}),multi:!0},Q=function(){var e=function(){function e(t,n,r,o,a,s,c,l,u,d,m){var y=this;f(this,e),this._element=t,this._overlay=n,this._viewContainerRef=r,this._zone=o,this._changeDetectorRef=a,this._dir=c,this._formField=l,this._document=u,this._viewportRuler=d,this._defaults=m,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=p.w.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new h.xQ,this._windowBlurHandler=function(){y._canOpenOnNextFocus=y._document.activeElement!==y._element.nativeElement||y.panelOpen},this._onChange=function(){},this._onTouched=function(){},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=(0,v.P)(function(){return y.autocomplete&&y.autocomplete.options?g.T.apply(void 0,i(y.autocomplete.options.map(function(e){return e.onSelectionChange}))):y._zone.onStable.pipe((0,Z.q)(1),(0,O.w)(function(){return y.optionSelections}))}),this._scrollStrategy=s}return s(e,[{key:"autocompleteDisabled",get:function(){return this._autocompleteDisabled},set:function(e){this._autocompleteDisabled=(0,o.Ig)(e)}},{key:"ngAfterViewInit",value:function(){var e=this,t=this._getWindow();void 0!==t&&this._zone.runOutsideAngular(function(){return t.addEventListener("blur",e._windowBlurHandler)})}},{key:"ngOnChanges",value:function(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}},{key:"ngOnDestroy",value:function(){var e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}},{key:"panelOpen",get:function(){return this._overlayAttached&&this.autocomplete.showPanel}},{key:"openPanel",value:function(){this._attachOverlay(),this._floatLabel()}},{key:"closePanel",value:function(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this.autocomplete.closed.emit(),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}},{key:"updatePosition",value:function(){this._overlayAttached&&this._overlayRef.updatePosition()}},{key:"panelClosingActions",get:function(){var e=this;return(0,g.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe((0,S.h)(function(){return e._overlayAttached})),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe((0,S.h)(function(){return e._overlayAttached})):(0,m.of)()).pipe((0,I.U)(function(e){return e instanceof d.rN?e:null}))}},{key:"activeOption",get:function(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}},{key:"_getOutsideClickStream",value:function(){var e=this;return(0,g.T)((0,y.R)(this._document,"click"),(0,y.R)(this._document,"auxclick"),(0,y.R)(this._document,"touchend")).pipe((0,S.h)(function(t){var n=e._isInsideShadowRoot&&t.composedPath?t.composedPath()[0]:t.target,i=e._formField?e._formField._elementRef.nativeElement:null,r=e.connectedTo?e.connectedTo.elementRef.nativeElement:null;return e._overlayAttached&&n!==e._element.nativeElement&&(!i||!i.contains(n))&&(!r||!r.contains(n))&&!!e._overlayRef&&!e._overlayRef.overlayElement.contains(n)}))}},{key:"writeValue",value:function(e){var t=this;Promise.resolve(null).then(function(){return t._setTriggerValue(e)})}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this._element.nativeElement.disabled=e}},{key:"_handleKeydown",value:function(e){var t=e.keyCode;if(t!==x.hY||(0,x.Vb)(e)||e.preventDefault(),this.activeOption&&t===x.K5&&this.panelOpen)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){var n=this.autocomplete._keyManager.activeItem,i=t===x.LH||t===x.JH;this.panelOpen||t===x.Mf?this.autocomplete._keyManager.onKeydown(e):i&&this._canOpen()&&this.openPanel(),(i||this.autocomplete._keyManager.activeItem!==n)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}},{key:"_handleInput",value:function(e){var t=e.target,n=t.value;"number"===t.type&&(n=""==n?null:parseFloat(n)),this._previousValue!==n&&(this._previousValue=n,this._onChange(n),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}},{key:"_handleFocus",value:function(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}},{key:"_floatLabel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}},{key:"_resetLabel",value:function(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}},{key:"_subscribeToClosingActions",value:function(){var e=this,t=this._zone.onStable.pipe((0,Z.q)(1)),n=this.autocomplete.options.changes.pipe((0,T.b)(function(){return e._positionStrategy.reapplyLastPosition()}),(0,E.g)(0));return(0,g.T)(t,n).pipe((0,O.w)(function(){var t=e.panelOpen;return e._resetActiveItem(),e.autocomplete._setVisibility(),e.panelOpen&&(e._overlayRef.updatePosition(),t!==e.panelOpen&&e.autocomplete.opened.emit()),e.panelClosingActions}),(0,Z.q)(1)).subscribe(function(t){return e._setValueAndClose(t)})}},{key:"_destroyPanel",value:function(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}},{key:"_setTriggerValue",value:function(e){var t=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,n=null!=t?t:"";this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}},{key:"_setValueAndClose",value:function(e){e&&e.source&&(this._clearPreviousSelectedOption(e.source),this._setTriggerValue(e.source.value),this._onChange(e.source.value),this._element.nativeElement.focus(),this.autocomplete._emitSelectEvent(e.source)),this.closePanel()}},{key:"_clearPreviousSelectedOption",value:function(e){this.autocomplete.options.forEach(function(t){t!==e&&t.selected&&t.deselect()})}},{key:"_attachOverlay",value:function(){var e,t=this;null==this._isInsideShadowRoot&&(this._isInsideShadowRoot=!!(0,a.kV)(this._element.nativeElement));var n=this._overlayRef;n?(this._positionStrategy.setOrigin(this._getConnectedElement()),n.updateSize({width:this._getPanelWidth()})):(this._portal=new _.UE(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),n=this._overlay.create(this._getOverlayConfig()),this._overlayRef=n,n.keydownEvents().subscribe(function(e){(e.keyCode===x.hY&&!(0,x.Vb)(e)||e.keyCode===x.LH&&(0,x.Vb)(e,"altKey"))&&(t._resetActiveItem(),t._closeKeyEventStream.next(),e.stopPropagation(),e.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(function(){t.panelOpen&&n&&n.updateSize({width:t._getPanelWidth()})})),n&&!n.hasAttached()&&(n.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());var i=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&i!==this.panelOpen&&this.autocomplete.opened.emit()}},{key:"_getOverlayConfig",value:function(){var e;return new k.X_({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}},{key:"_getOverlayPosition",value:function(){var e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}},{key:"_setStrategyPositions",value:function(e){var t,n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,r=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}];t="above"===this.position?r:"below"===this.position?n:[].concat(n,r),e.withPositions(t)}},{key:"_getConnectedElement",value:function(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}},{key:"_getPanelWidth",value:function(){return this.autocomplete.panelWidth||this._getHostWidth()}},{key:"_getHostWidth",value:function(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}},{key:"_resetActiveItem",value:function(){var e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}},{key:"_canOpen",value:function(){var e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}},{key:"_getWindow",value:function(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}},{key:"_scrollToOption",value:function(e){var t=this.autocomplete,n=(0,d.CB)(e,t.options,t.optionGroups);if(0===e&&1===n)t._setScrollTop(0);else if(t.panel){var i=t.options.toArray()[e];if(i){var r=i._getHostElement(),o=(0,d.jH)(r.offsetTop,r.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(o)}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.SBq),l.Y36(k.aV),l.Y36(l.s_b),l.Y36(l.R0b),l.Y36(l.sBO),l.Y36(R),l.Y36(P.Is,8),l.Y36(A.G_,9),l.Y36(b.K0,8),l.Y36(w.rL),l.Y36(N,8))},e.\u0275dir=l.lG2({type:e,inputs:{position:["matAutocompletePosition","position"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"],autocomplete:["matAutocomplete","autocomplete"],connectedTo:["matAutocompleteConnectedTo","connectedTo"]},features:[l.TTD]}),e}(),J=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._aboveClass="mat-autocomplete-panel-above",e}return n}(Q);return t.\u0275fac=function(n){return(e||(e=l.n5z(t)))(n||t)},t.\u0275dir=l.lG2({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,t){1&e&&l.NdJ("focusin",function(){return t._handleFocus()})("blur",function(){return t._onTouched()})("input",function(e){return t._handleInput(e)})("keydown",function(e){return t._handleKeydown(e)}),2&e&&l.uIk("autocomplete",t.autocompleteAttribute)("role",t.autocompleteDisabled?null:"combobox")("aria-autocomplete",t.autocompleteDisabled?null:"list")("aria-activedescendant",t.panelOpen&&t.activeOption?t.activeOption.id:null)("aria-expanded",t.autocompleteDisabled?null:t.panelOpen.toString())("aria-owns",t.autocompleteDisabled||!t.panelOpen||null==t.autocomplete?null:t.autocomplete.id)("aria-haspopup",!t.autocompleteDisabled)},exportAs:["matAutocompleteTrigger"],features:[l._Bn([j]),l.qOj]}),t}(),V=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({providers:[Y],imports:[[k.U8,d.Ng,d.BQ,b.ez],w.ZD,d.Ng,d.BQ]}),e}()},58341:function(e,t,n){"use strict";n.d(t,{HS:function(){return E},oH:function(){return N},qn:function(){return L},qH:function(){return P},Hi:function(){return B}});var r=n(36461),o=n(37716),a=n(72458),l=n(39490),d=n(38583),h=n(46237),v=n(79765),g=n(66682),m=n(15257),y=n(46782),b=n(39761),k=n(19238),w=n(38345),x=n(98295),_=n(80521),C=n(70946),A=n(3679),Z=["*"],O=new o.OlP("MatChipRemove"),S=new o.OlP("MatChipAvatar"),I=new o.OlP("MatChipTrailingIcon"),T=(0,a.sb)((0,a.pj)((0,a.Kr)(function e(t){f(this,e),this._elementRef=t}),"primary"),-1),E=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,s,c,l,u,d){var h;return f(this,n),(h=t.call(this,e))._elementRef=e,h._ngZone=i,h._changeDetectorRef=c,h._hasFocus=!1,h.chipListSelectable=!0,h._chipListMultiple=!1,h._chipListDisabled=!1,h._selected=!1,h._selectable=!0,h._disabled=!1,h._removable=!0,h._onFocus=new v.xQ,h._onBlur=new v.xQ,h.selectionChange=new o.vpe,h.destroyed=new o.vpe,h.removed=new o.vpe,h._addHostClassName(),h._chipRippleTarget=l.createElement("div"),h._chipRippleTarget.classList.add("mat-chip-ripple"),h._elementRef.nativeElement.appendChild(h._chipRippleTarget),h._chipRipple=new a.IR(p(h),i,h._chipRippleTarget,r),h._chipRipple.setupTriggerEvents(e),h.rippleConfig=s||{},h._animationsDisabled="NoopAnimations"===u,h.tabIndex=null!=d&&parseInt(d)||-1,h}return s(n,[{key:"rippleDisabled",get:function(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}},{key:"selected",get:function(){return this._selected},set:function(e){var t=(0,l.Ig)(e);t!==this._selected&&(this._selected=t,this._dispatchSelectionChange())}},{key:"value",get:function(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent},set:function(e){this._value=e}},{key:"selectable",get:function(){return this._selectable&&this.chipListSelectable},set:function(e){this._selectable=(0,l.Ig)(e)}},{key:"disabled",get:function(){return this._chipListDisabled||this._disabled},set:function(e){this._disabled=(0,l.Ig)(e)}},{key:"removable",get:function(){return this._removable},set:function(e){this._removable=(0,l.Ig)(e)}},{key:"ariaSelected",get:function(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}},{key:"_addHostClassName",value:function(){var e=this._elementRef.nativeElement;e.hasAttribute("mat-basic-chip")||"mat-basic-chip"===e.tagName.toLowerCase()?e.classList.add("mat-basic-chip"):e.classList.add("mat-standard-chip")}},{key:"ngOnDestroy",value:function(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}},{key:"select",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"deselect",value:function(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}},{key:"selectViaInteraction",value:function(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}},{key:"toggleSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}},{key:"focus",value:function(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}},{key:"remove",value:function(){this.removable&&this.removed.emit({chip:this})}},{key:"_handleClick",value:function(e){this.disabled?e.preventDefault():e.stopPropagation()}},{key:"_handleKeydown",value:function(e){if(!this.disabled)switch(e.keyCode){case r.yY:case r.ZH:this.remove(),e.preventDefault();break;case r.L_:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}},{key:"_blur",value:function(){var e=this;this._ngZone.onStable.pipe((0,m.q)(1)).subscribe(function(){e._ngZone.run(function(){e._hasFocus=!1,e._onBlur.next({chip:e})})})}},{key:"_dispatchSelectionChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}]),n}(T);return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(_.t4),o.Y36(a.Y2,8),o.Y36(o.sBO),o.Y36(d.K0),o.Y36(h.Qb,8),o.$8M("tabindex"))},e.\u0275dir=o.lG2({type:e,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,t,n){var i;(1&e&&(o.Suo(n,S,5),o.Suo(n,I,5),o.Suo(n,O,5)),2&e)&&(o.iGM(i=o.CRH())&&(t.avatar=i.first),o.iGM(i=o.CRH())&&(t.trailingIcon=i.first),o.iGM(i=o.CRH())&&(t.removeIcon=i.first))},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,t){1&e&&o.NdJ("click",function(e){return t._handleClick(e)})("keydown",function(e){return t._handleKeydown(e)})("focus",function(){return t.focus()})("blur",function(){return t._blur()}),2&e&&(o.uIk("tabindex",t.disabled?null:t.tabIndex)("disabled",t.disabled||null)("aria-disabled",t.disabled.toString())("aria-selected",t.ariaSelected),o.ekj("mat-chip-selected",t.selected)("mat-chip-with-avatar",t.avatar)("mat-chip-with-trailing-icon",t.trailingIcon||t.removeIcon)("mat-chip-disabled",t.disabled)("_mat-animation-noopable",t._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[o.qOj]}),e}(),P=function(){var e=function(){function e(t,n){f(this,e),this._parentChip=t,"BUTTON"===n.nativeElement.nodeName&&n.nativeElement.setAttribute("type","button")}return s(e,[{key:"_handleClick",value:function(e){var t=this._parentChip;t.removable&&!t.disabled&&t.remove(),e.stopPropagation()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(E),o.Y36(o.SBq))},e.\u0275dir=o.lG2({type:e,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,t){1&e&&o.NdJ("click",function(e){return t._handleClick(e)})},features:[o._Bn([{provide:O,useExisting:e}])]}),e}(),F=new o.OlP("mat-chips-default-options"),M=(0,a.FD)(function e(t,n,i,r){f(this,e),this._defaultErrorStateMatcher=t,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}),U=0,D=function e(t,n){f(this,e),this.source=t,this.value=n},L=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,a,s,c,l){var u;return f(this,n),(u=t.call(this,c,a,s,l))._elementRef=e,u._changeDetectorRef=i,u._dir=r,u.ngControl=l,u.controlType="mat-chip-list",u._lastDestroyedChipIndex=null,u._destroyed=new v.xQ,u._uid="mat-chip-list-"+U++,u._tabIndex=0,u._userTabIndex=null,u._onTouched=function(){},u._onChange=function(){},u._multiple=!1,u._compareWith=function(e,t){return e===t},u._required=!1,u._disabled=!1,u.ariaOrientation="horizontal",u._selectable=!0,u.change=new o.vpe,u.valueChange=new o.vpe,u.ngControl&&(u.ngControl.valueAccessor=p(u)),u}return s(n,[{key:"selected",get:function(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}},{key:"role",get:function(){return this.empty?null:"listbox"}},{key:"multiple",get:function(){return this._multiple},set:function(e){this._multiple=(0,l.Ig)(e),this._syncChipsState()}},{key:"compareWith",get:function(){return this._compareWith},set:function(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}},{key:"value",get:function(){return this._value},set:function(e){this.writeValue(e),this._value=e}},{key:"id",get:function(){return this._chipInput?this._chipInput.id:this._uid}},{key:"required",get:function(){return this._required},set:function(e){this._required=(0,l.Ig)(e),this.stateChanges.next()}},{key:"placeholder",get:function(){return this._chipInput?this._chipInput.placeholder:this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()}},{key:"focused",get:function(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}},{key:"empty",get:function(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}},{key:"shouldLabelFloat",get:function(){return!this.empty||this.focused}},{key:"disabled",get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(e){this._disabled=(0,l.Ig)(e),this._syncChipsState()}},{key:"selectable",get:function(){return this._selectable},set:function(e){var t=this;this._selectable=(0,l.Ig)(e),this.chips&&this.chips.forEach(function(e){return e.chipListSelectable=t._selectable})}},{key:"tabIndex",set:function(e){this._userTabIndex=e,this._tabIndex=e}},{key:"chipSelectionChanges",get:function(){return g.T.apply(void 0,i(this.chips.map(function(e){return e.selectionChange})))}},{key:"chipFocusChanges",get:function(){return g.T.apply(void 0,i(this.chips.map(function(e){return e._onFocus})))}},{key:"chipBlurChanges",get:function(){return g.T.apply(void 0,i(this.chips.map(function(e){return e._onBlur})))}},{key:"chipRemoveChanges",get:function(){return g.T.apply(void 0,i(this.chips.map(function(e){return e.destroyed})))}},{key:"ngAfterContentInit",value:function(){var e=this;this._keyManager=new k.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,y.R)(this._destroyed)).subscribe(function(t){return e._keyManager.withHorizontalOrientation(t)}),this._keyManager.tabOut.pipe((0,y.R)(this._destroyed)).subscribe(function(){e._allowFocusEscape()}),this.chips.changes.pipe((0,b.O)(null),(0,y.R)(this._destroyed)).subscribe(function(){e.disabled&&Promise.resolve().then(function(){e._syncChipsState()}),e._resetChips(),e._initializeSelection(),e._updateTabIndex(),e._updateFocusForDestroyedChips(),e.stateChanges.next()})}},{key:"ngOnInit",value:function(){this._selectionModel=new w.Ov(this.multiple,void 0,!1),this.stateChanges.next()}},{key:"ngDoCheck",value:function(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}},{key:"registerInput",value:function(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}},{key:"setDescribedByIds",value:function(e){this._ariaDescribedby=e.join(" ")}},{key:"writeValue",value:function(e){this.chips&&this._setSelectionByValue(e,!1)}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this.stateChanges.next()}},{key:"onContainerClick",value:function(e){this._originatesFromChip(e)||this.focus()}},{key:"focus",value:function(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}},{key:"_focusInput",value:function(e){this._chipInput&&this._chipInput.focus(e)}},{key:"_keydown",value:function(e){var t=e.target;e.keyCode===r.ZH&&this._isInputEmpty(t)?(this._keyManager.setLastItemActive(),e.preventDefault()):t&&t.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}},{key:"_updateTabIndex",value:function(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}},{key:"_updateFocusForDestroyedChips",value:function(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){var e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}},{key:"_isValidIndex",value:function(e){return e>=0&&e<this.chips.length}},{key:"_isInputEmpty",value:function(e){return!(!e||"input"!==e.nodeName.toLowerCase()||e.value)}},{key:"_setSelectionByValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._clearSelection(),this.chips.forEach(function(e){return e.deselect()}),Array.isArray(e))e.forEach(function(e){return t._selectValue(e,n)}),this._sortValues();else{var i=this._selectValue(e,n);i&&n&&this._keyManager.setActiveItem(i)}}},{key:"_selectValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.chips.find(function(n){return null!=n.value&&t._compareWith(n.value,e)});return i&&(n?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}},{key:"_initializeSelection",value:function(){var e=this;Promise.resolve().then(function(){(e.ngControl||e._value)&&(e._setSelectionByValue(e.ngControl?e.ngControl.value:e._value,!1),e.stateChanges.next())})}},{key:"_clearSelection",value:function(e){this._selectionModel.clear(),this.chips.forEach(function(t){t!==e&&t.deselect()}),this.stateChanges.next()}},{key:"_sortValues",value:function(){var e=this;this._multiple&&(this._selectionModel.clear(),this.chips.forEach(function(t){t.selected&&e._selectionModel.select(t)}),this.stateChanges.next())}},{key:"_propagateChanges",value:function(e){var t;t=Array.isArray(this.selected)?this.selected.map(function(e){return e.value}):this.selected?this.selected.value:e,this._value=t,this.change.emit(new D(this,t)),this.valueChange.emit(t),this._onChange(t),this._changeDetectorRef.markForCheck()}},{key:"_blur",value:function(){var e=this;this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(function(){e.focused||e._markAsTouched()}):this._markAsTouched())}},{key:"_markAsTouched",value:function(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}},{key:"_allowFocusEscape",value:function(){var e=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(function(){e._tabIndex=e._userTabIndex||0,e._changeDetectorRef.markForCheck()}))}},{key:"_resetChips",value:function(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}},{key:"_dropSubscriptions",value:function(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}},{key:"_listenToChipsSelection",value:function(){var e=this;this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(function(t){t.source.selected?e._selectionModel.select(t.source):e._selectionModel.deselect(t.source),e.multiple||e.chips.forEach(function(t){!e._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&e._propagateChanges()})}},{key:"_listenToChipsFocus",value:function(){var e=this;this._chipFocusSubscription=this.chipFocusChanges.subscribe(function(t){var n=e.chips.toArray().indexOf(t.chip);e._isValidIndex(n)&&e._keyManager.updateActiveItem(n),e.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(function(){e._blur(),e.stateChanges.next()})}},{key:"_listenToChipsRemoved",value:function(){var e=this;this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(function(t){var n=t.chip,i=e.chips.toArray().indexOf(t.chip);e._isValidIndex(i)&&n._hasFocus&&(e._lastDestroyedChipIndex=i)})}},{key:"_originatesFromChip",value:function(e){for(var t=e.target;t&&t!==this._elementRef.nativeElement;){if(t.classList.contains("mat-chip"))return!0;t=t.parentElement}return!1}},{key:"_hasFocusedChip",value:function(){return this.chips&&this.chips.some(function(e){return e._hasFocus})}},{key:"_syncChipsState",value:function(){var e=this;this.chips&&this.chips.forEach(function(t){t._chipListDisabled=e._disabled,t._chipListMultiple=e.multiple})}}]),n}(M);return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(C.Is,8),o.Y36(A.F,8),o.Y36(A.sg,8),o.Y36(a.rD),o.Y36(A.a5,10))},e.\u0275cmp=o.Xpm({type:e,selectors:[["mat-chip-list"]],contentQueries:function(e,t,n){var i;(1&e&&o.Suo(n,E,5),2&e)&&(o.iGM(i=o.CRH())&&(t.chips=i))},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,t){1&e&&o.NdJ("focus",function(){return t.focus()})("blur",function(){return t._blur()})("keydown",function(e){return t._keydown(e)}),2&e&&(o.Ikx("id",t._uid),o.uIk("tabindex",t.disabled?null:t._tabIndex)("aria-describedby",t._ariaDescribedby||null)("aria-required",t.role?t.required:null)("aria-disabled",t.disabled.toString())("aria-invalid",t.errorState)("aria-multiselectable",t.multiple)("role",t.role)("aria-orientation",t.ariaOrientation),o.ekj("mat-chip-list-disabled",t.disabled)("mat-chip-list-invalid",t.errorState)("mat-chip-list-required",t.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[o._Bn([{provide:x.Eo,useExisting:e}]),o.qOj],ngContentSelectors:Z,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,t){1&e&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),e}(),q=0,N=function(){var e=function(){function e(t,n){f(this,e),this._elementRef=t,this._defaultOptions=n,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new o.vpe,this.placeholder="",this.id="mat-chip-list-input-"+q++,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}return s(e,[{key:"chipList",set:function(e){e&&(this._chipList=e,this._chipList.registerInput(this))}},{key:"addOnBlur",get:function(){return this._addOnBlur},set:function(e){this._addOnBlur=(0,l.Ig)(e)}},{key:"disabled",get:function(){return this._disabled||this._chipList&&this._chipList.disabled},set:function(e){this._disabled=(0,l.Ig)(e)}},{key:"empty",get:function(){return!this._inputElement.value}},{key:"ngOnChanges",value:function(){this._chipList.stateChanges.next()}},{key:"_keydown",value:function(e){e&&e.keyCode===r.Mf&&!(0,r.Vb)(e,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(e)}},{key:"_blur",value:function(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}},{key:"_focus",value:function(){this.focused=!0,this._chipList.stateChanges.next()}},{key:"_emitChipEnd",value:function(e){!this._inputElement.value&&e&&this._chipList._keydown(e),e&&!this._isSeparatorKey(e)||(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),e&&e.preventDefault())}},{key:"_onInput",value:function(){this._chipList.stateChanges.next()}},{key:"focus",value:function(e){this._inputElement.focus(e)}},{key:"_isSeparatorKey",value:function(e){return!(0,r.Vb)(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(F))},e.\u0275dir=o.lG2({type:e,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(e,t){1&e&&o.NdJ("keydown",function(e){return t._keydown(e)})("blur",function(){return t._blur()})("focus",function(){return t._focus()})("input",function(){return t._onInput()}),2&e&&(o.Ikx("id",t.id),o.uIk("disabled",t.disabled||null)("placeholder",t.placeholder||null)("aria-invalid",t._chipList&&t._chipList.ngControl?t._chipList.ngControl.invalid:null)("aria-required",t._chipList&&t._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[o.TTD]}),e}(),$={separatorKeyCodes:[r.K5]},B=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[a.rD,{provide:F,useValue:$}],imports:[[a.BQ]]}),e}()},98295:function(e,t,n){"use strict";n.d(t,{G_:function(){return c},Eo:function(){return s},lN:function(){return l}});var i=n(18553),r=n(38583),o=n(37716),a=n(72458);n(39490),n(79765),n(66682),n(22759),n(39761),n(46782),n(15257),n(17238),n(46237),n(70946),n(80521);var s=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.lG2({type:e}),e}(),c=new o.OlP("MatFormField"),l=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.ez,a.BQ,i.Q8],a.BQ]}),e}()},45396:function(e,t,n){"use strict";n.d(t,{Rr:function(){return C},rP:function(){return Z}});var i=n(18553),r=n(37716),o=n(72458),a=n(39490),l=n(3679),d=n(46237),p=n(19238),h=["thumbContainer"],v=["toggleBar"],g=["input"],m=function(){return{enterDuration:150}},y=["*"],b=new r.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:function(){return{disableToggleValue:!1}}}),k=0,w={provide:l.JU,useExisting:(0,r.Gpc)(function(){return C}),multi:!0},x=function e(t,n){f(this,e),this.source=t,this.checked=n},_=(0,o.sb)((0,o.pj)((0,o.Kr)((0,o.Id)(function e(t){f(this,e),this._elementRef=t})),"accent")),C=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,o,a,s,c){var l;return f(this,n),(l=t.call(this,e))._focusMonitor=i,l._changeDetectorRef=o,l.defaults=s,l._animationMode=c,l._onChange=function(e){},l._onTouched=function(){},l._uniqueId="mat-slide-toggle-"+ ++k,l._required=!1,l._checked=!1,l.name=null,l.id=l._uniqueId,l.labelPosition="after",l.ariaLabel=null,l.ariaLabelledby=null,l.change=new r.vpe,l.toggleChange=new r.vpe,l.tabIndex=parseInt(a)||0,l}return s(n,[{key:"required",get:function(){return this._required},set:function(e){this._required=(0,a.Ig)(e)}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=(0,a.Ig)(e),this._changeDetectorRef.markForCheck()}},{key:"inputId",get:function(){return"".concat(this.id||this._uniqueId,"-input")}},{key:"ngAfterContentInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(t){"keyboard"===t||"program"===t?e._inputElement.nativeElement.focus():t||Promise.resolve().then(function(){return e._onTouched()})})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef)}},{key:"_onChangeEvent",value:function(e){e.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}},{key:"_onInputClick",value:function(e){e.stopPropagation()}},{key:"writeValue",value:function(e){this.checked=!!e}},{key:"registerOnChange",value:function(e){this._onChange=e}},{key:"registerOnTouched",value:function(e){this._onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this._changeDetectorRef.markForCheck()}},{key:"focus",value:function(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}},{key:"toggle",value:function(){this.checked=!this.checked,this._onChange(this.checked)}},{key:"_emitChangeEvent",value:function(){this._onChange(this.checked),this.change.emit(new x(this,this.checked))}},{key:"_onLabelTextChange",value:function(){this._changeDetectorRef.detectChanges()}}]),n}(_);return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(p.tE),r.Y36(r.sBO),r.$8M("tabindex"),r.Y36(b),r.Y36(d.Qb,8))},e.\u0275cmp=r.Xpm({type:e,selectors:[["mat-slide-toggle"]],viewQuery:function(e,t){var n;(1&e&&(r.Gf(h,5),r.Gf(v,5),r.Gf(g,5)),2&e)&&(r.iGM(n=r.CRH())&&(t._thumbEl=n.first),r.iGM(n=r.CRH())&&(t._thumbBarEl=n.first),r.iGM(n=r.CRH())&&(t._inputElement=n.first))},hostAttrs:[1,"mat-slide-toggle"],hostVars:12,hostBindings:function(e,t){2&e&&(r.Ikx("id",t.id),r.uIk("tabindex",t.disabled?null:-1)("aria-label",null)("aria-labelledby",null),r.ekj("mat-checked",t.checked)("mat-disabled",t.disabled)("mat-slide-toggle-label-before","before"==t.labelPosition)("_mat-animation-noopable","NoopAnimations"===t._animationMode))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[r._Bn([w]),r.qOj],ngContentSelectors:y,decls:16,vars:18,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["toggleBar",""],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],["thumbContainer",""],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:function(e,t){if(1&e&&(r.F$t(),r.TgZ(0,"label",0,1),r.TgZ(2,"div",2,3),r.TgZ(4,"input",4,5),r.NdJ("change",function(e){return t._onChangeEvent(e)})("click",function(e){return t._onInputClick(e)}),r.qZA(),r.TgZ(6,"div",6,7),r._UZ(8,"div",8),r.TgZ(9,"div",9),r._UZ(10,"div",10),r.qZA(),r.qZA(),r.qZA(),r.TgZ(11,"span",11,12),r.NdJ("cdkObserveContent",function(){return t._onLabelTextChange()}),r.TgZ(13,"span",13),r._uU(14,"\xa0"),r.qZA(),r.Hsn(15),r.qZA(),r.qZA()),2&e){var n=r.MAs(1),i=r.MAs(12);r.uIk("for",t.inputId),r.xp6(2),r.ekj("mat-slide-toggle-bar-no-side-margin",!i.textContent||!i.textContent.trim()),r.xp6(2),r.Q6J("id",t.inputId)("required",t.required)("tabIndex",t.tabIndex)("checked",t.checked)("disabled",t.disabled),r.uIk("name",t.name)("aria-checked",t.checked.toString())("aria-label",t.ariaLabel)("aria-labelledby",t.ariaLabelledby),r.xp6(5),r.Q6J("matRippleTrigger",n)("matRippleDisabled",t.disableRipple||t.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",r.DdM(17,m))}},directives:[o.wG,i.wD],styles:[".mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:transparent}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}.cdk-high-contrast-active .mat-slide-toggle.cdk-keyboard-focused .mat-slide-toggle-bar{outline:2px dotted;outline-offset:5px}\n"],encapsulation:2,changeDetection:0}),e}(),A=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e}(),Z=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[A,o.si,o.BQ,i.Q8],A,o.BQ]}),e}()},95439:function(e){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var a=o[r];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},81235:function(e,t,n){var i=n(4153)(n(27038),"DataView");e.exports=i},41505:function(e,t,n){var i=n(59410),r=n(21143),o=n(604),a=n(80584),s=n(7792);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},73545:function(e,t,n){var i=n(63391),r=n(68971),o=n(18858),a=n(37490),s=n(68944);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},39046:function(e,t,n){var i=n(4153)(n(27038),"Map");e.exports=i},93177:function(e,t,n){var i=n(70536),r=n(61502),o=n(94960),a=n(61539),s=n(34138);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=i,c.prototype.delete=r,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},97129:function(e,t,n){var i=n(4153)(n(27038),"Promise");e.exports=i},74918:function(e,t,n){var i=n(4153)(n(27038),"Set");e.exports=i},48690:function(e,t,n){var i=n(93177),r=n(30365),o=n(58235);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new i;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,e.exports=a},33667:function(e,t,n){var i=n(73545),r=n(18034),o=n(37238),a=n(75887),s=n(81450),c=n(61386);function l(e){var t=this.__data__=new i(e);this.size=t.size}l.prototype.clear=r,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=c,e.exports=l},57333:function(e,t,n){var i=n(27038);e.exports=i.Symbol},96820:function(e,t,n){var i=n(27038);e.exports=i.Uint8Array},54203:function(e,t,n){var i=n(4153)(n(27038),"WeakMap");e.exports=i},4500:function(e){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}},11375:function(e){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}},5242:function(e,t,n){var i=n(2166);e.exports=function(e,t){return!(null==e||!e.length)&&i(e,t,0)>-1}},80679:function(e){e.exports=function(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}},71890:function(e,t,n){var i=n(48282),r=n(2952),o=n(81690),a=n(84444),s=n(20968),c=n(47679),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&r(e),d=!n&&!u&&a(e),p=!n&&!u&&!d&&c(e),h=n||u||d||p,f=h?i(e.length,String):[],v=f.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||f.push(g);return f}},14992:function(e){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}},94165:function(e){e.exports=function(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}},8141:function(e){e.exports=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}},23898:function(e,t,n){var i=n(92007),r=n(71166),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&r(a,n)&&(void 0!==n||t in e)||i(e,t,n)}},15758:function(e,t,n){var i=n(71166);e.exports=function(e,t){for(var n=e.length;n--;)if(i(e[n][0],t))return n;return-1}},22067:function(e,t,n){var i=n(11694),r=n(59108);e.exports=function(e,t){return e&&i(t,r(t),e)}},70882:function(e,t,n){var i=n(11694),r=n(42970);e.exports=function(e,t){return e&&i(t,r(t),e)}},92007:function(e,t,n){var i=n(20395);e.exports=function(e,t,n){"__proto__"==t&&i?i(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},77007:function(e,t,n){var i=n(33667),r=n(4500),o=n(23898),a=n(22067),s=n(70882),c=n(50694),l=n(53595),u=n(14746),d=n(78857),p=n(58605),h=n(51675),f=n(26663),v=n(62963),g=n(32143),m=n(31563),y=n(81690),b=n(84444),k=n(32e3),w=n(53867),x=n(48855),_=n(59108),C=n(42970),A={};A["[object Arguments]"]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A["[object Object]"]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A["[object Function]"]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,Z,O,S,I){var T,E=1&n,P=2&n,F=4&n;if(Z&&(T=S?Z(t,O,S,I):Z(t)),void 0!==T)return T;if(!w(t))return t;var M=y(t);if(M){if(T=v(t),!E)return l(t,T)}else{var U=f(t),D="[object Function]"==U||"[object GeneratorFunction]"==U;if(b(t))return c(t,E);if("[object Object]"==U||"[object Arguments]"==U||D&&!S){if(T=P||D?{}:m(t),!E)return P?d(t,s(T,t)):u(t,a(T,t))}else{if(!A[U])return S?t:{};T=g(t,U,E)}}I||(I=new i);var L=I.get(t);if(L)return L;I.set(t,T),x(t)?t.forEach(function(i){T.add(e(i,n,Z,i,t,I))}):k(t)&&t.forEach(function(i,r){T.set(r,e(i,n,Z,r,t,I))});var q=M?void 0:(F?P?h:p:P?C:_)(t);return r(q||t,function(i,r){q&&(i=t[r=i]),o(T,r,e(i,n,Z,r,t,I))}),T}},60920:function(e,t,n){var i=n(53867),r=Object.create,o=function(){function e(){}return function(t){if(!i(t))return{};if(r)return r(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},12229:function(e){e.exports=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},93436:function(e,t,n){var i=n(64667),r=n(82773);e.exports=function(e,t){for(var n=0,o=(t=i(t,e)).length;null!=e&&n<o;)e=e[r(t[n++])];return n&&n==o?e:void 0}},19215:function(e,t,n){var i=n(94165),r=n(81690);e.exports=function(e,t,n){var o=t(e);return r(e)?o:i(o,n(e))}},72802:function(e,t,n){var i=n(57333),r=n(21613),o=n(81244),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?r(e):o(e)}},55333:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},2166:function(e,t,n){var i=n(12229),r=n(2469),o=n(54299);e.exports=function(e,t,n){return t==t?o(e,t,n):i(e,r,n)}},77090:function(e,t,n){var i=n(72802),r=n(27503);e.exports=function(e){return r(e)&&"[object Arguments]"==i(e)}},30696:function(e,t,n){var i=n(36863),r=n(27503);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!r(t)&&!r(n)?t!=t&&n!=n:i(t,n,o,a,e,s))}},36863:function(e,t,n){var i=n(33667),r=n(27667),o=n(64630),a=n(70838),s=n(26663),c=n(81690),l=n(84444),u=n(47679),d="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,h,f,v){var g=c(e),m=c(t),y=g?"[object Array]":s(e),b=m?"[object Array]":s(t),k=(y="[object Arguments]"==y?d:y)==d,w=(b="[object Arguments]"==b?d:b)==d,x=y==b;if(x&&l(e)){if(!l(t))return!1;g=!0,k=!1}if(x&&!k)return v||(v=new i),g||u(e)?r(e,t,n,h,f,v):o(e,t,y,n,h,f,v);if(!(1&n)){var _=k&&p.call(e,"__wrapped__"),C=w&&p.call(t,"__wrapped__");if(_||C){var A=_?e.value():e,Z=C?t.value():t;return v||(v=new i),f(A,Z,n,h,v)}}return!!x&&(v||(v=new i),a(e,t,n,h,f,v))}},63434:function(e,t,n){var i=n(26663),r=n(27503);e.exports=function(e){return r(e)&&"[object Map]"==i(e)}},88783:function(e,t,n){var i=n(33667),r=n(30696);e.exports=function(e,t,n,o){var a=n.length,s=a,c=!o;if(null==e)return!s;for(e=Object(e);a--;){var l=n[a];if(c&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var u=(l=n[a])[0],d=e[u],p=l[1];if(c&&l[2]){if(void 0===d&&!(u in e))return!1}else{var h=new i;if(o)var f=o(d,p,u,e,t,h);if(!(void 0===f?r(p,d,3,o,h):f))return!1}}return!0}},2469:function(e){e.exports=function(e){return e!=e}},43540:function(e,t,n){var i=n(55836),r=n(38466),o=n(53867),a=n(51217),s=/^\[object .+?Constructor\]$/,c=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||r(e))&&(i(e)?c:s).test(a(e))}},67495:function(e,t,n){var i=n(26663),r=n(27503);e.exports=function(e){return r(e)&&"[object Set]"==i(e)}},99390:function(e,t,n){var i=n(72802),r=n(8613),o=n(27503),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&r(e.length)&&!!a[i(e)]}},5245:function(e,t,n){var i=n(69433),r=n(68608),o=n(80290),a=n(81690),s=n(63354);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?r(e[0],e[1]):i(e):s(e)}},92488:function(e,t,n){var i=n(58845),r=n(36700),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return r(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},50762:function(e,t,n){var i=n(53867),r=n(58845),o=n(25618),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return o(e);var t=r(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},69433:function(e,t,n){var i=n(88783),r=n(48834),o=n(63587);e.exports=function(e){var t=r(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||i(n,e,t)}}},68608:function(e,t,n){var i=n(30696),r=n(58102),o=n(18303),a=n(99743),s=n(45774),c=n(63587),l=n(82773);e.exports=function(e,t){return a(e)&&s(t)?c(l(e),t):function(n){var a=r(n,e);return void 0===a&&a===t?o(n,e):i(t,a,3)}}},68840:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},59866:function(e,t,n){var i=n(93436);e.exports=function(e){return function(t){return i(t,e)}}},48282:function(e){e.exports=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}},68166:function(e,t,n){var i=n(57333),r=n(14992),o=n(81690),a=n(7786),s=i?i.prototype:void 0,c=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return r(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},70544:function(e){e.exports=function(e){return function(t){return e(t)}}},83987:function(e,t,n){var i=n(48690),r=n(5242),o=n(80679),a=n(13747),s=n(52252),c=n(57673);e.exports=function(e,t,n){var l=-1,u=r,d=e.length,p=!0,h=[],f=h;if(n)p=!1,u=o;else if(d>=200){var v=t?null:s(e);if(v)return c(v);p=!1,u=a,f=new i}else f=t?[]:h;e:for(;++l<d;){var g=e[l],m=t?t(g):g;if(g=n||0!==g?g:0,p&&m==m){for(var y=f.length;y--;)if(f[y]===m)continue e;t&&f.push(m),h.push(g)}else u(f,m,n)||(f!==h&&f.push(m),h.push(g))}return h}},13747:function(e){e.exports=function(e,t){return e.has(t)}},64667:function(e,t,n){var i=n(81690),r=n(99743),o=n(89775),a=n(41233);e.exports=function(e,t){return i(e)?e:r(e,t)?[e]:o(a(e))}},88461:function(e,t,n){var i=n(96820);e.exports=function(e){var t=new e.constructor(e.byteLength);return new i(t).set(new i(e)),t}},50694:function(e,t,n){e=n.nmd(e);var i=n(27038),r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,a=o&&o.exports===r?i.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,i=s?s(n):new e.constructor(n);return e.copy(i),i}},59757:function(e,t,n){var i=n(88461);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},83615:function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},42282:function(e,t,n){var i=n(57333),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},53769:function(e,t,n){var i=n(88461);e.exports=function(e,t){var n=t?i(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},53595:function(e){e.exports=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}},11694:function(e,t,n){var i=n(23898),r=n(92007);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var l=t[s],u=o?o(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),a?r(n,l,u):i(n,l,u)}return n}},14746:function(e,t,n){var i=n(11694),r=n(10296);e.exports=function(e,t){return i(e,r(e),t)}},78857:function(e,t,n){var i=n(11694),r=n(29572);e.exports=function(e,t){return i(e,r(e),t)}},93412:function(e,t,n){var i=n(27038);e.exports=i["__core-js_shared__"]},52252:function(e,t,n){var i=n(74918),r=n(49122),o=n(57673),a=i&&1/o(new i([,-0]))[1]==1/0?function(e){return new i(e)}:r;e.exports=a},20395:function(e,t,n){var i=n(4153),r=function(){try{var e=i(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=r},27667:function(e,t,n){var i=n(48690),r=n(8141),o=n(13747);e.exports=function(e,t,n,a,s,c){var l=1&n,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var p=c.get(e),h=c.get(t);if(p&&h)return p==t&&h==e;var f=-1,v=!0,g=2&n?new i:void 0;for(c.set(e,t),c.set(t,e);++f<u;){var m=e[f],y=t[f];if(a)var b=l?a(y,m,f,t,e,c):a(m,y,f,e,t,c);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!r(t,function(e,t){if(!o(g,t)&&(m===e||s(m,e,n,a,c)))return g.push(t)})){v=!1;break}}else if(m!==y&&!s(m,y,n,a,c)){v=!1;break}}return c.delete(e),c.delete(t),v}},64630:function(e,t,n){var i=n(57333),r=n(96820),o=n(71166),a=n(27667),s=n(37461),c=n(57673),l=i?i.prototype:void 0,u=l?l.valueOf:void 0;e.exports=function(e,t,n,i,l,d,p){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new r(e),new r(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":if(h||(h=c),e.size!=t.size&&!(1&i))return!1;var f=p.get(e);if(f)return f==t;i|=2,p.set(e,t);var v=a(h(e),h(t),i,l,d,p);return p.delete(e),v;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},70838:function(e,t,n){var i=n(58605),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var c=1&n,l=i(e),u=l.length;if(u!=i(t).length&&!c)return!1;for(var d=u;d--;){var p=l[d];if(!(c?p in t:r.call(t,p)))return!1}var h=s.get(e),f=s.get(t);if(h&&f)return h==t&&f==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=c;++d<u;){var m=e[p=l[d]],y=t[p];if(o)var b=c?o(y,m,p,t,e,s):o(m,y,p,e,t,s);if(!(void 0===b?m===y||a(m,y,n,o,s):b)){v=!1;break}g||(g="constructor"==p)}if(v&&!g){var k=e.constructor,w=t.constructor;k==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof k&&k instanceof k&&"function"==typeof w&&w instanceof w||(v=!1)}return s.delete(e),s.delete(t),v}},61138:function(e){var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},58605:function(e,t,n){var i=n(19215),r=n(10296),o=n(59108);e.exports=function(e){return i(e,o,r)}},51675:function(e,t,n){var i=n(19215),r=n(29572),o=n(42970);e.exports=function(e){return i(e,o,r)}},85556:function(e,t,n){var i=n(36586);e.exports=function(e,t){var n=e.__data__;return i(t)?n["string"==typeof t?"string":"hash"]:n.map}},48834:function(e,t,n){var i=n(45774),r=n(59108);e.exports=function(e){for(var t=r(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,i(a)]}return t}},4153:function(e,t,n){var i=n(43540),r=n(36825);e.exports=function(e,t){var n=r(e,t);return i(n)?n:void 0}},52398:function(e,t,n){var i=n(93332)(Object.getPrototypeOf,Object);e.exports=i},21613:function(e,t,n){var i=n(57333),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var i=!0}catch(c){}var r=a.call(e);return i&&(t?e[s]=n:delete e[s]),r}},10296:function(e,t,n){var i=n(11375),r=n(65336),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;e.exports=a?function(e){return null==e?[]:(e=Object(e),i(a(e),function(t){return o.call(e,t)}))}:r},29572:function(e,t,n){var i=n(94165),r=n(52398),o=n(10296),a=n(65336);e.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)i(t,o(e)),e=r(e);return t}:a},26663:function(e,t,n){var i=n(81235),r=n(39046),o=n(97129),a=n(74918),s=n(54203),c=n(72802),l=n(51217),u=l(i),d=l(r),p=l(o),h=l(a),f=l(s),v=c;(i&&"[object DataView]"!=v(new i(new ArrayBuffer(1)))||r&&"[object Map]"!=v(new r)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,i=n?l(n):"";if(i)switch(i){case u:return"[object DataView]";case d:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case f:return"[object WeakMap]"}return t}),e.exports=v},36825:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},82138:function(e,t,n){var i=n(64667),r=n(2952),o=n(81690),a=n(20968),s=n(8613),c=n(82773);e.exports=function(e,t,n){for(var l=-1,u=(t=i(t,e)).length,d=!1;++l<u;){var p=c(t[l]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++l!=u?d:!!(u=null==e?0:e.length)&&s(u)&&a(p,u)&&(o(e)||r(e))}},59410:function(e,t,n){var i=n(95969);e.exports=function(){this.__data__=i?i(null):{},this.size=0}},21143:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},604:function(e,t,n){var i=n(95969),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(t,e)?t[e]:void 0}},80584:function(e,t,n){var i=n(95969),r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return i?void 0!==t[e]:r.call(t,e)}},7792:function(e,t,n){var i=n(95969);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this}},62963:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,i=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(i.index=e.index,i.input=e.input),i}},32143:function(e,t,n){var i=n(88461),r=n(59757),o=n(83615),a=n(42282),s=n(53769);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return r(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return o(e);case"[object Set]":return new c;case"[object Symbol]":return a(e)}}},31563:function(e,t,n){var i=n(60920),r=n(52398),o=n(58845);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:i(r(e))}},20968:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&t.test(e))&&e>-1&&e%1==0&&e<n}},99743:function(e,t,n){var i=n(81690),r=n(7786),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},36586:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},38466:function(e,t,n){var i,r=n(93412),o=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";e.exports=function(e){return!!o&&o in e}},58845:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},45774:function(e,t,n){var i=n(53867);e.exports=function(e){return e==e&&!i(e)}},63391:function(e){e.exports=function(){this.__data__=[],this.size=0}},68971:function(e,t,n){var i=n(15758),r=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=i(t,e);return!(n<0||(n==t.length-1?t.pop():r.call(t,n,1),--this.size,0))}},18858:function(e,t,n){var i=n(15758);e.exports=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]}},37490:function(e,t,n){var i=n(15758);e.exports=function(e){return i(this.__data__,e)>-1}},68944:function(e,t,n){var i=n(15758);e.exports=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},70536:function(e,t,n){var i=n(41505),r=n(73545),o=n(39046);e.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},61502:function(e,t,n){var i=n(85556);e.exports=function(e){var t=i(this,e).delete(e);return this.size-=t?1:0,t}},94960:function(e,t,n){var i=n(85556);e.exports=function(e){return i(this,e).get(e)}},61539:function(e,t,n){var i=n(85556);e.exports=function(e){return i(this,e).has(e)}},34138:function(e,t,n){var i=n(85556);e.exports=function(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},37461:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}},63587:function(e){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},43911:function(e,t,n){var i=n(97425);e.exports=function(e){var t=i(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},95969:function(e,t,n){var i=n(4153)(Object,"create");e.exports=i},36700:function(e,t,n){var i=n(93332)(Object.keys,Object);e.exports=i},25618:function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},70938:function(e,t,n){e=n.nmd(e);var i=n(61138),r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,a=o&&o.exports===r&&i.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},81244:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},93332:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},27038:function(e,t,n){var i=n(61138),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},30365:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},58235:function(e){e.exports=function(e){return this.__data__.has(e)}},57673:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},18034:function(e,t,n){var i=n(73545);e.exports=function(){this.__data__=new i,this.size=0}},37238:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},75887:function(e){e.exports=function(e){return this.__data__.get(e)}},81450:function(e){e.exports=function(e){return this.__data__.has(e)}},61386:function(e,t,n){var i=n(73545),r=n(39046),o=n(93177);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!r||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},54299:function(e){e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}},89775:function(e,t,n){var i=n(43911),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,i,r){t.push(i?r.replace(o,"$1"):n||e)}),t});e.exports=a},82773:function(e,t,n){var i=n(7786);e.exports=function(e){if("string"==typeof e||i(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},51217:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},37524:function(e,t,n){var i=n(77007);e.exports=function(e){return i(e,5)}},71166:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},58102:function(e,t,n){var i=n(93436);e.exports=function(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}},18303:function(e,t,n){var i=n(55333),r=n(82138);e.exports=function(e,t){return null!=e&&r(e,t,i)}},80290:function(e){e.exports=function(e){return e}},2952:function(e,t,n){var i=n(77090),r=n(27503),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=i(function(){return arguments}())?i:function(e){return r(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},81690:function(e){e.exports=Array.isArray},93406:function(e,t,n){var i=n(55836),r=n(8613);e.exports=function(e){return null!=e&&r(e.length)&&!i(e)}},84444:function(e,t,n){e=n.nmd(e);var i=n(27038),r=n(61711),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?i.Buffer:void 0;e.exports=(s?s.isBuffer:void 0)||r},49977:function(e,t,n){var i=n(30696);e.exports=function(e,t){return i(e,t)}},55836:function(e,t,n){var i=n(72802),r=n(53867);e.exports=function(e){if(!r(e))return!1;var t=i(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},8613:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},32e3:function(e,t,n){var i=n(63434),r=n(70544),o=n(70938),a=o&&o.isMap,s=a?r(a):i;e.exports=s},53867:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},27503:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},48855:function(e,t,n){var i=n(67495),r=n(70544),o=n(70938),a=o&&o.isSet,s=a?r(a):i;e.exports=s},7786:function(e,t,n){var i=n(72802),r=n(27503);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},47679:function(e,t,n){var i=n(99390),r=n(70544),o=n(70938),a=o&&o.isTypedArray,s=a?r(a):i;e.exports=s},59108:function(e,t,n){var i=n(71890),r=n(92488),o=n(93406);e.exports=function(e){return o(e)?i(e):r(e)}},42970:function(e,t,n){var i=n(71890),r=n(50762),o=n(93406);e.exports=function(e){return o(e)?i(e,!0):r(e)}},97425:function(e,t,n){var i=n(93177);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(r.Cache||i),n}r.Cache=i,e.exports=r},49122:function(e){e.exports=function(){}},63354:function(e,t,n){var i=n(68840),r=n(59866),o=n(99743),a=n(82773);e.exports=function(e){return o(e)?i(a(e)):r(e)}},65336:function(e){e.exports=function(){return[]}},61711:function(e){e.exports=function(){return!1}},41233:function(e,t,n){var i=n(68166);e.exports=function(e){return null==e?"":i(e)}},76394:function(e,t,n){var i=n(5245),r=n(83987);e.exports=function(e,t){return e&&e.length?r(e,i(t,2)):[]}},39426:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var i=n(77393),r=n(33637),o={leading:!0,trailing:!1};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.P,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(i){return i.lift(new l(e,t,n.leading,n.trailing))}}var l=function(){function e(t,n,i,r){f(this,e),this.duration=t,this.scheduler=n,this.leading=i,this.trailing=r}return s(e,[{key:"call",value:function(e,t){return t.subscribe(new d(e,this.duration,this.scheduler,this.leading,this.trailing))}}]),e}(),d=function(e){c(n,e);var t=u(n);function n(e,i,r,o,a){var s;return f(this,n),(s=t.call(this,e)).duration=i,s.scheduler=r,s.leading=o,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return s(n,[{key:"_next",value:function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(p,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)}}]),n}(i.L);function p(e){e.subscriber.clearThrottle()}},79012:function(r,o,a){"use strict";a.r(o),a.d(o,{DriveModule:function(){return tl},STATE_HANDLERS:function(){return el}});var l,d=a(38583),p=a(63423),v=a(64762),g=a(37716),m=a(47661),y=a(93342),b=a(68939),k=function(){var e=function e(){f(this,e)};return e.type="[Drive] Load User Folders",e}(),w=function(){var e=function e(){f(this,e)};return e.type="[Drive] Load User Space Usage",e}(),x=function(){var e=function e(t){f(this,e),this.folders=t};return e.type="[Drive] Build Folder Tree",e}(),_=function(){var e=function e(t){f(this,e),this.folder=t};return e.type="[Drive] Open Folder",e}(),C=function(){var e=function e(t){f(this,e),this.queryParams=t};return e.type="[Drive] Open Search Page",e}(),A=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Select Entries",e}(),Z=function(){var e=function e(){f(this,e)};return e.type="[Drive] Select All Entries",e}(),O=function(){var e=function e(){f(this,e)};return e.type="[Drive] Deselect All Entries",e}(),S=function(){var e=function e(){f(this,e)};return e.type="[Drive] Delete Selected Entries",e}(),I=function(){var e=function e(){f(this,e)};return e.type="[Drive] Open UploadsApiService Panel",e}(),T=function(){var e=function e(){f(this,e)};return e.type="[Drive] Close UploadsApiService Panel",e}(),E=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Add Entries",e}(),P=function(){var e=function e(t,n){f(this,e),this.destination=t,this.entries=n};return e.type="[Drive API] Move Entries",e}(),F=function(){var e=function e(t,n,i){f(this,e),this.dialog=t,this.data=n,this.config=i};return e.type="[Drive] Open Dialog",e}(),M=function(){var e=function e(t,n){f(this,e),this.data=t,this.confirmAction=n};return e.type="[Drive] Open Confirm Dialog",e}(),U=function(){var e=function e(t){f(this,e),this.mode=t};return e.type="[Drive] Set View Mode",e}(),D=function(){var e=function e(){f(this,e)};return e.type="[Drive] Toggle Details",e}(),L=function(){var e=function e(){f(this,e)};return e.type="[Drive] Toggle Sidebar",e}(),q=function(){var e=function e(t){f(this,e),this.files=t};return e.type="[Drive] Upload Files",e}(),N=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Restore Trashed Entries",e}(),$=function(){var e=function e(){f(this,e)};return e.type="[Drive] Delete Trashed Entries Forever",e}(),B=function(){var e=function e(){f(this,e)};return e.type="[Drive] Empty Trash",e}(),R=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Open File Preview Overlay",e}(),Y=function(){var e=function e(t,n,i){f(this,e),this.entries=t,this.link=n,this.password=i};return e.type="[Drive] Download Files",e}(),j=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Add a Star",e}(),Q=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Remove Star",e}(),J=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Remove Entries",e}(),V=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.queryParams=t,this.loadMore=!0};return e.type="[Drive Infinite Scroll] Load More Entries",e}(),z=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;f(this,e),this.queryParams=t,this.page=n};return e.type="[Drive] Reload Page Entries",e}(),H=function(){var e=function e(){f(this,e)};return e.type="[Drive] Copy Selected Entries",e}(),G=function(){var e=function e(t){f(this,e),this.type=t};return e.type="[Drive] Open Upload Window",e}(),W=function(){var e=function e(t){f(this,e),this.message=t};return e.type="[Drive] Show Loading Toast",e}(),X=function(){var e=function e(){f(this,e)};return e.type="[Drive] Hide Loading Toast",e}(),K=function(){var e=function e(){f(this,e)};return e.type="[Drive] Reset State",e}(),ee=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Update Entries",e}(),te=function(){var e=function e(t){f(this,e),this.user=t};return e.type="[Drive] Set Current User",e}(),ne=function(){var e=function e(t){f(this,e),this.workspace=t};return e.type="[Drive] Set Workspace",e}(),ie=function(){var e=function e(t,n){f(this,e),this.entry=t,this.description=n};return e.type="[Drive] Update Entry Description",e}(),re=function e(t){var n=this;f(this,e),this.name=null,this.viewName=null,this.folder=null,this.folderHash=null,this.hasActions=!1,this.sortColumn="updated_at",this.sortDirection="desc",this.queryParams={},Object.keys(t).forEach(function(e){n[e]=t[e]})},oe=new re({name:"recent",viewName:"Recent",disableSort:!0,sortColumn:"created_at",sortDirection:"desc",queryParams:{recentOnly:!0}}),ae=new re({name:"search",viewName:"Search results"}),se=new re({name:"shares",viewName:"Shared",queryParams:{sharedOnly:!0}}),ce=new re({name:"trash",viewName:"Trash",hasActions:!0,queryParams:{deletedOnly:!0}}),le=new re({name:"workspaces",viewName:"Workspaces"}),ue=new re({name:"starred",viewName:"Starred",queryParams:{starredOnly:!0}}),de=function(e){c(n,e);var t=u(n);function n(e){return f(this,n),t.call(this,{name:"folder",viewName:null==e?void 0:e.name,folder:e,folderHash:null==e?void 0:e.hash,hasActions:!0})}return n}(re),pe=function(){var e=function e(){f(this,e),this.page=oe,this.queryParams={orderBy:"created_at",recentOnly:!0}};return e.type="[Drive] Recent Entries Page Opened",e}(),he=function(){var e=function e(t){f(this,e),this.queryParams={},this.page=new de({hash:t})};return e.type="[Drive] Folder Page Opened",e}(),fe=function(){var e=function e(){f(this,e),this.page=se,this.queryParams={sharedOnly:!0}};return e.type="[Drive] Shared folder opened",e}(),ve=function(){var e=function e(){f(this,e),this.page=ce,this.queryParams={deletedOnly:!0}};return e.type="[Drive] Trash Page Opened",e}(),ge=function(){var e=function e(){f(this,e),this.page=le};return e.type="[Drive] Workspaces Index Page Opened",e}(),me=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.queryParams=t,this.page=ae};return e.type="[Drive] Search Page Opened",e}(),ye=function(){var e=function e(){f(this,e),this.page=ue,this.queryParams={starredOnly:!0}};return e.type="[Drive] Starred Entries Page Opened",e}(),be=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] Entries Selected Via Drag",e}(),ke=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive] File Selected Via ContextMenu",e}(),we=function(){var e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f(this,e),this.entry=t,this.ctrlKey=n};return e.type="[Drive] User Tapped File",e}(),xe=function(){var e=function e(t){f(this,e),this.entry=t};return e.type="[Drive] User Double Tapped Entry",e}(),_e=function(){var e=function e(t){f(this,e),this.deletedFiles=t};return e.type="[Drive] Successfully Deleted Files",e}(),Ce=function(){var e=function e(t){f(this,e),this.entry=t};return e.type="[Drive] Entry Context Menu Opened",e}(),Ae=function(){var e=function e(t){f(this,e),this.folder=t};return e.type="[Drive] New Folder Created",e}(),Ze=function(){var e=function e(t,n){f(this,e),this.entry=t,this.newName=n};return e.type="[Drive] Entry Renamed",e}(),Oe=function(){var e=function e(){f(this,e)};return e.type="[Drive] Started Dragging",e}(),Se=function(){var e=function e(){f(this,e)};return e.type="[Drive] Stopped Dragging",e}(),Ie=function(){var e=function e(t,n,i){f(this,e),this.destination=t,this.oldLocation=n,this.entries=i};return e.type="[Drive API] Move Entries Success",e}(),Te=function(){var e=function e(t){f(this,e),this.messages=t};return e.type="[Drive API] Move Entries Failed",e}(),Ee=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive API] Trashed Entries Delete Forever Success",e}(),Pe=function(){var e=function e(t){f(this,e),this.entries=t};return e.type="[Drive API] Trashed Entries Restore Success",e}(),Fe=function(){var e=function e(){f(this,e)};return e.type="[Drive] Not Enough Space Error",e}(),Me=function(){var e=function e(){f(this,e)};return e.type="[Drive] User Space Usage Changed",e}(),Ue=function(){var e=function e(t){f(this,e),this.status=t};return e.type="[Drive] BreakpointChanged",e}(),De={isMobile:!1,activePage:null,folderTree:[],flatFolders:[],userFoldersLoaded:!1,entries:[],selectedEntries:[],dragging:!1,loading:!1,uploadsPanelOpen:!1,viewMode:"grid",detailsVisible:!0,sidebarOpen:!0,currentUser:null,activeWorkspace:null,spaceUsage:{available:null,used:null},meta:{sortColumn:"updated_at",sortDirection:"desc",currentPage:0,lastPage:0}},Le=a(41880),qe=(function(e){e.copyEntries="Copying items...",e.emptyTrash="Emptying trash...",e.moveEntries="Moving items..."}(qe||(qe={})),qe),Ne=new g.OlP("DRIVE_UPLOAD_INPUT_CONFIG"),$e=a(24162),Be=(function(e){e.GET_ALL="drive/folders",e.CREATE="drive/folders"}(Be||(Be={})),Be),Re=a(90299),Ye=a(24688),je=function(){var e=function(){function e(t,n){f(this,e),this.http=t,this.currentUser=n}return s(e,[{key:"getAll",value:function(e){return this.http.get(Be.GET_ALL,e)}},{key:"getAllForCurrentUser",value:function(){return this.http.get("drive/users/"+this.currentUser.get("id")+"/folders")}},{key:"create",value:function(e){return this.http.post(Be.CREATE,e)}},{key:"getByHash",value:function(e){return this.http.get("drive/folders/find",{hash:e})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(Re.r),g.LFG(Ye.I))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Qe=function(){var e=function(){function e(t,n){f(this,e),this.http=t,this.currentUser=n}return s(e,[{key:"getEntriesForFolder",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.get("drive/entries",e)}},{key:"getCurrentUserEntries",value:function(e){return e.userId=this.currentUser.get("id"),this.http.get("drive/entries",e)}},{key:"update",value:function(e,t){return this.http.put("uploads/"+e,t)}},{key:"delete",value:function(e){return this.http.delete("drive/entries",e)}},{key:"copy",value:function(e){return this.http.post("drive/entries/copy",e)}},{key:"restore",value:function(e){return this.http.post("drive/entries/restore",e)}},{key:"emptyTrash",value:function(){return this.delete({emptyTrash:!0})}},{key:"moveEntries",value:function(e){return this.http.post("drive/entries/move",e)}},{key:"addStar",value:function(e){return this.http.post("drive/entries/star",{entryIds:e})}},{key:"removeStar",value:function(e){return this.http.post("drive/entries/unstar",{entryIds:e})}},{key:"getSpaceUsage",value:function(){return this.http.get("drive/user/space-usage")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(Re.r),g.LFG(Ye.I))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Je=function(){var e=function(){function e(){f(this,e)}return s(e,[{key:"driveRoot",value:function(){return"/drive"}},{key:"folder",value:function(e){return(null==e?void 0:e.id)?"/drive/folders/".concat(e.hash):this.driveRoot()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ve=a(56456),ze=a(90962),He=a(18715),Ge=a(68756),We=a(16850),Xe=a(45746),Ke=a(43256),et=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).DEFAULT_MAX_FILE_SIZE_MB=8,e}return s(n,[{key:"initValidations",value:function(){this.validations.push(new Ge.p({maxSize:this.getMaxFileSize()},this.i18n));var e=this.getAllowedExtensions(),t=this.getBlockedExtensions();e&&e.length&&this.validations.push(new Xe.G({extensions:e},this.i18n)),t&&t.length&&this.validations.push(new Ke.u({extensions:t},this.i18n))}},{key:"getMaxFileSize",value:function(){return this.settings.get("uploads.max_size",(0,We.F)(this.DEFAULT_MAX_FILE_SIZE_MB,"MB"))}},{key:"getAllowedExtensions",value:function(){return this.settings.getJson("uploads.allowed_extensions")}},{key:"getBlockedExtensions",value:function(){return this.settings.getJson("uploads.blocked_extensions")}}]),n}(He.c);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),tt=a(87991),nt=a(35718),it=l=function(){function e(t,n,i,r,o,a,s,c,l,u,d){f(this,e),this.foldersApi=t,this.entriesApi=n,this.router=i,this.driveUrls=r,this.uploads=o,this.store=a,this.localStore=s,this.validator=c,this.workspaces=l,this.toast=u,this.uploadInputConfig=d}return s(e,[{key:"loadUserFolders",value:function(e){return this.foldersApi.getAllForCurrentUser().pipe((0,y.b)(function(t){return e.patchState({rootFolder:t.rootFolder}),e.dispatch(new x(t.folders))}))}},{key:"buildFolderTree",value:function(e,t){var n=t.folders||e.getState().flatFolders,i=function(e){for(var t={},n=[],i=0,r=e.length;i<r;i++){var o=e[i];o.children=[],t[o.id]=o}for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];if(s.parent_id){var c=t[s.parent_id];c&&c.children.push(s)}else n.push(s)}return n}(n);e.patchState({folderTree:i,flatFolders:n,userFoldersLoaded:!0})}},{key:"workspacesIndexPageOpened",value:function(e,t){e.patchState({activePage:t.page})}},{key:"loadDriveEntries",value:function(e,t){var n=e.getState(),i={loading:!0,meta:Object.assign({},n.meta)};i.activePage=t.page?t.page:n.activePage,i.meta.sortColumn=t.queryParams.orderBy||n.meta.sortColumn||i.activePage.sortColumn,i.meta.sortDirection=t.queryParams.orderDir||n.meta.sortDirection||i.activePage.sortDirection,"search"!==i.activePage.name&&(i.meta.query=null,i.meta.filters=null),i.meta.query=t.queryParams.query||i.meta.query,i.meta.filters=t.queryParams.filters||i.meta.filters,e.patchState(i);var r=this.transformQueryParams(Object.assign(Object.assign({},t.queryParams),i.activePage.queryParams));return"search"!==i.activePage.name||i.meta.query||i.meta.filters?this.entriesApi.getEntriesForFolder(r).pipe((0,y.b)(function(r){var o={entries:(t.loadMore?n.entries:[]).concat(r.data),meta:Object.assign(Object.assign({},i.meta),{lastPage:r.last_page,currentPage:r.current_page}),loading:!1};return o.activePage=Object.assign(Object.assign({},i.activePage),{folder:r.folder}),e.patchState(o)},function(){return e.patchState({loading:!1})})):e.patchState({entries:[],loading:!1,activePage:i.activePage,meta:Object.assign(Object.assign({},i.meta),{lastPage:1,currentPage:1})})}},{key:"openFolder",value:function(e,t){var n=e.getState().activePage.folder;if(!n||t.folder.id!==n.id)return t.folder&&t.folder.deleted_at?e.dispatch(new M({title:"Folder is in trash",body:"To view this folder, you need to restore it first.",ok:"Restore"},new N([t.folder]))):(e.patchState({loading:!0}),this.router.navigate([this.driveUrls.folder(t.folder)]))}},{key:"openSearchPage",value:function(e,t){return e.patchState({loading:!0}),this.router.navigate(["/drive/search"],{queryParams:t.queryParams})}},{key:"selectEntries",value:function(e,t){e.patchState({selectedEntries:t.entries})}},{key:"deselectAllEntries",value:function(e){e.getState().selectedEntries.length&&e.patchState({selectedEntries:[]})}},{key:"SelectAllEntries",value:function(e){e.patchState({selectedEntries:e.getState().entries.slice()})}},{key:"entryTapped",value:function(e,t){var n=e.getState().selectedEntries.slice(),r=!1,o=n.findIndex(function(e){return e.id===t.entry.id});o>-1&&(n.splice(o,1),r=!0),e.patchState(t.ctrlKey?r?{selectedEntries:n}:{selectedEntries:[].concat(i(n),[t.entry])}:{selectedEntries:[t.entry]}),e.getState().isMobile&&this.entryDoubleTapped(e,t)}},{key:"entryDoubleTapped",value:function(e,t){return e.dispatch("folder"===t.entry.type?new _(t.entry):new R([t.entry]))}},{key:"deleteSelectedEntries",value:function(e){var t=this,n=this.store.selectSnapshot(l.selectedEntries),i=this.store.selectSnapshot(l.selectedEntryIds),r=this.store.selectSnapshot(l.flatFolders),o=e.getState().activePage;return this.entriesApi.delete({entryIds:i}).pipe((0,y.b)(function(){var a={entries:e.getState().entries.filter(function(e){return-1===i.indexOf(e.id)})},s=[new _e(n)];a.selectedEntries=[],o.folder&&i.indexOf(o.folder.id)>-1&&t.store.dispatch(new _(t.store.selectSnapshot(l.selectedEntryParent)));var c=n.filter(function(e){return"folder"===e.type});return c.length&&(c.forEach(function(e){return delete r[e.id]}),a.flatFolders=r,s.push(new x)),e.patchState(a),e.dispatch(s)}))}},{key:"fileContextMenuOpened",value:function(e,t){var n;if(null===(n=null==t?void 0:t.entry)||void 0===n?void 0:n.id)return e.getState().selectedEntries.find(function(e){return e.id===t.entry.id})?void 0:e.dispatch(new ke([t.entry]))}},{key:"newFolderCreated",value:function(e,t){var n=e.getState(),r={flatFolders:[].concat(i(n.flatFolders),[t.folder])};return t.folder.parent_id===n.activePage.folder.id&&(r.entries=[t.folder].concat(i(n.entries))),e.patchState(r),e.dispatch(new x)}},{key:"entryRenamed",value:function(e,t){var n=e.getState(),i={entries:n.entries.slice()},r=i.entries.findIndex(function(e){return e.id===t.entry.id});if(r>-1&&(i.entries[r]=Object.assign(Object.assign({},i.entries[r]),{name:t.newName})),i.selectedEntries=[Object.assign(Object.assign({},n.selectedEntries[0]),{name:t.newName})],n.activePage.folder&&n.activePage.folder.id===t.entry.id&&(i.activePage=Object.assign(Object.assign({},n.activePage),{folder:t.entry})),"folder"===t.entry.type){var o=Object.assign({},n.flatFolders);o[t.entry.id]=Object.assign(Object.assign({},o[t.entry.id]),{name:t.newName}),i.flatFolders=o,e.dispatch(new x)}e.patchState(i)}},{key:"startedDragging",value:function(e){e.patchState({dragging:!0})}},{key:"stoppedDragging",value:function(e){e.patchState({dragging:!1})}},{key:"movieEntries",value:function(e,t){var n,i=t.entries||e.getState().selectedEntries;if(l.canMoveEntriesTo(i,t.destination)){e.dispatch(new W(qe.moveEntries));var r=i[0].parent_id;return this.entriesApi.moveEntries({entryIds:i.map(function(e){return e.id}),destination:null===(n=t.destination)||void 0===n?void 0:n.id}).pipe((0,b.x)(function(){return e.dispatch(new X)}),(0,y.b)(function(n){var i;return e.dispatch(new Ie(null===(i=t.destination)||void 0===i?void 0:i.id,r,n.entries))},function(t){return e.dispatch(new Te(t.errors))}))}}},{key:"moveEntriesSuccess",value:function(e,t){var n=e.getState(),i=t.entries.map(function(e){return e.id}),r=t.entries.filter(function(e){return"folder"===e.type}),o={selectedEntries:[],entries:n.entries.filter(function(e){return-1===i.indexOf(e.id)})};if(r.length&&(o.flatFolders=Object.assign({},n.flatFolders),t.entries.filter(function(e){return"folder"===e.type}).forEach(function(e){return o.flatFolders[e.id]=e})),n.activePage.folder){var a=t.entries.find(function(e){return n.activePage.folder.id===e.id});a&&(o.activePage=Object.assign(Object.assign({},n.activePage),{folder:a}))}return e.patchState(o),e.dispatch(new x)}},{key:"setViewMode",value:function(e,t){this.localStore.set("bedrive.viewMode",t.mode),e.patchState({viewMode:t.mode})}},{key:"toggleDetailsSidebar",value:function(e){e.patchState({detailsVisible:!e.getState().detailsVisible})}},{key:"toggleSidebar",value:function(e){e.patchState({sidebarOpen:!e.getState().sidebarOpen})}},{key:"addEntries",value:function(e,t){var n=e.getState().entries,r=e.getState().spaceUsage,o=t.entries.filter(function(e){return!n.find(function(t){return t.id===e.id})}),a=o.filter(function(e){return"folder"!==e.type}).reduce(function(e,t){return e+t.file_size},0);e.patchState({entries:[].concat(i(o),i(n)),spaceUsage:Object.assign(Object.assign({},r),{used:r.used+a})})}},{key:"uploadFiles",value:function(e,t){if(!this.enoughSpaceLeftToUpload(e.getState().spaceUsage,t.files))return e.dispatch(new Fe);if(t.files.length){e.dispatch(new I);var n=e.getState().activePage.folder.id||null;return this.uploads.start(t.files,{httpParams:{parentId:n},validator:this.validator}).pipe((0,y.b)(function(t){var r=[].concat(i(t.fileEntry.all_parents),[t.fileEntry]),o=r.filter(function(e){return e&&e.parent_id===n}),a=e.getState().activePage;a.folder&&a.folder.id===n&&e.dispatch(new E(o));var s=r.filter(function(e){return e&&"folder"===e.type});if(s.length){var c=[].concat(i(e.getState().flatFolders),i(s));e.patchState({flatFolders:c}),e.dispatch(new x)}}))}}},{key:"deleteTrashedEntriesForever",value:function(e){var t=this.store.selectSnapshot(l.selectedEntries),n=t.map(function(e){return e.id}),i=e.getState().entries.filter(function(e){return-1===n.indexOf(e.id)});return this.entriesApi.delete({entryIds:n,deleteForever:!0}).pipe((0,y.b)(function(){return e.patchState({entries:i,selectedEntries:[]}),e.dispatch([new Ee(t),new Me])}))}},{key:"restoreTrashedEntries",value:function(e,t){var n,r=this.store.selectSnapshot(l.activePage),o=t.entries||this.store.selectSnapshot(l.selectedEntries),a=o.map(function(e){return e.id});return n=r.name===ce.name?e.getState().entries.filter(function(e){return-1===a.indexOf(e.id)}):[].concat(i(e.getState().entries),i(t.entries)),this.entriesApi.restore({entryIds:a}).pipe((0,y.b)(function(){return e.patchState({entries:n,selectedEntries:[]}),e.dispatch(new Pe(o))}))}},{key:"emptyTrash",value:function(e){return e.dispatch(new W(qe.emptyTrash)),this.entriesApi.emptyTrash().pipe((0,b.x)(function(){return e.dispatch(new X)}),(0,y.b)(function(){return e.patchState({entries:[],selectedEntries:[]}),e.dispatch(new Me)}))}},{key:"addStar",value:function(e,t){var n=e.getState(),i=t.entries.map(function(e){return e.id});return this.entriesApi.addStar(i).pipe((0,y.b)(function(t){var r=n.entries.map(function(e){return i.indexOf(e.id)>-1&&(e.tags||(e.tags=[]),e.tags.push(t.tag)),e}),o=n.selectedEntries.map(function(e){return e.tags.push(t.tag),e});e.patchState({entries:r,selectedEntries:o})}))}},{key:"removeStar",value:function(e,t){var n=this,i=e.getState(),r=t.entries.map(function(e){return e.id});return this.entriesApi.removeStar(r).pipe((0,y.b)(function(t){var o=i.entries.map(function(e){return r.indexOf(e.id)>-1&&n.removeTag(e,t.tag),e}),a=i.selectedEntries.map(function(e){return n.removeTag(e,t.tag)});e.patchState({entries:o,selectedEntries:a})}))}},{key:"removeEntries",value:function(e,t){var n=t.entries.map(function(e){return e.id}),i=e.getState().entries.filter(function(e){return-1===n.indexOf(e.id)});e.patchState({entries:i}),this.toast.open({message:"Removed :count items.",replacements:{count:n.length}})}},{key:"copySelectedEntries",value:function(e){var t=this,n=this.store.selectSnapshot(l.selectedEntries),i=n.map(function(e){return e.id}),r=n.filter(function(e){return"folder"===e.type}),o=e.getState();return this.enoughSpaceLeftToUpload(e.getState().spaceUsage,n)?(e.dispatch(new W(qe.copyEntries)),this.entriesApi.copy({entryIds:i}).pipe((0,b.x)(function(){return e.dispatch(new X)}),(0,y.b)(function(n){var a={};e.getState().activePage.folder&&(a.entries=o.entries.concat(n.entries)),r.length&&(a.flatFolders=Object.assign({},o.flatFolders),n.entries.filter(function(e){return"folder"===e.type}).forEach(function(e){return a.flatFolders.push(e)})),e.patchState(a),e.dispatch(new Me),r.length&&e.dispatch(new x);var s=t.store.selectSnapshot(l.activePage);t.toast.open({message:"Copied :count file(s) into :location.",replacements:{count:i.length,location:"shares"===s.name?"".concat(t.workspaces.activeWorkspace$.value.name," workspace"):s.folder.name}})}))):e.dispatch(new Fe)}},{key:"openUploadWindow",value:function(e,t){var n=Object.assign(Object.assign({},this.uploadInputConfig),{directory:"directory"===t.type});(0,Le.r)(n).then(function(t){t&&t.length&&e.dispatch(new q(t))})}},{key:"loadUserSpaceUsage",value:function(e){return this.entriesApi.getSpaceUsage().pipe((0,y.b)(function(t){e.patchState({spaceUsage:{used:t.used,available:t.available}})}))}},{key:"updateEntries",value:function(e,t){var n=e.getState().entries.slice(),i=e.getState().selectedEntries.slice();t.entries.forEach(function(e){var t=n.findIndex(function(t){return e.id===t.id});n[t]=Object.assign(Object.assign({},n[t]),e);var r=i.findIndex(function(t){return e.id===t.id});r>-1&&(i[r]=Object.assign(Object.assign({},i[r]),e))}),e.patchState({entries:n,selectedEntries:i})}},{key:"updateEntryDescription",value:function(e,t){var n=t.entry,i=t.description;return this.entriesApi.update(n.id,{description:i}).pipe((0,y.b)(function(t){e.dispatch(new ee([t.fileEntry]))}))}},{key:"breakpointChanged",value:function(e,t){e.patchState({isMobile:t.status.isMobile,sidebarOpen:!t.status.isMobile,detailsVisible:!t.status.isMobile})}},{key:"setCurrentUser",value:function(e,t){e.patchState({currentUser:t.user})}},{key:"setWorkspace",value:function(e,t){e.patchState({activeWorkspace:t.workspace})}},{key:"resetState",value:function(e){e.setState(Object.assign(Object.assign({},De),{viewMode:e.getState().viewMode}))}},{key:"transformQueryParams",value:function(e){var t=this.store.selectSnapshot(l.activePage),n=this.store.selectSnapshot(l.meta),i=Object.assign({orderBy:n.sortColumn,orderDir:n.sortDirection},e);return"folder"===t.name&&(i.folderId=t.folderHash),n.query&&(i.query=n.query),n.filters&&(i.filters=n.filters),i}},{key:"enoughSpaceLeftToUpload",value:function(e,t){return t.reduce(function(e,t){return e+((0,$e.w)("size",t)?t.size:t.file_size)},0)+e.used<e.available}},{key:"removeTag",value:function(e,t){return e.tags=e.tags.filter(function(e){return e.id!==t.id}),e}}],[{key:"flatFolders",value:function(e){return e.flatFolders}},{key:"userFoldersLoaded",value:function(e){return e.userFoldersLoaded}},{key:"activePage",value:function(e){return e.activePage}},{key:"activePageName",value:function(e){return e.activePage.name}},{key:"userFolders",value:function(e){return e.folderTree}},{key:"selectedEntries",value:function(e){return e.selectedEntries}},{key:"selectedEntryIds",value:function(e,t){return t.map(function(e){return e.id})}},{key:"selectedEntry",value:function(e,t){return t?t[t.length-1]:null}},{key:"selectedEntryOrActiveFolder",value:function(e,t){return t||e.activePage.folder}},{key:"selectedEntryParent",value:function(e,t,n){return t&&n&&t.parent_id?n.find(function(e){return e.id===t.parent_id}):e.rootFolder}},{key:"anythingSelected",value:function(e,t){return t.length>0}},{key:"allSelectedEntriesStarred",value:function(e,t){return t.every(function(e){return!!e.tags.find(function(e){return"starred"===e.name})})}},{key:"onlyFoldersSelected",value:function(e,t){return t.every(function(e){return"folder"===e.type})}},{key:"entries",value:function(e){return e.entries}},{key:"entriesEmpty",value:function(e){return e.meta.currentPage&&!e.loading&&0===e.entries.length}},{key:"multipleEntriesSelected",value:function(e,t){return t.length>1}},{key:"activeFolder",value:function(e){return e.activePage.folder}},{key:"rootFolder",value:function(e){return e.rootFolder}},{key:"meta",value:function(e){return e.meta}},{key:"dragging",value:function(e){return e.dragging}},{key:"loading",value:function(e){return e.loading}},{key:"currentPage",value:function(e){return e.meta.currentPage}},{key:"viewMode",value:function(e){return e.viewMode}},{key:"detailsOpen",value:function(e){return e.detailsVisible}},{key:"sidebarOpen",value:function(e){return e.sidebarOpen}},{key:"sortColumn",value:function(e){return e.meta.sortColumn}},{key:"sortDirection",value:function(e){return e.meta.sortDirection}},{key:"canLoadMoreEntries",value:function(e){return e.meta.currentPage<e.meta.lastPage}},{key:"userSpaceUsed",value:function(e){return e.spaceUsage.used}},{key:"userSpaceAvailable",value:function(e){return e.spaceUsage.available}},{key:"spaceUsedPercent",value:function(e,t,n){return null===n?0:100*t/n}},{key:"isMobile",value:function(e){return e.isMobile}},{key:"userHasPermission",value:function(e,t,n){if(!t||!n)return!1;var i=t.users.find(function(e){return e.id===n.id});return!(!i.owns_entry&&!i.entry_permissions[e])||void 0}},{key:"currentUser",value:function(e){return e.currentUser}},{key:"activeWorkspace",value:function(e){return e.activeWorkspace}},{key:"userOwnsActiveFolder",value:function(e,t,n){return l.userHasPermission("owner",t,n)}},{key:"userOwnsSelectedEntries",value:function(e,t,n){return t.every(function(e){return l.userHasPermission("owner",e,n)})}},{key:"userCanEditSelectedEntries",value:function(e,t,n){return t.every(function(e){var t=e.users.find(function(e){return e.id===n.id});return t&&(t.owns_entry||t.entry_permissions.edit)})}},{key:"canUpload",value:function(e,t,n,i){if(!t.folder||!n||!i)return!1;if((null==i?void 0:i.id)&&t.folder.workspace_id===i.id){var r=i.currentUser;return r&&(r.is_owner||r.permissions.findIndex(function(e){return"files.create"===e.name})>-1)}return l.userHasPermission("edit",t.folder,n)}},{key:"canMoveEntriesTo",value:function(e,t){return(!t||"folder"===t.type)&&e.every(function(e){return!((null==t?void 0:t.id)===e.parent_id||t&&t.path.startsWith(e.path))})}}]),e}();it.\u0275fac=function(e){return new(e||it)(g.LFG(je),g.LFG(Qe),g.LFG(p.F0),g.LFG(Je),g.LFG(Ve.A),g.LFG(m.yh),g.LFG(ze.m),g.LFG(et),g.LFG(tt.b),g.LFG(nt.F),g.LFG(Ne))},it.\u0275prov=g.Yz7({token:it,factory:it.\u0275fac}),(0,v.gn)([(0,m.aU)(k)],it.prototype,"loadUserFolders",null),(0,v.gn)([(0,m.aU)(x)],it.prototype,"buildFolderTree",null),(0,v.gn)([(0,m.aU)(ge)],it.prototype,"workspacesIndexPageOpened",null),(0,v.gn)([(0,m.aU)(he),(0,m.aU)(pe),(0,m.aU)(ve),(0,m.aU)(ye),(0,m.aU)(me,{cancelUncompleted:!0}),(0,m.aU)(fe),(0,m.aU)(z),(0,m.aU)(V)],it.prototype,"loadDriveEntries",null),(0,v.gn)([(0,m.aU)(_,{cancelUncompleted:!0})],it.prototype,"openFolder",null),(0,v.gn)([(0,m.aU)(C,{cancelUncompleted:!0})],it.prototype,"openSearchPage",null),(0,v.gn)([(0,m.aU)(be),(0,m.aU)(ke),(0,m.aU)(A)],it.prototype,"selectEntries",null),(0,v.gn)([(0,m.aU)(O)],it.prototype,"deselectAllEntries",null),(0,v.gn)([(0,m.aU)(Z)],it.prototype,"SelectAllEntries",null),(0,v.gn)([(0,m.aU)(we)],it.prototype,"entryTapped",null),(0,v.gn)([(0,m.aU)(xe)],it.prototype,"entryDoubleTapped",null),(0,v.gn)([(0,m.aU)(S)],it.prototype,"deleteSelectedEntries",null),(0,v.gn)([(0,m.aU)(Ce)],it.prototype,"fileContextMenuOpened",null),(0,v.gn)([(0,m.aU)(Ae)],it.prototype,"newFolderCreated",null),(0,v.gn)([(0,m.aU)(Ze)],it.prototype,"entryRenamed",null),(0,v.gn)([(0,m.aU)(Oe)],it.prototype,"startedDragging",null),(0,v.gn)([(0,m.aU)(Se)],it.prototype,"stoppedDragging",null),(0,v.gn)([(0,m.aU)(P)],it.prototype,"movieEntries",null),(0,v.gn)([(0,m.aU)(Ie)],it.prototype,"moveEntriesSuccess",null),(0,v.gn)([(0,m.aU)(U)],it.prototype,"setViewMode",null),(0,v.gn)([(0,m.aU)(D)],it.prototype,"toggleDetailsSidebar",null),(0,v.gn)([(0,m.aU)(L)],it.prototype,"toggleSidebar",null),(0,v.gn)([(0,m.aU)(E)],it.prototype,"addEntries",null),(0,v.gn)([(0,m.aU)(q)],it.prototype,"uploadFiles",null),(0,v.gn)([(0,m.aU)($)],it.prototype,"deleteTrashedEntriesForever",null),(0,v.gn)([(0,m.aU)(N)],it.prototype,"restoreTrashedEntries",null),(0,v.gn)([(0,m.aU)(B,{cancelUncompleted:!0})],it.prototype,"emptyTrash",null),(0,v.gn)([(0,m.aU)(j,{cancelUncompleted:!0})],it.prototype,"addStar",null),(0,v.gn)([(0,m.aU)(Q,{cancelUncompleted:!0})],it.prototype,"removeStar",null),(0,v.gn)([(0,m.aU)(J)],it.prototype,"removeEntries",null),(0,v.gn)([(0,m.aU)(H)],it.prototype,"copySelectedEntries",null),(0,v.gn)([(0,m.aU)(G)],it.prototype,"openUploadWindow",null),(0,v.gn)([(0,m.aU)(w),(0,m.aU)(Me)],it.prototype,"loadUserSpaceUsage",null),(0,v.gn)([(0,m.aU)(ee)],it.prototype,"updateEntries",null),(0,v.gn)([(0,m.aU)(ie)],it.prototype,"updateEntryDescription",null),(0,v.gn)([(0,m.aU)(Ue)],it.prototype,"breakpointChanged",null),(0,v.gn)([(0,m.aU)(te)],it.prototype,"setCurrentUser",null),(0,v.gn)([(0,m.aU)(ne)],it.prototype,"setWorkspace",null),(0,v.gn)([(0,m.aU)(K)],it.prototype,"resetState",null),(0,v.gn)([(0,m.Qf)()],it,"flatFolders",null),(0,v.gn)([(0,m.Qf)()],it,"userFoldersLoaded",null),(0,v.gn)([(0,m.Qf)()],it,"activePage",null),(0,v.gn)([(0,m.Qf)()],it,"activePageName",null),(0,v.gn)([(0,m.Qf)()],it,"userFolders",null),(0,v.gn)([(0,m.Qf)()],it,"selectedEntries",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"selectedEntryIds",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"selectedEntry",null),(0,v.gn)([(0,m.Qf)([l.selectedEntry])],it,"selectedEntryOrActiveFolder",null),(0,v.gn)([(0,m.Qf)([l.selectedEntryOrActiveFolder,l.flatFolders])],it,"selectedEntryParent",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"anythingSelected",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"allSelectedEntriesStarred",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"onlyFoldersSelected",null),(0,v.gn)([(0,m.Qf)()],it,"entries",null),(0,v.gn)([(0,m.Qf)()],it,"entriesEmpty",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries])],it,"multipleEntriesSelected",null),(0,v.gn)([(0,m.Qf)()],it,"activeFolder",null),(0,v.gn)([(0,m.Qf)()],it,"rootFolder",null),(0,v.gn)([(0,m.Qf)()],it,"meta",null),(0,v.gn)([(0,m.Qf)()],it,"dragging",null),(0,v.gn)([(0,m.Qf)()],it,"loading",null),(0,v.gn)([(0,m.Qf)()],it,"currentPage",null),(0,v.gn)([(0,m.Qf)()],it,"viewMode",null),(0,v.gn)([(0,m.Qf)()],it,"detailsOpen",null),(0,v.gn)([(0,m.Qf)()],it,"sidebarOpen",null),(0,v.gn)([(0,m.Qf)()],it,"sortColumn",null),(0,v.gn)([(0,m.Qf)()],it,"sortDirection",null),(0,v.gn)([(0,m.Qf)()],it,"canLoadMoreEntries",null),(0,v.gn)([(0,m.Qf)()],it,"userSpaceUsed",null),(0,v.gn)([(0,m.Qf)()],it,"userSpaceAvailable",null),(0,v.gn)([(0,m.Qf)([l.userSpaceUsed,l.userSpaceAvailable])],it,"spaceUsedPercent",null),(0,v.gn)([(0,m.Qf)()],it,"isMobile",null),(0,v.gn)([(0,m.Qf)()],it,"currentUser",null),(0,v.gn)([(0,m.Qf)()],it,"activeWorkspace",null),(0,v.gn)([(0,m.Qf)([l.activeFolder,l.currentUser])],it,"userOwnsActiveFolder",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries,l.currentUser])],it,"userOwnsSelectedEntries",null),(0,v.gn)([(0,m.Qf)([l.selectedEntries,l.currentUser])],it,"userCanEditSelectedEntries",null),(0,v.gn)([(0,m.Qf)([l.activePage,l.currentUser,l.activeWorkspace])],it,"canUpload",null),it=l=(0,v.gn)([(0,m.ZM)({name:"drive",defaults:De})],it);var rt=["audio","video","text","pdf","archive","folder","shared-folder","image","powerPoint","word","spreadsheet"],ot=a(35566),at=a(76627),st=function(){var e=function(){function e(){f(this,e)}return s(e,[{key:"ngOnChanges",value:function(){!this.type&&this.mime&&(this.type=this.mime.split("/")[0]),rt.includes(this.type)||(this.type="default")}},{key:"getType",value:function(){return(0,ot.f)(this.type).replace("_","-")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["file-icon"]],inputs:{type:"type",mime:"mime"},features:[g.TTD],decls:1,vars:2,consts:[[1,"file-color",3,"svgIcon","ngClass"]],template:function(e,t){1&e&&g._UZ(0,"mat-icon",0),2&e&&g.Q6J("svgIcon",t.getType()+"-file-custom")("ngClass",t.getType()+"-file")},directives:[at.Hw,d.mk],styles:["file-icon{display:inline-block;flex-shrink:0;width:24px;height:24px}file-icon .mat-icon{width:100%;height:100%}"],encapsulation:2,changeDetection:0}),e}();function ct(e,t){if(1&e&&(g.TgZ(0,"div",4),g._uU(1),g.qZA()),2&e){var n=g.oxw(2).ngIf;g.xp6(1),g.Oqu(n.length)}}function lt(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"file-icon",1),g.TgZ(2,"div",2),g._uU(3),g.qZA(),g.YNc(4,ct,2,1,"div",3),g.BQk()),2&e){var n=g.oxw().ngIf;g.xp6(1),g.Q6J("type",n[0].type),g.xp6(2),g.Oqu(n[0].name),g.xp6(1),g.Q6J("ngIf",n.length>1)}}function ut(e,t){if(1&e&&(g.ynx(0),g.YNc(1,lt,5,3,"ng-container",0),g.BQk()),2&e){var n=t.ngIf;g.xp6(1),g.Q6J("ngIf",n[0])}}var dt=function(){function e(t){f(this,e),this.store=t,this.className="files-grid-item-footer"}return s(e,[{key:"dragging",get:function(){return!this.store.selectSnapshot(it.dragging)}}]),e}();dt.\u0275fac=function(e){return new(e||dt)(g.Y36(m.yh))},dt.\u0275cmp=g.Xpm({type:dt,selectors:[["entry-drag-preview"]],hostVars:4,hostBindings:function(e,t){2&e&&(g.Tol(t.className),g.ekj("hidden",t.dragging))},decls:2,vars:3,consts:[[4,"ngIf"],[3,"type"],[1,"text"],["class","selected-entry-count",4,"ngIf"],[1,"selected-entry-count"]],template:function(e,t){1&e&&(g.YNc(0,ut,2,1,"ng-container",0),g.ALo(1,"async")),2&e&&g.Q6J("ngIf",g.lcZ(1,1,t.entries))},directives:[d.O5,st],pipes:[d.Ov],styles:["entry-drag-preview{position:fixed;top:0;left:0;z-index:10;background-color:var(--be-accent-emphasis);color:var(--be-accent-lighter);width:185px;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);pointer-events:none}entry-drag-preview .selected-entry-count{width:22px;height:22px;line-height:22px;text-align:center;font-weight:500;background-color:var(--be-accent-default);color:var(--be-accent-contrast);position:absolute;top:-7px;right:-7px;border-radius:50%;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.selectedEntries)],dt.prototype,"entries",void 0);var pt=a(13653),ht=a(45435),ft=a(79765),vt=a(26215),gt={edit:!0,view:!0,download:!0},mt=a(49977),yt=a.n(mt),bt=a(37524),kt=a.n(bt),wt=a(76394),xt=a.n(wt),_t=function(){var e=function(){function e(t){f(this,e),this.http=t}return s(e,[{key:"changePermissions",value:function(e,t,n){return this.http.put("drive/shares/change-permissions/".concat(e),{permissions:n,entryIds:t})}},{key:"shareEntries",value:function(e){return this.http.post("drive/shares/add-users",Object.assign(Object.assign({},e),{entryIds:e.entries.map(function(e){return e.id})}))}},{key:"detachUser",value:function(e,t){return this.http.post("drive/shares/remove-user/"+e,{entryIds:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(Re.r))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ct=function(){var e=function e(){f(this,e)};return e.type="[ShareDialog] Set Initial Users",e}(),At=function(){var e=function e(t,n){f(this,e),this.user=t,this.permissions=n};return e.type="[ShareDialog] Update User Permissions",e}(),Zt=function(){var e=function e(t){f(this,e),this.user=t};return e.type="[ShareDialog] Remove User",e}(),Ot=function(){var e=function e(t){f(this,e),this.users=t};return e.type="[ShareDialog] Set Users",e}(),St=function(){var e=function e(){f(this,e)};return e.type="[ShareDialog] Reset",e}(),It=function(){var e=function e(t){f(this,e),this.payload=t};return e.type="[ShareDialog] Share Entries",e}(),Tt=function(){var e=function e(t){f(this,e),this.messages=t};return e.type="[ShareDialog] Share Entries Failed",e}(),Et=function(){function e(t,n){f(this,e),this.store=t,this.sharesApi=n}return s(e,[{key:"setInitialUsers",value:function(e){var t=this.store.selectSnapshot(it.selectedEntries),n=t.map(function(e){return e.users}).reduce(function(e,t){return e.concat(t)},[]);n=(n=kt()(n)).filter(function(e){return!!e});var i=xt()(n,function(e){return e.id});t.length>1&&i.forEach(function(e){var n=t.map(function(t){return t.users.find(function(t){return t.id===e.id})}).filter(function(e){return!!e}).map(function(e){return Object.assign({},e.entry_permissions)});(t.length!==n.length||n.some(function(e){return!yt()(e,n[0])}))&&(e.entry_permissions={varies:!0})}),e.patchState({usersWithAccess:kt()(i),original:i})}},{key:"setUsers",value:function(e,t){e.patchState({usersWithAccess:t.users,original:kt()(t.users)})}},{key:"updateUserPermissions",value:function(e,t){var n=this;this.toggleUserLoading(e,t.user.id,!0);var i=this.store.selectSnapshot(it.selectedEntries).map(function(e){return e.id});return this.sharesApi.changePermissions(t.user.id,i,t.permissions).pipe((0,b.x)(function(){return n.toggleUserLoading(e,t.user.id,!1)}),(0,y.b)(function(t){return n.updateUsers(e,t.users)}))}},{key:"removeUser",value:function(e,t){var n=this;return this.toggleUserLoading(e,t.user.id,!0),this.sharesApi.detachUser(t.user.id,this.store.selectSnapshot(it.selectedEntries).map(function(e){return e.id})).pipe((0,b.x)(function(){return n.toggleUserLoading(e,t.user.id,!1)}),(0,y.b)(function(t){return n.updateUsers(e,t.users)}))}},{key:"resetState",value:function(e){e.setState({loading:!1,usersWithAccess:[],original:[],loadingUsers:[]})}},{key:"shareEntries",value:function(e,t){var n=this;e.patchState({loading:!0});var i=Object.assign(Object.assign({},t.payload),{entries:this.store.selectSnapshot(it.selectedEntries)});return this.sharesApi.shareEntries(i).pipe((0,b.x)(function(){return e.patchState({loading:!1})}),(0,y.b)(function(t){e.dispatch(new Ot(t.users)),n.updateEntriesInDriveStore(t.users)},function(t){e.dispatch(new Tt(t.errors))}))}},{key:"toggleUserLoading",value:function(e,t,n){e.patchState(n?{loadingUsers:[].concat(i(e.getState().loadingUsers),[t])}:{loadingUsers:e.getState().loadingUsers.filter(function(e){return e!==t})})}},{key:"updateUsers",value:function(e,t){e.patchState({usersWithAccess:t,original:kt()(t)}),this.updateEntriesInDriveStore(t)}},{key:"updateEntriesInDriveStore",value:function(e){var t=this.store.selectSnapshot(it.selectedEntries).map(function(t){return t.users=e,t});this.store.dispatch(new ee(t))}}],[{key:"usersWithAccess",value:function(e){return e.usersWithAccess}},{key:"dirty",value:function(e){return!yt()(e.original,e.usersWithAccess)}},{key:"loading",value:function(e){return e.loading}},{key:"loadingUsers",value:function(e){return e.loadingUsers}}]),e}();Et.\u0275fac=function(e){return new(e||Et)(g.LFG(m.yh),g.LFG(_t))},Et.\u0275prov=g.Yz7({token:Et,factory:Et.\u0275fac}),(0,v.gn)([(0,m.aU)(Ct)],Et.prototype,"setInitialUsers",null),(0,v.gn)([(0,m.aU)(Ot)],Et.prototype,"setUsers",null),(0,v.gn)([(0,m.aU)(At)],Et.prototype,"updateUserPermissions",null),(0,v.gn)([(0,m.aU)(Zt)],Et.prototype,"removeUser",null),(0,v.gn)([(0,m.aU)(St)],Et.prototype,"resetState",null),(0,v.gn)([(0,m.aU)(It,{cancelUncompleted:!0})],Et.prototype,"shareEntries",null),(0,v.gn)([(0,m.Qf)()],Et,"usersWithAccess",null),(0,v.gn)([(0,m.Qf)()],Et,"dirty",null),(0,v.gn)([(0,m.Qf)()],Et,"loading",null),(0,v.gn)([(0,m.Qf)()],Et,"loadingUsers",null),Et=(0,v.gn)([(0,m.ZM)({name:"shareDialog",defaults:{usersWithAccess:[],original:[],loading:!1,loadingUsers:[]}})],Et);var Pt=a(3679),Ft=a(88002),Mt=a(46782),Ut=a(22238),Dt=a(34673),Lt=a(73429),qt=a(15515),Nt=a(51095),$t=a(44666),Bt=a(33935);function Rt(e,t){1&e&&(g.ynx(0),g._UZ(1,"mat-icon",9),g.TgZ(2,"span",10),g._uU(3,"Varies"),g.qZA(),g.BQk())}function Yt(e,t){1&e&&(g.ynx(0),g._UZ(1,"mat-icon",11),g.TgZ(2,"span",10),g._uU(3,"Can edit"),g.qZA(),g.BQk())}function jt(e,t){1&e&&(g.ynx(0),g._UZ(1,"mat-icon",12),g.TgZ(2,"span",10),g._uU(3,"Can View"),g.qZA(),g.BQk())}function Qt(e,t){1&e&&(g.ynx(0),g._UZ(1,"mat-icon",13),g.TgZ(2,"span",10),g._uU(3,"Can Download"),g.qZA(),g.BQk())}var Jt=function(){function e(t,n,i){f(this,e),this.store=t,this.api=n,this.toast=i,this.permissions=gt,this.change=new g.vpe,this.compact=!1}return s(e,[{key:"overallPermission",value:function(){return this.permissions.varies?"varies":this.permissions.edit?"edit":this.permissions.download?"download":"view"}},{key:"selectPermission",value:function(e){this.permissions="edit"===e?Object.assign({},gt):Object.assign(Object.assign({},gt),"download"===e?{edit:!1}:{edit:!1,download:!1}),this.user?this.updateUserPermissions(this.permissions):this.change.emit(this.permissions)}},{key:"updateUserPermissions",value:function(e){var t=this;this.store.dispatch(new At(this.user,e)).subscribe(function(){t.toast.open("Changed permissions.")})}}]),e}();Jt.\u0275fac=function(e){return new(e||Jt)(g.Y36(m.yh),g.Y36(_t),g.Y36(nt.F))},Jt.\u0275cmp=g.Xpm({type:Jt,selectors:[["sharing-permissions-button"]],hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("compact",t.compact)},inputs:{permissions:"permissions",user:"user",compact:"compact"},outputs:{change:"change"},decls:30,vars:14,consts:[["mat-flat-button","","color","gray",3,"matMenuTriggerFor","disabled"],[4,"ngIf"],["svgIcon","arrow-drop-down",1,"dropdown-icon"],["classList","mat-menu-with-description"],["shareMenu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","check",1,"mat-icon"],["trans",""],["trans","",1,"description"],["svgIcon","priority-high",1,"button-icon"],["trans","",1,"button-text"],["svgIcon","edit",1,"button-icon"],["svgIcon","remove-red-eye",1,"button-icon"],["svgIcon","file-download",1,"button-icon"]],template:function(e,t){if(1&e&&(g.TgZ(0,"button",0),g.ALo(1,"async"),g.YNc(2,Rt,4,0,"ng-container",1),g.YNc(3,Yt,4,0,"ng-container",1),g.YNc(4,jt,4,0,"ng-container",1),g.YNc(5,Qt,4,0,"ng-container",1),g._UZ(6,"mat-icon",2),g.qZA(),g.TgZ(7,"mat-menu",3,4),g.TgZ(9,"div",5),g.NdJ("click",function(){return t.selectPermission("edit")}),g._UZ(10,"mat-icon",6),g.TgZ(11,"div"),g.TgZ(12,"div",7),g._uU(13,"Can edit"),g.qZA(),g.TgZ(14,"div",8),g._uU(15,"People can edit, delete and copy the item to their own drive."),g.qZA(),g.qZA(),g.qZA(),g.TgZ(16,"div",5),g.NdJ("click",function(){return t.selectPermission("download")}),g._UZ(17,"mat-icon",6),g.TgZ(18,"div"),g.TgZ(19,"div",7),g._uU(20,"Can download"),g.qZA(),g.TgZ(21,"div",8),g._uU(22,"People can view and download the item."),g.qZA(),g.qZA(),g.qZA(),g.TgZ(23,"div",5),g.NdJ("click",function(){return t.selectPermission("view")}),g._UZ(24,"mat-icon",6),g.TgZ(25,"div"),g.TgZ(26,"div",7),g._uU(27,"Can view"),g.qZA(),g.TgZ(28,"div",8),g._uU(29,"People can view the item."),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=g.MAs(8);g.Q6J("matMenuTriggerFor",n)("disabled",g.lcZ(1,12,t.loadingUsers$).includes(null==t.user?null:t.user.id)),g.xp6(2),g.Q6J("ngIf","varies"===t.overallPermission()),g.xp6(1),g.Q6J("ngIf","edit"===t.overallPermission()),g.xp6(1),g.Q6J("ngIf","view"===t.overallPermission()),g.xp6(1),g.Q6J("ngIf","download"===t.overallPermission()),g.xp6(5),g.ekj("visually-hidden","edit"!==t.overallPermission()),g.xp6(7),g.ekj("visually-hidden","download"!==t.overallPermission()),g.xp6(7),g.ekj("visually-hidden","view"!==t.overallPermission())}},directives:[Nt.lW,Bt.p6,d.O5,at.Hw,Bt.VK,Bt.OP,qt.P],pipes:[d.Ov],styles:[".mat-menu-with-description .mat-menu-item{display:flex;height:auto;min-height:48px;line-height:normal;white-space:normal;padding:10px 16px;font-size:1.5rem}.mat-menu-with-description .mat-menu-item .mat-icon{flex:0 0 24px}.mat-menu-with-description .mat-menu-item .description{font-size:1.4rem;color:var(--be-secondary-text);margin-top:3px}sharing-permissions-button{display:inline-block}sharing-permissions-button.compact .button-text{display:none}sharing-permissions-button .dropdown-icon,sharing-permissions-button:not(.compact) .button-icon{width:18px;height:18px;line-height:18px}sharing-permissions-button:not(.compact) .button-icon{margin-right:5px}sharing-permissions-button .button-text{font-size:1.3rem}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(Et.loadingUsers)],Jt.prototype,"loadingUsers$",void 0);var Vt=a(17238),zt=a(43190),Ht=a(63297),Gt=function(e){return{workspace:e}};function Wt(e,t){if(1&e&&(g.TgZ(0,"div",4),g._UZ(1,"mat-icon",5),g.TgZ(2,"div",6),g.TgZ(3,"div",7),g._uU(4,'Everyone at ":workspace" workspace'),g.qZA(),g.TgZ(5,"div",8),g._uU(6),g.ALo(7,"trans"),g.qZA(),g.qZA(),g.qZA()),2&e){var n=t.ngIf;g.xp6(3),g.Q6J("transValues",g.VKq(5,Gt,n.name)),g.xp6(3),g.AsE("",n.members_count," ",g.lcZ(7,3,"members"),"")}}function Xt(e,t){if(1&e&&(g.TgZ(0,"span",14),g._uU(1),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.hij(" ",n.owns_entry?"Owner":"You"," ")}}function Kt(e,t){if(1&e){var n=g.EpF();g._UZ(0,"sharing-permissions-button",15),g.TgZ(1,"button",16),g.NdJ("click",function(){g.CHM(n);var e=g.oxw().$implicit;return g.oxw().removeUser(e)}),g.ALo(2,"async"),g._UZ(3,"mat-icon",17),g.qZA()}if(2&e){var i=g.oxw().$implicit,r=g.oxw();g.Q6J("permissions",i.entry_permissions)("user",i),g.xp6(1),g.Q6J("disabled",g.lcZ(2,3,r.loadingUsers$).includes(i.id))}}function en(e,t){if(1&e&&(g.TgZ(0,"div",4),g._UZ(1,"img",9),g.TgZ(2,"div",6),g.TgZ(3,"div",10),g._uU(4),g.qZA(),g.TgZ(5,"div",8),g._uU(6),g.qZA(),g.qZA(),g.TgZ(7,"div",11),g.YNc(8,Xt,2,1,"span",12),g.YNc(9,Kt,4,5,"ng-template",null,13,g.W1O),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.MAs(10),r=g.oxw();g.ekj("removed",n.removed),g.Q6J("@flyInOut","in"),g.xp6(1),g.Q6J("src",n.avatar,g.LSH),g.xp6(3),g.Oqu(n.display_name),g.xp6(2),g.Oqu(n.email),g.xp6(2),g.Q6J("ngIf",n.owns_entry||r.currentUser.getModel().id===n.id)("ngIfElse",i)}}var tn=function(){function e(t,n,i){var r=this;f(this,e),this.store=t,this.currentUser=n,this.workspaces=i,this.activeWorkspace$=this.store.select(it.selectedEntries).pipe((0,Ft.U)(function(e){return e.every(function(e){return e.workspace_id})}),(0,ht.h)(function(e){return!!e}),(0,zt.w)(function(){return r.workspaces.activeWorkspace$}))}return s(e,[{key:"removeUser",value:function(e){this.store.dispatch(new Zt(e))}},{key:"trackByUser",value:function(e,t){return t.id}}]),e}();function nn(e,t){if(1&e&&(g.TgZ(0,"div",11),g._uU(1),g.qZA()),2&e){var n=t.$implicit;g.xp6(1),g.Oqu(n.value)}}function rn(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",12),g.NdJ("click",function(){return g.CHM(n),g.oxw().share()}),g.ALo(1,"async"),g._uU(2,"Share"),g.qZA()}if(2&e){var i=g.oxw();g.Q6J("disabled",g.lcZ(1,1,i.loading$))}}tn.\u0275fac=function(e){return new(e||tn)(g.Y36(m.yh),g.Y36(Ye.I),g.Y36(tt.b))},tn.\u0275cmp=g.Xpm({type:tn,selectors:[["entries-access-table"]],decls:7,vars:7,consts:[["trans","",1,"header"],[1,"users-list"],["class","list-item",4,"ngIf"],["class","list-item",3,"removed",4,"ngFor","ngForOf","ngForTrackBy"],[1,"list-item"],["svgIcon","groups",1,"list-item-img"],[1,"text"],["trans","",1,"display_name",3,"transValues"],[1,"email"],["alt","",1,"list-item-img",3,"src"],[1,"display_name"],[1,"actions"],["class","owner-label","trans","",4,"ngIf","ngIfElse"],["permissionSelector",""],["trans","",1,"owner-label"],[3,"permissions","user"],["mat-icon-button","",3,"disabled","click"],["svgIcon","close"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._uU(1,"Who has access"),g.qZA(),g.TgZ(2,"div",1),g.YNc(3,Wt,8,7,"div",2),g.ALo(4,"async"),g.YNc(5,en,11,8,"div",3),g.ALo(6,"async"),g.qZA()),2&e&&(g.xp6(3),g.Q6J("ngIf",g.lcZ(4,3,t.activeWorkspace$)),g.xp6(2),g.Q6J("ngForOf",g.lcZ(6,5,t.users))("ngForTrackBy",t.trackByUser))},directives:[qt.P,d.O5,d.sg,at.Hw,Jt,Nt.lW],pipes:[d.Ov,Ht.R],styles:["entries-access-table{display:block;margin-top:25px}entries-access-table .users-list{overflow-x:hidden}entries-access-table .users-list .list-item{display:flex;align-items:center;padding:12px 0;border-bottom:1px solid var(--be-divider-default)}entries-access-table .users-list .display_name{text-transform:capitalize}entries-access-table .users-list .email{color:var(--be-secondary-text)}entries-access-table .users-list .actions{margin-left:auto;padding-right:5px}entries-access-table .users-list .actions button{color:var(--be-secondary-text)}entries-access-table .list-item-img{width:30px;height:30px;flex:0 0 30px;margin-right:15px;color:var(--be-secondary-text)}"],encapsulation:2,data:{animation:[(0,Vt.X$)("flyInOut",[(0,Vt.SB)("in",(0,Vt.oB)({transform:"translateX(0)"})),(0,Vt.eR)("void => *",[(0,Vt.oB)({transform:"translateX(-100%)"}),(0,Vt.jt)(100)]),(0,Vt.eR)("* => void",[(0,Vt.jt)(100,(0,Vt.oB)({transform:"translateX(100%)"}))])])]},changeDetection:0}),(0,v.gn)([(0,m.Ph)(Et.usersWithAccess)],tn.prototype,"users",void 0),(0,v.gn)([(0,m.Ph)(Et.loadingUsers)],tn.prototype,"loadingUsers$",void 0);var on=function(){function e(t,n,i,r,o){var a=this;f(this,e),this.dialogRef=t,this.settings=n,this.store=i,this.actions$=r,this.users=o,this.destroyed$=new ft.xQ,this.errors=new vt.X({}),this.suggestUserEmails=function(e){return a.users.getAll({query:e,perPage:7}).pipe((0,Ft.U)(function(e){return e.map(function(e){return e.email})}))},this.resetModel(),this.store.dispatch(new Ct),this.bindToShareError(),this.bindToShareModel()}return s(e,[{key:"ngOnDestroy",value:function(){this.store.dispatch(new St),this.destroyed$.next(),this.destroyed$.complete()}},{key:"share",value:function(){var e=this;this.store.dispatch(new It({emails:this.shareModel.emails.value,permissions:this.shareModel.permissions})).subscribe(function(){e.setErrorMessages(),e.resetModel()})}},{key:"resetModel",value:function(){this.shareModel={emails:new Pt.NI([]),permissions:gt}}},{key:"setErrorMessages",value:function(e){this.errors.next(e||{})}},{key:"bindToShareModel",value:function(){var e=this;this.shareModel.emails.valueChanges.pipe((0,Mt.R)(this.destroyed$)).subscribe(function(){return e.setErrorMessages()})}},{key:"bindToShareError",value:function(){var e=this;this.actions$.pipe((0,Mt.R)(this.destroyed$),(0,m.xt)(Tt)).subscribe(function(t){e.setErrorMessages(t.messages)})}}]),e}();on.\u0275fac=function(e){return new(e||on)(g.Y36(Ut.so),g.Y36(Dt.Z),g.Y36(m.yh),g.Y36(m.eX),g.Y36(Lt.Q))},on.\u0275cmp=g.Xpm({type:on,selectors:[["share-dialog"]],decls:19,vars:13,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[1,"emails-container"],["placeholder","Enter email addresses...","email","","required","",3,"formControl","emailsInput","suggestFn"],[3,"compact","change"],[1,"errors"],["class","error",4,"ngFor","ngForOf"],["type","button","mat-button","","trans","",3,"disabled","click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click",4,"ngIf"],[1,"error"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Add people"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.dialogRef.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"mat-dialog-content"),g.TgZ(6,"div",4),g._UZ(7,"chip-input",5),g.TgZ(8,"sharing-permissions-button",6),g.NdJ("change",function(e){return t.shareModel.permissions=e}),g.qZA(),g.qZA(),g.TgZ(9,"div",7),g.YNc(10,nn,2,1,"div",8),g.ALo(11,"keyvalue"),g.ALo(12,"async"),g.qZA(),g._UZ(13,"entries-access-table"),g.qZA(),g.TgZ(14,"mat-dialog-actions"),g.TgZ(15,"button",9),g.NdJ("click",function(){return t.dialogRef.close()}),g.ALo(16,"async"),g._uU(17,"Close"),g.qZA(),g.YNc(18,rn,3,3,"button",10),g.qZA()),2&e&&(g.xp6(7),g.Q6J("formControl",t.shareModel.emails)("emailsInput",!0)("suggestFn",t.settings.get("share.suggest_emails")?t.suggestUserEmails:null),g.xp6(1),g.Q6J("compact",!0),g.xp6(2),g.Q6J("ngForOf",g.lcZ(11,7,g.lcZ(12,9,t.errors))),g.xp6(5),g.Q6J("disabled",g.lcZ(16,11,t.loading$)),g.xp6(3),g.Q6J("ngIf",null==t.shareModel.emails.value?null:t.shareModel.emails.value.length))},directives:[Ut.uh,qt.P,Nt.lW,at.Hw,Ut.xY,$t.S,Pt.on,Pt.Q7,Pt.JJ,Pt.oH,Jt,d.sg,tn,Ut.H8,d.O5],pipes:[d.Nd,d.Ov],styles:["share-dialog{display:block;width:500px;max-width:100%}share-dialog .emails-container{display:flex;min-height:54px}share-dialog .emails-container chip-input{flex:1 1 auto;border-bottom-right-radius:0;border-top-right-radius:0}share-dialog .emails-container .mat-flat-button{height:54px;border:1px solid var(--be-divider-default);border-left:none;border-top-left-radius:0;border-bottom-left-radius:0}share-dialog .mat-tab-body{padding:15px 0}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(Et.loading)],on.prototype,"loading$",void 0);var an=function(){var e=function(){function e(t){f(this,e),this.http=t}return s(e,[{key:"findByEntryId",value:function(e,t){return this.http.get("drive/entries/".concat(e,"/shareable-link"),t)}},{key:"findByHash",value:function(e,t){return this.http.get("drive/shareable-links/".concat(e),t)}},{key:"create",value:function(e,t){return this.http.post("drive/entries/".concat(e,"/shareable-link"),t)}},{key:"update",value:function(e,t){return this.http.put("drive/shareable-links/".concat(e),t)}},{key:"delete",value:function(e){return this.http.delete("drive/shareable-links/".concat(e,")"))}},{key:"checkPassword",value:function(e,t){return this.http.post("drive/shareable-links/".concat(e,"/check-password"),{password:t})}},{key:"importEntry",value:function(e,t){return this.http.post("drive/shareable-links/".concat(e,"/import"),{password:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(Re.r))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),sn=function(){var e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this.options=t};return e.type="[Shareable Link] Load From Backend",e}(),cn=function(){var e=function e(t){f(this,e),this.options=t};return e.type="[Shareable Link] Update",e}(),ln=function(){var e=function e(t){f(this,e),this.options=t};return e.type="[Shareable Link] Create",e}(),un=function(){var e=function e(){f(this,e)};return e.type="[Shareable Link] Delete",e}(),dn=function(){var e=function e(){f(this,e)};return e.type="[Shareable Link] Toggle Options Panel Visibility",e}(),pn=function(){var e=function e(){f(this,e)};return e.type="[Shareable Link] Copy To Clipboard Success",e}(),hn=function(){var e=function e(){f(this,e)};return e.type="[Shareable Link] Reset State",e}(),fn={link:null,loading:!1,optionsPanelVisible:!0,backendErrors:{},cache:{},linkOptions:{allowDownload:!1,allowEdit:!1,expiresAt:null,password:null}},vn=function(){function e(t,n,i){f(this,e),this.store=t,this.settings=n,this.linksApi=i}return s(e,[{key:"createShareableLink",value:function(e,t){var i=this.store.selectSnapshot(it.selectedEntryIds)[0];return e.patchState({loading:!0}),this.linksApi.create(i,t.options).pipe((0,b.x)(function(){return e.patchState({loading:!1,backendErrors:{}})}),(0,y.b)(function(t){var i=t.link;e.patchState({cache:Object.assign(Object.assign({},e.getState().cache),n({},i.entry_id,i)),link:t.link,optionsPanelVisible:!1})},function(t){e.patchState({backendErrors:t.errors})}))}},{key:"updateLink",value:function(e,t){var i=e.getState().link;return e.patchState({loading:!0}),this.linksApi.update(i.id,t.options).pipe((0,b.x)(function(){return e.patchState({loading:!1,backendErrors:{}})}),(0,y.b)(function(t){return e.patchState({link:t.link,cache:Object.assign(Object.assign({},e.getState().cache),n({},i.entry_id,t.link)),optionsPanelVisible:!1})},function(t){e.patchState({backendErrors:t.errors})}))}},{key:"loadShareableLink",value:function(e,t){var i=this.store.selectSnapshot(it.selectedEntryIds)[0],r=e.getState().cache[i];return r?e.patchState({link:r,optionsPanelVisible:!1}):(e.patchState({loading:!0}),this.linksApi.findByEntryId(i,{autoCreate:t.options.autoCreate}).pipe((0,b.x)(function(){return e.patchState({loading:!1})}),(0,y.b)(function(t){return e.patchState({link:t.link,optionsPanelVisible:!1,cache:Object.assign(Object.assign({},e.getState().cache),n({},t.link.entry_id,t.link))})},function(){})))}},{key:"deleteShareableLink",value:function(e){var t=e.getState().link;return e.patchState({loading:!0}),this.linksApi.delete(t.id).pipe((0,b.x)(function(){return e.patchState({loading:!1})}),(0,y.b)(function(){var n=e.getState().cache;delete n[t.entry_id],e.patchState({link:null,cache:n})}))}},{key:"toggleOptionsPanel",value:function(e){e.patchState({optionsPanelVisible:!e.getState().optionsPanelVisible})}},{key:"resetShareLinkState",value:function(e){return e.patchState(Object.assign(Object.assign({},e.getState()),fn))}}],[{key:"loading",value:function(e){return e.loading}},{key:"link",value:function(e){return e.link}},{key:"optionsVisible",value:function(e){return!e.loading&&e.optionsPanelVisible}},{key:"backendErrors",value:function(e){return e.backendErrors}}]),e}();vn.\u0275fac=function(e){return new(e||vn)(g.LFG(m.yh),g.LFG(Dt.Z),g.LFG(an))},vn.\u0275prov=g.Yz7({token:vn,factory:vn.\u0275fac}),(0,v.gn)([(0,m.aU)(ln)],vn.prototype,"createShareableLink",null),(0,v.gn)([(0,m.aU)(cn)],vn.prototype,"updateLink",null),(0,v.gn)([(0,m.aU)(sn)],vn.prototype,"loadShareableLink",null),(0,v.gn)([(0,m.aU)(un)],vn.prototype,"deleteShareableLink",null),(0,v.gn)([(0,m.aU)(dn)],vn.prototype,"toggleOptionsPanel",null),(0,v.gn)([(0,m.aU)(hn,{cancelUncompleted:!0})],vn.prototype,"resetShareLinkState",null),(0,v.gn)([(0,m.Qf)()],vn,"loading",null),(0,v.gn)([(0,m.Qf)()],vn,"link",null),(0,v.gn)([(0,m.Qf)()],vn,"optionsVisible",null),(0,v.gn)([(0,m.Qf)()],vn,"backendErrors",null),vn=(0,v.gn)([(0,m.ZM)({name:"shareLink",defaults:fn})],vn);var gn=a(96967),mn=a.n(gn),yn=a(7539);function bn(e,t){if(1&e&&(g.TgZ(0,"div",16),g._uU(1),g.qZA()),2&e){var n=t.ngIf;g.xp6(1),g.Oqu(n)}}function kn(e,t){1&e&&(g.ynx(0),g.TgZ(1,"div",17),g._UZ(2,"input",18),g.qZA(),g.BQk())}var wn=function(){function e(t){f(this,e),this.store=t,this.form=new Pt.cw({password:new Pt.NI,expiresAt:new Pt.cw({date:new Pt.NI,time:new Pt.NI}),allowEdit:new Pt.NI(!1),allowDownload:new Pt.NI(!0)}),this.passwordVisible=new Pt.NI(!1),this.expirationVisible=new Pt.NI(!1)}return s(e,[{key:"ngOnInit",value:function(){this.bindToLinkChange()}},{key:"toggleOptionsPanel",value:function(){this.store.dispatch(new dn)}},{key:"saveChanges",value:function(){this.store.selectSnapshot(vn.link)?this.store.dispatch(new cn(this.getPayload())):this.store.dispatch(new ln(this.getPayload()))}},{key:"getPayload",value:function(){var e={allowEdit:this.form.get("allowEdit").value,allowDownload:this.form.get("allowDownload").value};return this.expirationVisible.value&&(e.expiresAt=this.form.get("expiresAt.date").value,this.form.get("expiresAt.time").value&&(e.expiresAt+=" "+this.form.get("expiresAt.time").value)),this.passwordVisible.value&&(e.password=this.form.get("password").value),e}},{key:"bindToLinkChange",value:function(){var e=this;this.link$.pipe((0,ht.h)(function(e){return!!e})).subscribe(function(t){e.hydrateExpirationForm(t),e.passwordVisible.setValue(!!t.password),e.expirationVisible.setValue(!!t.expires_at),e.form.patchValue({allowEdit:t.allow_edit,allowDownload:t.allow_download})})}},{key:"hydrateExpirationForm",value:function(e){if(e&&e.expires_at){var t=e.expires_at.split(/[ T]/);this.form.get("expiresAt").setValue({date:t[0],time:t[1]?t[1].substr(0,5):""})}}},{key:"getMinDate",value:function(){return(new Date).toJSON().split("T")[0]}}]),e}();wn.\u0275fac=function(e){return new(e||wn)(g.Y36(m.yh))},wn.\u0275cmp=g.Xpm({type:wn,selectors:[["link-options"]],decls:38,vars:18,consts:[[1,"update-link-panel",3,"formGroup","ngSubmit"],[1,"link-options"],[1,"link-option"],["trans","",1,"label"],[1,"content"],["color","accent","trans","",3,"formControl"],["formGroupName","expiresAt",1,"input-container","expiration-input-container"],[1,"date-input-container"],["type","date","formControlName","date","placeholder","Expiration date...","trans-placeholder","",1,"date-input",3,"min"],["type","time","formControlName","time","placeholder","Expiration time...","trans-placeholder","",1,"time-input"],["class","error",4,"ngIf"],[4,"ngIf"],["color","accent","formControlName","allowEdit","trans",""],["color","accent","formControlName","allowDownload","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"update-button",3,"disabled"],[1,"error"],[1,"input-container","password-input-container"],["type","password","formControlName","password","placeholder","Enter new password...","trans-placeholder",""]],template:function(e,t){var n;(1&e&&(g.TgZ(0,"form",0),g.NdJ("ngSubmit",function(){return t.saveChanges()}),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4,"Link expiration"),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"mat-checkbox",5),g._uU(7,"Link is valid until:"),g.qZA(),g.TgZ(8,"div",6),g.TgZ(9,"div",7),g._UZ(10,"input",8),g.qZA(),g._UZ(11,"input",9),g.qZA(),g.YNc(12,bn,2,1,"div",10),g.ALo(13,"async"),g.qZA(),g.qZA(),g.TgZ(14,"div",2),g.TgZ(15,"div",3),g._uU(16,"Password Protect"),g.qZA(),g.TgZ(17,"div",4),g.TgZ(18,"mat-checkbox",5),g._uU(19,"Require password:"),g.qZA(),g.YNc(20,kn,3,0,"ng-container",11),g.qZA(),g.qZA(),g.TgZ(21,"div",2),g.TgZ(22,"div",3),g._uU(23,"Allow editing"),g.qZA(),g.TgZ(24,"mat-checkbox",12),g._uU(25,"Users with link can modify this item."),g.qZA(),g.qZA(),g.TgZ(26,"div",2),g.TgZ(27,"div",3),g._uU(28,"Allow download"),g.qZA(),g.TgZ(29,"mat-checkbox",13),g._uU(30,"Users with link can download this item."),g.qZA(),g.qZA(),g.qZA(),g.TgZ(31,"button",14),g.NdJ("click",function(){return t.toggleOptionsPanel()}),g._uU(32,"Cancel"),g.qZA(),g.TgZ(33,"button",15),g.ALo(34,"async"),g._uU(35),g.ALo(36,"trans"),g.ALo(37,"async"),g.qZA(),g.qZA()),2&e)&&(g.Q6J("formGroup",t.form),g.xp6(6),g.Q6J("formControl",t.expirationVisible),g.xp6(2),g.ekj("hidden",!t.expirationVisible.value),g.xp6(2),g.Q6J("min",t.getMinDate()),g.xp6(2),g.Q6J("ngIf",null==(n=g.lcZ(13,10,t.backendErrors$))?null:n.expiresAt),g.xp6(6),g.Q6J("formControl",t.passwordVisible),g.xp6(2),g.Q6J("ngIf",t.passwordVisible.value),g.xp6(13),g.Q6J("disabled",g.lcZ(34,12,t.loading$)),g.xp6(2),g.hij(" ",g.lcZ(36,14,g.lcZ(37,16,t.link$)?"Update Link":"Create Link")," "))},directives:[Pt._Y,Pt.JL,Pt.sg,qt.P,yn.oG,Pt.JJ,Pt.oH,Pt.x0,Pt.Fj,Pt.u,d.O5,Nt.lW],pipes:[d.Ov,Ht.R],styles:["link-options{display:block;padding:15px;border:1px solid var(--be-divider-default);border-radius:4px}link-options .link-option{padding-bottom:25px;margin-bottom:25px;border-bottom:1px solid var(--be-divider-default)}link-options .link-option .label{font-weight:500;margin-bottom:8px}link-options .link-option .expiration-input-container,link-options .link-option .password-input-container{margin-top:15px}link-options .link-option .content .error{margin-top:10px}link-options .expiration-input-container{display:flex}link-options .expiration-input-container .date-input-container{flex:1 1 auto;margin-right:10px;position:relative}link-options .expiration-input-container .time-input{max-width:150px;margin-right:20px}link-options .update-button{margin-top:15px}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(vn.link)],wn.prototype,"link$",void 0),(0,v.gn)([(0,m.Ph)(vn.loading)],wn.prototype,"loading$",void 0),(0,v.gn)([(0,m.Ph)(vn.backendErrors)],wn.prototype,"backendErrors$",void 0);var xn=a(20616);function _n(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"div",7),g.TgZ(2,"div",8),g._uU(3),g.ALo(4,"trans"),g.TgZ(5,"span",9),g.TgZ(6,"button",10),g.NdJ("click",function(){return g.CHM(n),g.oxw().deleteLink()}),g._uU(7,"on"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"div",11),g.TgZ(9,"button",12),g.NdJ("click",function(){return g.CHM(n),g.oxw().deleteLink()}),g._UZ(10,"mat-icon",13),g.qZA(),g.TgZ(11,"button",12),g.NdJ("click",function(){return g.CHM(n),g.oxw().toggleOptionsPanel()}),g._UZ(12,"mat-icon",14),g.qZA(),g.qZA(),g.qZA(),g.TgZ(13,"div",15),g.TgZ(14,"div",16),g.TgZ(15,"input",17),g.NdJ("click",function(){return g.CHM(n),g.oxw().focusInput()})("change",function(){return g.CHM(n),g.oxw().focusInput()}),g.ALo(16,"async"),g.qZA(),g.TgZ(17,"button",18),g.NdJ("click",function(){return g.CHM(n),g.oxw().copyLinkToClipboard()}),g._uU(18,"Copy"),g.qZA(),g.qZA(),g.TgZ(19,"div",19),g.TgZ(20,"button",20),g.NdJ("click",function(){return g.CHM(n),g.oxw().shareLink("facebook")}),g._UZ(21,"mat-icon",21),g.qZA(),g.TgZ(22,"button",22),g.NdJ("click",function(){return g.CHM(n),g.oxw().shareLink("twitter")}),g._UZ(23,"mat-icon",23),g.qZA(),g.TgZ(24,"button",24),g.NdJ("click",function(){return g.CHM(n),g.oxw().shareLink("mail")}),g._UZ(25,"mat-icon",25),g.qZA(),g.qZA(),g.qZA(),g.BQk()}if(2&e){var i=g.oxw();g.xp6(3),g.hij(" ",g.lcZ(4,2,"Link sharing is")," "),g.xp6(12),g.Q6J("value",g.lcZ(16,4,i.shareableLink$))}}var Cn=function(){function e(t,n,i,r,o){f(this,e),this.store=t,this.toast=n,this.actions$=i,this.settings=r,this.dialogRef=o,this.shareableLink$=new vt.X(null),this.subscriptions=[]}return s(e,[{key:"ngOnInit",value:function(){this.store.dispatch(new sn),this.bindToOptionsPanelToggle()}},{key:"ngAfterViewInit",value:function(){this.bindToLinkChange()}},{key:"ngOnDestroy",value:function(){this.store.dispatch(new hn),this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"toggleOptionsPanel",value:function(){this.store.dispatch(new dn)}},{key:"deleteLink",value:function(){var e=this;this.store.dispatch(new un).subscribe(function(){e.toast.open("Link deleted."),e.dialogRef.close()})}},{key:"copyLinkToClipboard",value:function(){this.focusInput(),mn()(this.shareableLink$.value)&&this.store.dispatch(new pn)}},{key:"bindToLinkChange",value:function(){var e=this;this.link$.subscribe(function(t){t&&(e.shareableLink$.next(e.settings.getBaseUrl()+"/drive/s/"+t.hash),setTimeout(function(){return e.focusInput()}))})}},{key:"bindToOptionsPanelToggle",value:function(){var e=this,t=this.actions$.pipe((0,m.xt)(dn)).subscribe(function(){e.store.selectSnapshot(vn.optionsVisible)||e.shareableLink$.value||e.close()});this.subscriptions.push(t)}},{key:"shareLink",value:function(e){!function(e,t,n,i){var r=function(e,t,n,i){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+t;case"twitter":return"https://twitter.com/intent/tweet?text=undefined&url=".concat(t);case"google-plus":return"https://plus.google.com/share?url="+t;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+t+"&media="+void 0;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption=undefined&content=undefined&url="+t;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+t+"&n="+void 0;case"mail":return"mailto:?subject=Check out this link.&body=".concat(t)}}(e,t);"mail"===e?window.location.href=r:function(e){var t=(window.innerWidth-575)/2,n=(window.innerHeight-400)/2;window.open(e,"share","status=1, scrollbars=1,width=575,height=400,top="+n+",left="+t)}(r)}(e,this.shareableLink$.value)}},{key:"focusInput",value:function(){var e=document.getElementById("link-input");e.focus(),e.select()}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();function An(e,t){if(1&e&&(g.TgZ(0,"div",11),g._uU(1),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.Oqu(n.errors.name)}}Cn.\u0275fac=function(e){return new(e||Cn)(g.Y36(m.yh),g.Y36(nt.F),g.Y36(m.eX),g.Y36(Dt.Z),g.Y36(Ut.so))},Cn.\u0275cmp=g.Xpm({type:Cn,selectors:[["share-link-dialog"]],decls:16,vars:12,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[4,"ngIf"],[1,"overlay-transparent",3,"isVisible"],["type","button","mat-button","","trans","",1,"submit-button",3,"disabled","click"],[1,"title"],[1,"left"],[1,"state","on"],["trans","",1,"on-text","text","no-style",3,"click"],[1,"right"],["type","button","mat-icon-button","",3,"click"],["svgIcon","delete"],["svgIcon","settings"],[1,"link-container"],[1,"link-input-container","input-container"],["type","text","id","link-input","readonly","","tabindex","1",3,"value","click","change"],["mat-flat-button","","color","accent","trans","",3,"click"],[1,"social-icons"],["type","button","mat-icon-button","",1,"social-icon","no-style","facebook",3,"click"],["svgIcon","facebook"],["type","button","mat-icon-button","",1,"social-icon","no-style","twitter",3,"click"],["svgIcon","twitter"],["type","button","mat-icon-button","",1,"social-icon","no-style","mail",3,"click"],["svgIcon","mail"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Shareable link"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"mat-dialog-content"),g.YNc(6,_n,26,6,"ng-container",4),g.ALo(7,"async"),g._UZ(8,"link-options"),g.ALo(9,"async"),g._UZ(10,"loading-indicator",5),g.ALo(11,"async"),g.qZA(),g.TgZ(12,"mat-dialog-actions"),g.TgZ(13,"button",6),g.NdJ("click",function(){return t.close()}),g.ALo(14,"async"),g._uU(15,"Close"),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngIf",g.lcZ(7,4,t.link$)),g.xp6(2),g.Q6J("@visibility",g.lcZ(9,6,t.optionsVisible$)),g.xp6(2),g.Q6J("isVisible",g.lcZ(11,8,t.loading$)),g.xp6(3),g.Q6J("disabled",g.lcZ(14,10,t.loading$)))},directives:[Ut.uh,qt.P,Nt.lW,at.Hw,Ut.xY,d.O5,wn,xn.Q,Ut.H8],pipes:[d.Ov,Ht.R],styles:["share-link-dialog{display:block;min-height:273px;width:500px;max-width:100%}share-link-dialog .title{display:flex;align-items:center;margin-bottom:5px}share-link-dialog .title .right{margin-left:auto;color:var(--be-secondary-text)}share-link-dialog .link-input-container{display:flex;margin-bottom:10px}share-link-dialog .link-input-container input{flex:1 1 auto;border-top-right-radius:0;border-bottom-right-radius:0}share-link-dialog .link-input-container button{width:88px;flex:0 0 88px;border-top-left-radius:0;border-bottom-left-radius:0}share-link-dialog .mat-dialog-content{min-height:144px}share-link-dialog .social-icons{margin-bottom:10px}share-link-dialog loading-indicator{top:0;left:0;bottom:0;right:0;margin:auto}"],encapsulation:2,data:{animation:[(0,Vt.X$)("visibility",[(0,Vt.SB)("true",(0,Vt.oB)({height:"*",padding:"*",opacity:"1",overflow:"*"})),(0,Vt.SB)("false",(0,Vt.oB)({height:"0",padding:"0",opacity:"0",overflow:"hidden"})),(0,Vt.eR)("true <=> false",(0,Vt.jt)("225ms cubic-bezier(.4,0,.2,1)"))])]},changeDetection:0}),(0,v.gn)([(0,m.Ph)(vn.loading)],Cn.prototype,"loading$",void 0),(0,v.gn)([(0,m.Ph)(vn.link)],Cn.prototype,"link$",void 0),(0,v.gn)([(0,m.Ph)(vn.optionsVisible)],Cn.prototype,"optionsVisible$",void 0);var Zn=function(){var e=function(){function e(t,n,i,r,o){f(this,e),this.dialogRef=t,this.data=n,this.store=i,this.foldersApi=r,this.changeDetection=o,this.folderName=new Pt.NI,this.loading=new vt.X(!1),this.errors={}}return s(e,[{key:"confirm",value:function(){var e=this;this.loading.next(!0);var t=this.data.folder||this.store.selectSnapshot(it.activeFolder);return this.foldersApi.create({name:this.folderName.value,parentId:(null==t?void 0:t.id)||null}).pipe((0,b.x)(function(){return e.loading.next(!1)})).subscribe(function(t){e.setErrors(),e.store.dispatch(new Ae(t.folder)),e.close()},function(t){return e.setErrors(t)})}},{key:"setErrors",value:function(e){this.errors=e?e.errors:{},this.changeDetection.detectChanges()}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Ut.so),g.Y36(Ut.WI),g.Y36(m.yh),g.Y36(je),g.Y36(g.sBO))},e.\u0275cmp=g.Xpm({type:e,selectors:[["crupdate-folder-dialog"]],decls:16,vars:5,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["type","text","placeholder","Folder name...","trans-placeholder","","required","","min","3",3,"formControl"],["class","error",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"],[1,"error"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"New Folder"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"form",4),g.NdJ("ngSubmit",function(){return t.confirm()}),g.TgZ(6,"mat-dialog-content",5),g.TgZ(7,"div",6),g._UZ(8,"input",7),g.YNc(9,An,2,1,"div",8),g.qZA(),g.qZA(),g.TgZ(10,"mat-dialog-actions"),g.TgZ(11,"button",9),g.NdJ("click",function(){return t.close()}),g._uU(12,"Cancel"),g.qZA(),g.TgZ(13,"button",10),g.ALo(14,"async"),g._uU(15,"Create"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(8),g.Q6J("formControl",t.folderName),g.xp6(1),g.Q6J("ngIf",t.errors.name),g.xp6(4),g.Q6J("disabled",g.lcZ(14,3,t.loading)))},directives:[Ut.uh,qt.P,Nt.lW,at.Hw,Pt.JL,Pt.F,Ut.xY,Pt.Fj,Pt.Q7,Pt.JJ,Pt.oH,d.O5,Ut.H8],pipes:[d.Ov],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),e}(),On=a(15257),Sn=a(38345),In=a(95639),Tn=a(25917),En=a(39490),Pn=a(70946),Fn=function(e){c(n,e);var t=u(n);function n(e,i,r){var o;return f(this,n),(o=t.call(this)).getLevel=e,o.isExpandable=i,o.options=r,o.options&&(o.trackBy=o.options.trackBy),o}return s(n,[{key:"getDescendants",value:function(e){for(var t=[],n=this.dataNodes.indexOf(e)+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)t.push(this.dataNodes[n]);return t}},{key:"expandAll",value:function(){var e,t=this;(e=this.expansionModel).select.apply(e,i(this.dataNodes.map(function(e){return t._trackByValue(e)})))}}]),n}(function(){function e(){f(this,e),this.expansionModel=new Sn.Ov(!0)}return s(e,[{key:"toggle",value:function(e){this.expansionModel.toggle(this._trackByValue(e))}},{key:"expand",value:function(e){this.expansionModel.select(this._trackByValue(e))}},{key:"collapse",value:function(e){this.expansionModel.deselect(this._trackByValue(e))}},{key:"isExpanded",value:function(e){return this.expansionModel.isSelected(this._trackByValue(e))}},{key:"toggleDescendants",value:function(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}},{key:"collapseAll",value:function(){this.expansionModel.clear()}},{key:"expandDescendants",value:function(e){var t,n=this,r=[e];r.push.apply(r,i(this.getDescendants(e))),(t=this.expansionModel).select.apply(t,i(r.map(function(e){return n._trackByValue(e)})))}},{key:"collapseDescendants",value:function(e){var t,n=this,r=[e];r.push.apply(r,i(this.getDescendants(e))),(t=this.expansionModel).deselect.apply(t,i(r.map(function(e){return n._trackByValue(e)})))}},{key:"_trackByValue",value:function(e){return this.trackBy?this.trackBy(e):e}}]),e}()),Mn=new g.OlP("CDK_TREE_NODE_OUTLET_NODE"),Un=function(){var e=function e(t,n){f(this,e),this.viewContainer=t,this._node=n};return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.s_b),g.Y36(Mn,8))},e.\u0275dir=g.lG2({type:e,selectors:[["","cdkTreeNodeOutlet",""]]}),e}(),Dn=function e(t){f(this,e),this.$implicit=t},Ln=function(){var e=function e(t){f(this,e),this.template=t};return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.Rgc))},e.\u0275dir=g.lG2({type:e,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),e}(),qn=function(){var e=function(){function e(t,n){f(this,e),this._differs=t,this._changeDetectorRef=n,this._onDestroy=new ft.xQ,this._levels=new Map,this.viewChange=new vt.X({start:0,end:Number.MAX_VALUE})}return s(e,[{key:"dataSource",get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)}},{key:"ngOnInit",value:function(){this._dataDiffer=this._differs.find([]).create(this.trackBy)}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var e=this._nodeDefs.filter(function(e){return!e.when});this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var e,t=this;(0,Sn.Z9)(this._dataSource)?e=this._dataSource.connect(this):(0,In.b)(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=(0,Tn.of)(this._dataSource)),e&&(this._dataSubscription=e.pipe((0,Mt.R)(this._onDestroy)).subscribe(function(e){return t.renderNodeChanges(e)}))}},{key:"renderNodeChanges",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,r=arguments.length>3?arguments[3]:void 0,o=n.diff(e);o&&(o.forEachOperation(function(n,o,a){if(null==n.previousIndex)t.insertNode(e[a],a,i,r);else if(null==a)i.remove(o),t._levels.delete(n.item);else{var s=i.get(o);i.move(s,a)}}),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(e,t){return 1===this._nodeDefs.length?this._nodeDefs.first:this._nodeDefs.find(function(n){return n.when&&n.when(t,e)})||this._defaultNodeDef}},{key:"insertNode",value:function(e,t,n,i){var r=this._getNodeDef(e,t),o=new Dn(e);o.level=this.treeControl.getLevel?this.treeControl.getLevel(e):void 0!==i&&this._levels.has(i)?this._levels.get(i)+1:0,this._levels.set(e,o.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(r.template,o,t),Nn.mostRecentTreeNode&&(Nn.mostRecentTreeNode.data=e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.ZZ4),g.Y36(g.sBO))},e.\u0275cmp=g.Xpm({type:e,selectors:[["cdk-tree"]],contentQueries:function(e,t,n){var i;(1&e&&g.Suo(n,Ln,5),2&e)&&(g.iGM(i=g.CRH())&&(t._nodeDefs=i))},viewQuery:function(e,t){var n;(1&e&&g.Gf(Un,7),2&e)&&(g.iGM(n=g.CRH())&&(t._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(e,t){1&e&&g.GkF(0,0)},directives:[Un],encapsulation:2}),e}(),Nn=function(){var e=function(){function e(t,n){f(this,e),this._elementRef=t,this._tree=n,this._destroyed=new ft.xQ,this._dataChanges=new ft.xQ,e.mostRecentTreeNode=this,this._elementRef.nativeElement.classList.add("cdk-tree-node"),this.role="treeitem"}return s(e,[{key:"role",get:function(){return"treeitem"},set:function(e){this._elementRef.nativeElement.setAttribute("role",e)}},{key:"data",get:function(){return this._data},set:function(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"_setExpanded",value:function(e){this._isAriaExpanded=e,this._elementRef.nativeElement.setAttribute("aria-expanded","".concat(e))}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}},{key:"ngOnInit",value:function(){this._parentNodeAriaLevel=function(e){for(var t,n=e.parentElement;n&&(t=void 0,!(null==(t=n.classList)?void 0:t.contains("cdk-nested-tree-node"))&&!(null==t?void 0:t.contains("cdk-tree")));)n=n.parentElement;return n?n.classList.contains("cdk-nested-tree-node")?(0,En.su)(n.getAttribute("aria-level")):0:-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level","".concat(this.level+1))}},{key:"ngDoCheck",value:function(){this.isExpanded!=this._isAriaExpanded&&this._setExpanded(this.isExpanded)}},{key:"ngOnDestroy",value:function(){e.mostRecentTreeNode===this&&(e.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){this.role="treeitem"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(qn))},e.\u0275dir=g.lG2({type:e,selectors:[["cdk-tree-node"]],inputs:{role:"role"},exportAs:["cdkTreeNode"]}),e.mostRecentTreeNode=null,e}();var $n=/([A-Za-z%]+)$/,Bn=function(){var e=function(){function e(t,n,i,r){var o=this;f(this,e),this._treeNode=t,this._tree=n,this._element=i,this._dir=r,this._destroyed=new ft.xQ,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe((0,Mt.R)(this._destroyed)).subscribe(function(){return o._setPadding(!0)}),t._dataChanges.subscribe(function(){return o._setPadding()})}return s(e,[{key:"level",get:function(){return this._level},set:function(e){this._setLevelInput(e)}},{key:"indent",get:function(){return this._indent},set:function(e){this._setIndentInput(e)}},{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_paddingIndent",value:function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?"".concat(t*this._indent).concat(this.indentUnits):null}},{key:"_setPadding",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._paddingIndent();if(t!==this._currentPadding||e){var n=this._element.nativeElement,i=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",r="paddingLeft"===i?"paddingRight":"paddingLeft";n.style[i]=t||"",n.style[r]="",this._currentPadding=t}}},{key:"_setLevelInput",value:function(e){this._level=(0,En.su)(e,null),this._setPadding()}},{key:"_setIndentInput",value:function(e){var t=e,n="px";if("string"==typeof e){var i=e.split($n);t=i[0],n=i[1]||n}this.indentUnits=n,this._indent=(0,En.su)(t),this._setPadding()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Nn),g.Y36(qn),g.Y36(g.SBq),g.Y36(Pn.Is,8))},e.\u0275dir=g.lG2({type:e,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),e}(),Rn=function(){var e=function(){function e(t,n){f(this,e),this._tree=t,this._treeNode=n,this._recursive=!1}return s(e,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=(0,En.Ig)(e)}},{key:"_toggle",value:function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(qn),g.Y36(Nn))},e.\u0275dir=g.lG2({type:e,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(e,t){1&e&&g.NdJ("click",function(e){return t._toggle(e)})},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),e}(),Yn=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({}),e}(),jn=a(72458),Qn=a(66682),Jn=(0,jn.sb)((0,jn.Id)(Nn)),Vn=function(){var e=function(e){c(i,e);var n=u(i);function i(e,t,r){var o;return f(this,i),(o=n.call(this,e,t))._elementRef=e,o._tree=t,o.tabIndex=Number(r)||0,o._elementRef.nativeElement.classList.add("mat-tree-node"),o}return s(i,[{key:"ngOnInit",value:function(){t(h(i.prototype),"ngOnInit",this).call(this)}},{key:"ngDoCheck",value:function(){t(h(i.prototype),"ngDoCheck",this).call(this)}},{key:"ngOnDestroy",value:function(){t(h(i.prototype),"ngOnDestroy",this).call(this)}}]),i}(Jn);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(qn),g.$8M("tabindex"))},e.\u0275dir=g.lG2({type:e,selectors:[["mat-tree-node"]],inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},exportAs:["matTreeNode"],features:[g._Bn([{provide:Nn,useExisting:e}]),g.qOj]}),e}(),zn=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(Ln);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275dir=g.lG2({type:t,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[g._Bn([{provide:Ln,useExisting:t}]),g.qOj]}),t}(),Hn=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return s(n,[{key:"level",get:function(){return this._level},set:function(e){this._setLevelInput(e)}},{key:"indent",get:function(){return this._indent},set:function(e){this._setIndentInput(e)}}]),n}(Bn);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275dir=g.lG2({type:t,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[g._Bn([{provide:Bn,useExisting:t}]),g.qOj]}),t}(),Gn=function(){var e=function e(t,n){f(this,e),this.viewContainer=t,this._node=n};return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.s_b),g.Y36(Mn,8))},e.\u0275dir=g.lG2({type:e,selectors:[["","matTreeNodeOutlet",""]],features:[g._Bn([{provide:Un,useExisting:e}])]}),e}(),Wn=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(qn);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["mat-tree"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Gn,7),2&e)&&(g.iGM(n=g.CRH())&&(t._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"mat-tree","cdk-tree"],exportAs:["matTree"],features:[g._Bn([{provide:qn,useExisting:t}]),g.qOj],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(e,t){1&e&&g.GkF(0,0)},directives:[Gn],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),t}(),Xn=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return s(n,[{key:"recursive",get:function(){return this._recursive},set:function(e){this._recursive=(0,En.Ig)(e)}}]),n}(Rn);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275dir=g.lG2({type:t,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[g._Bn([{provide:Rn,useExisting:t}]),g.qOj]}),t}(),Kn=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[Yn,jn.BQ],jn.BQ]}),e}(),ei=function(){function e(t,n,i,r){f(this,e),this.transformFunction=t,this.getLevel=n,this.isExpandable=i,this.getChildren=r}return s(e,[{key:"_flattenNode",value:function(e,t,n,i){var r=this,o=this.transformFunction(e,t);if(n.push(o),this.isExpandable(o)){var a=this.getChildren(e);a&&(Array.isArray(a)?this._flattenChildren(a,t,n,i):a.pipe((0,On.q)(1)).subscribe(function(e){r._flattenChildren(e,t,n,i)}))}return n}},{key:"_flattenChildren",value:function(e,t,n,i){var r=this;e.forEach(function(o,a){var s=i.slice();s.push(a!=e.length-1),r._flattenNode(o,t+1,n,s)})}},{key:"flattenNodes",value:function(e){var t=this,n=[];return e.forEach(function(e){return t._flattenNode(e,0,n,[])}),n}},{key:"expandFlattenedNodes",value:function(e,t){var n=this,i=[],r=[];return r[0]=!0,e.forEach(function(e){for(var o=!0,a=0;a<=n.getLevel(e);a++)o=o&&r[a];o&&i.push(e),n.isExpandable(e)&&(r[n.getLevel(e)+1]=t.isExpanded(e))}),i}}]),e}(),ti=function(e){c(n,e);var t=u(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return f(this,n),(r=t.call(this))._treeControl=e,r._treeFlattener=i,r._flattenedData=new vt.X([]),r._expandedData=new vt.X([]),r._data=new vt.X(o),r}return s(n,[{key:"data",get:function(){return this._data.value},set:function(e){this._data.next(e),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}},{key:"connect",value:function(e){var t=this;return(0,Qn.T)(e.viewChange,this._treeControl.expansionModel.changed,this._flattenedData).pipe((0,Ft.U)(function(){return t._expandedData.next(t._treeFlattener.expandFlattenedNodes(t._flattenedData.value,t._treeControl)),t._expandedData.value}))}},{key:"disconnect",value:function(){}}]),n}(Sn.o2),ni=function(){var e=function(){function e(){f(this,e),this.createTreeFlattener(),this.createTreeControl(),this.createTreeDataSource()}return s(e,[{key:"data",set:function(e){this.dataSource.data=e}},{key:"createTreeFlattener",value:function(){this.flattener=new ei(this.transformer,this.getLevel,this.isExpandable,this.getChildren)}},{key:"createTreeControl",value:function(){this.control=new Fn(this.getLevel,this.isExpandable)}},{key:"createTreeDataSource",value:function(){this.dataSource=new ti(this.control,this.flattener)}},{key:"transformer",value:function(e,t){var n=Object.assign({},e);return n.level=t,n.expandable=!!e.children,n}},{key:"getLevel",value:function(e){return e.level}},{key:"isExpandable",value:function(e){return e.expandable}},{key:"getChildren",value:function(e){return(0,Tn.of)(e.children)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ii=new g.OlP("AVAILABLE_CONTEXT_MENUS"),ri=a(87636),oi=function(){function e(t){f(this,e),this.overlayRef=t}return s(e,[{key:"close",value:function(){this.overlayRef&&this.overlayRef.dispose()}},{key:"backdropClick",value:function(){return this.overlayRef.backdropClick()}},{key:"attachments",value:function(){return this.overlayRef.attachments()}},{key:"detachments",value:function(){return this.overlayRef.detachments()}},{key:"backdropElement",value:function(){return this.overlayRef.backdropElement}},{key:"contextMenuElement",value:function(){return this.overlayRef.overlayElement}}]),e}(),ai=new g.OlP("CONTEXT_MENU_DATA"),si=a(90625),ci=function(){var e=function(){function e(t,n,i,r,o){var a=this;f(this,e),this.router=t,this.zone=n,this.injector=i,this.resolver=r,this.overlay=o,this.router.events.pipe((0,ht.h)(function(e){return e instanceof p.OD})).subscribe(function(){return a.close()})}return s(e,[{key:"open",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.close(),e){var i=this.createOverlay(t,n);this.openContextMenu=new oi(i);var r=new ri.nK(this.injector,new WeakMap([[ai,n.data],[oi,this.openContextMenu]])),o=new ri.C5(e,null,r);return i.attach(o),this.bindEventsToOverlay(),this.openContextMenu}}},{key:"close",value:function(){this.removeLastOrigin(),this.openContextMenu&&(this.openContextMenu.close(),this.openContextMenu=null)}},{key:"createOverlay",value:function(e,t){return this.overlay.create({positionStrategy:this.getMenuPositionStrategy(e,t),scrollStrategy:this.overlay.scrollStrategies.close(),hasBackdrop:!0,backdropClass:"context-menu-backdrop",panelClass:"context-menu-overlay"})}},{key:"bindEventsToOverlay",value:function(){var e=this;this.openContextMenu.contextMenuElement().addEventListener("click",function(){e.close()}),this.openContextMenu.backdropClick().subscribe(function(){e.close()}),this.openContextMenu.backdropElement().addEventListener("contextmenu",function(t){t.preventDefault(),e.close()}),this.openContextMenu.detachments().subscribe(function(){e.close()})}},{key:"getMenuPositionStrategy",value:function(e,t){this.createOriginFromEvent(e,t);var n={originX:t.originX||"center",originY:t.originY||"bottom",overlayX:t.overlayX||"center",overlayY:t.overlayY||"top"};return this.overlay.position().flexibleConnectedTo(new g.SBq(this.lastOrigin)).withPositions([n,{originX:"end",originY:"bottom",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"bottom"}])}},{key:"createOriginFromEvent",value:function(e,t){this.removeLastOrigin(),e instanceof HTMLElement||e instanceof EventTarget?this.lastOrigin=e:(this.lastOrigin=document.createElement("div"),this.lastOrigin.style.position="fixed",this.lastOrigin.style.top=e.clientY+(t.offsetY||0)+"px",this.lastOrigin.style.left=e.clientX+(t.offsetX||0)+"px",this.lastOrigin.id="dynamic-context-menu-origin",document.body.appendChild(this.lastOrigin))}},{key:"removeLastOrigin",value:function(){this.lastOrigin&&"dynamic-context-menu-origin"===this.lastOrigin.id&&this.lastOrigin.remove()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(p.F0),g.LFG(g.R0b),g.LFG(g.zs3),g.LFG(g._Vd),g.LFG(si.aV))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),li=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.el=t,this.contextMenu=n,this.disableContextMenu=!1,this.availableMenus={},i.forEach(function(e){Object.assign(r.availableMenus,e)})}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.el.nativeElement.addEventListener("contextmenu",function(t){t.preventDefault(),t.stopPropagation(),e.disableContextMenu||e.contextMenu.open(e.getMenuComponent(),t,{overlayX:"start",overlayY:"top",data:e.getMenuData()})})}},{key:"getMenuComponent",value:function(){return"string"==typeof this.params?this.availableMenus[this.params]:this.availableMenus[this.params.type]}},{key:"getMenuData",value:function(){return"string"==typeof this.params?{type:this.params}:this.params}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(ci),g.Y36(ii))},e.\u0275dir=g.lG2({type:e,selectors:[["","contextMenu",""]],inputs:{params:["contextMenu","params"],disableContextMenu:"disableContextMenu"}}),e}(),ui=a(22759),di=function(){function e(){f(this,e),this.subs=[]}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.dragging.subscribe(function(t){t?e.onDragStart():e.onDragEnd()})}},{key:"ngOnDestroy",value:function(){this.unsubscribe()}},{key:"onDragStart",value:function(){var e=this,t=(0,ui.R)(this.el.nativeElement,"mouseenter").subscribe(function(){return e.onDragEnter()}),n=(0,ui.R)(this.el.nativeElement,"mouseleave").subscribe(function(){return e.onDragLeave()});this.subs.push(t,n)}},{key:"onDragEnter",value:function(){var e,t=["drag-over"];this.canDrop()&&(this.active=!0,t.push("can-drop")),(e=this.el.nativeElement.classList).add.apply(e,t)}},{key:"onDragLeave",value:function(){this.active=!1,this.removeDragOverClass()}},{key:"onDragEnd",value:function(){this.unsubscribe(),this.removeDragOverClass(),this.active&&this.canDrop()&&(this.executeAction(),this.active=!1)}},{key:"unsubscribe",value:function(){this.subs.forEach(function(e){return e&&e.unsubscribe()})}},{key:"removeDragOverClass",value:function(){this.el.nativeElement.classList.remove("drag-over","can-drop")}}]),e}();di.\u0275fac=function(e){return new(e||di)},di.\u0275dir=g.lG2({type:di}),(0,v.gn)([(0,m.Ph)(it.dragging)],di.prototype,"dragging",void 0);var pi=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i){var r;return f(this,n),(r=t.call(this)).el=e,r.store=i,r}return s(n,[{key:"canDrop",value:function(){var e=this.store.selectSnapshot(it.selectedEntries);return it.canMoveEntriesTo(e,this.folder)}},{key:"executeAction",value:function(){return this.store.dispatch(new P(this.folder))}}]),n}(di);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(m.yh))},e.\u0275dir=g.lG2({type:e,selectors:[["","folderDropTarget",""]],inputs:{folder:["folderDropTarget","folder"]},features:[g.qOj]}),e}();function hi(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",3),g.NdJ("click",function(){return g.CHM(n),g.oxw().selectFolder()}),g.ALo(1,"async"),g._UZ(2,"mat-icon",4),g.TgZ(3,"span",5),g._uU(4,"My Drive"),g.qZA(),g.qZA()}if(2&e){var i=g.oxw();g.ekj("active",!g.lcZ(1,2,i.selectedFolderId$))}}var fi=function(e){return{type:"entry",entry:e}};function vi(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"mat-tree-node",6),g.ALo(1,"async"),g._UZ(2,"mat-icon",7),g.TgZ(3,"button",8),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw().selectFolder(e)}),g._UZ(4,"mat-icon",9),g.TgZ(5,"span",10),g._uU(6),g.qZA(),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit,r=g.oxw();g.ekj("active",g.lcZ(1,9,r.selectedFolderId$)===i.hash),g.Q6J("matTreeNodePaddingIndent",r.showRootNode?40:24)("contextMenu",g.VKq(11,fi,i))("disableContextMenu",r.disableContextMenu)("folderDropTarget",i),g.xp6(2),g.ekj("expanded",r.tree.control.isExpanded(i)),g.xp6(4),g.Oqu(i.name)}}var gi=function(){var e=function(){function e(t,n){f(this,e),this.tree=t,this.store=n,this.expanded=!1,this.showRootNode=!1,this.disableContextMenu=!1,this.folderSelected=new g.vpe,this.subscriptions=[],this.selectedFolderId$=new vt.X(null)}return s(e,[{key:"selectFolder",value:function(e){this.selectedFolderId$.next(null==e?void 0:e.hash),this.folderSelected.emit(e)}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"ngOnInit",value:function(){var e=this,t=this.store.select(it.userFolders).pipe((0,ht.h)(function(e){return!!e})).subscribe(function(t){e.tree.data=t}),n=this.store.select(it.activePage).subscribe(function(t){e.selectedFolderId$.next(t.folderHash)});this.subscriptions.push(t,n)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(ni),g.Y36(m.yh))},e.\u0275cmp=g.Xpm({type:e,selectors:[["folders-tree"]],hostVars:4,hostBindings:function(e,t){2&e&&g.ekj("expanded",t.expanded)("has-root-node",t.showRootNode)},inputs:{expanded:"expanded",showRootNode:"showRootNode",disableContextMenu:"disableContextMenu"},outputs:{folderSelected:"folderSelected"},features:[g._Bn([ni])],decls:3,vars:3,consts:[["class","mat-tree-node root-tree-node",3,"active","click",4,"ngIf"],[3,"dataSource","treeControl"],["matTreeNodePadding","","class","tree-node",3,"matTreeNodePaddingIndent","contextMenu","disableContextMenu","folderDropTarget","active",4,"matTreeNodeDef"],[1,"mat-tree-node","root-tree-node",3,"click"],["svgIcon","network-drive-custom",1,"folder-icon"],["trans","",1,"text"],["matTreeNodePadding","",1,"tree-node",3,"matTreeNodePaddingIndent","contextMenu","disableContextMenu","folderDropTarget"],["matTreeNodeToggle","","svgIcon","arrow-drop-down",1,"toggle-expansion-icon"],["type","button",1,"no-style","folder-button",3,"click"],["svgIcon","folder",1,"folder-icon"],[1,"folder-name","text"]],template:function(e,t){1&e&&(g.YNc(0,hi,5,4,"div",0),g.TgZ(1,"mat-tree",1),g.YNc(2,vi,7,13,"mat-tree-node",2),g.qZA()),2&e&&(g.Q6J("ngIf",t.showRootNode),g.xp6(1),g.Q6J("dataSource",t.tree.dataSource)("treeControl",t.tree.control))},directives:[d.O5,Wn,zn,at.Hw,qt.P,Vn,Hn,li,pi,Xn],pipes:[d.Ov],styles:["folders-tree{display:none;color:var(--be-text)}folders-tree.expanded{display:block}folders-tree.has-root-node .mat-tree-node:not(.root-tree-node){padding-left:16px}folders-tree .folder-icon{margin-right:5px;color:var(--be-secondary-text);flex:0 0 24px}folders-tree .mat-tree .folder-button{display:flex;align-items:center;color:inherit;width:100%;min-height:inherit;line-height:inherit}folders-tree .mat-tree .folder-name{padding-top:2.5px}folders-tree .mat-tree-node{padding-right:24px;white-space:nowrap;color:inherit;background-color:var(--be-background-alternative)}folders-tree .mat-tree-node.disabled{pointer-events:none;opacity:.5}folders-tree .mat-tree-node:not(.active):not(.drag-over):hover{background-color:var(--be-hover)}folders-tree .mat-tree-node.active{color:var(--be-accent-default);background-color:var(--be-accent-emphasis)}folders-tree .mat-tree-node.active .folder-icon{color:inherit}folders-tree .mat-tree-node.active .text{font-weight:500}folders-tree .root-tree-node{padding-left:12px;cursor:pointer}folders-tree .root-tree-node .mat-icon{margin-right:6px}"],encapsulation:2,changeDetection:0}),e}(),mi=function(){function e(t,n,i){var r=this;f(this,e),this.dialogRef=t,this.store=n,this.actions=i,this.destination$=new vt.X(this.store.selectSnapshot(it.activePage).folder),this.loading$=new vt.X(!1),this.subscriptions=[],this.canMove$=this.destination$.pipe((0,Ft.U)(function(e){var t=r.store.selectSnapshot(it.selectedEntries);return it.canMoveEntriesTo(t,e)}))}return s(e,[{key:"ngOnInit",value:function(){var e=this,t=this.actions.pipe((0,m.Lt)(Te)).subscribe(function(){e.loading$.next(!1)}),n=this.actions.pipe((0,m.Lt)(Ie),(0,On.q)(1)).subscribe(function(){e.close()});this.subscriptions.push(n,t)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"confirm",value:function(){var e=this;this.loading$.next(!0),this.store.dispatch(new P(this.destination$.value)).subscribe(function(){e.loading$.next(!1)})}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();function yi(e,t){if(1&e&&(g.TgZ(0,"div",11),g._uU(1),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.Oqu(n.errors.name)}}mi.\u0275fac=function(e){return new(e||mi)(g.Y36(Ut.so),g.Y36(m.yh),g.Y36(m.eX))},mi.\u0275cmp=g.Xpm({type:mi,selectors:[["move-entries-dialog"]],decls:15,vars:8,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[3,"expanded","disableContextMenu","showRootNode","folderSelected"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Move items"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"form",4),g.NdJ("ngSubmit",function(){return t.confirm()}),g.TgZ(6,"mat-dialog-content"),g.TgZ(7,"folders-tree",5),g.NdJ("folderSelected",function(e){return t.destination$.next(e)}),g.qZA(),g.qZA(),g.TgZ(8,"mat-dialog-actions"),g.TgZ(9,"button",6),g.NdJ("click",function(){return t.close()}),g._uU(10,"Cancel"),g.qZA(),g.TgZ(11,"button",7),g.ALo(12,"async"),g.ALo(13,"async"),g._uU(14,"Move"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(7),g.Q6J("expanded",!0)("disableContextMenu",!0)("showRootNode",!0),g.xp6(4),g.Q6J("disabled",!g.lcZ(12,4,t.canMove$)||g.lcZ(13,6,t.loading$)))},directives:[Ut.uh,qt.P,Nt.lW,at.Hw,Pt.JL,Pt.F,Ut.xY,gi,Ut.H8],pipes:[d.Ov],styles:[".move-entries-dialog-container{width:350px}move-entries-dialog{display:block;width:400px;max-width:100%}move-entries-dialog folders-tree{border:1px solid var(--be-divider-lighter);border-radius:3px}move-entries-dialog .mat-dialog-actions{margin-top:15px}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.selectedEntries)],mi.prototype,"selectedEntries$",void 0);var bi=function(){var e=function(){function e(t,n,i,r,o){f(this,e),this.dialogRef=t,this.store=n,this.toast=i,this.entriesApi=r,this.changeDetection=o,this.entryName=new Pt.NI,this.loading=new vt.X(!1),this.errors={}}return s(e,[{key:"ngOnInit",value:function(){this.entry=this.store.selectSnapshot(it.selectedEntries)[0],this.entryName.setValue(this.entry.name)}},{key:"confirm",value:function(){var e=this,t=this.entryName.value;return t===this.entry.name?this.close():(this.loading.next(!0),this.entriesApi.update(this.entry.id,{name:t}).pipe((0,b.x)(function(){return e.loading.next(!1)})).subscribe(function(){e.setErrors(),e.store.dispatch(new Ze(e.entry,t)),e.close()},function(t){return e.setErrors(t)}))}},{key:"setErrors",value:function(e){this.loading.next(!1),this.errors=e?e.errors:{},this.changeDetection.detectChanges()}},{key:"close",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Ut.so),g.Y36(m.yh),g.Y36(nt.F),g.Y36(Qe),g.Y36(g.sBO))},e.\u0275cmp=g.Xpm({type:e,selectors:[["rename-entry-dialog"]],decls:16,vars:5,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["type","text","placeholder","Enter a name...","trans-placeholder","","required","","min","3",3,"formControl"],["class","error",4,"ngIf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"],[1,"error"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Rename"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return t.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"form",4),g.NdJ("ngSubmit",function(){return t.confirm()}),g.TgZ(6,"mat-dialog-content",5),g.TgZ(7,"div",6),g._UZ(8,"input",7),g.YNc(9,yi,2,1,"div",8),g.qZA(),g.qZA(),g.TgZ(10,"mat-dialog-actions"),g.TgZ(11,"button",9),g.NdJ("click",function(){return t.close()}),g._uU(12,"Cancel"),g.qZA(),g.TgZ(13,"button",10),g.ALo(14,"async"),g._uU(15,"Rename"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(8),g.Q6J("formControl",t.entryName),g.xp6(1),g.Q6J("ngIf",t.errors.name),g.xp6(4),g.Q6J("disabled",g.lcZ(14,3,t.loading)))},directives:[Ut.uh,qt.P,Nt.lW,at.Hw,Pt.JL,Pt.F,Ut.xY,Pt.Fj,Pt.Q7,Pt.JJ,Pt.oH,d.O5,Ut.H8],pipes:[d.Ov],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),e}(),ki=function(){var e=function(){function e(t,n,i){f(this,e),this.store=t,this.workspaces=n,this.currentUser=i}return s(e,[{key:"getActions",value:function(){return this.updateStatus(),this.actions}},{key:"getSelectedEntries",value:function(){return this.store.selectSnapshot(it.selectedEntries)}},{key:"updateStatus",value:function(){this.multipleEntriesSelected=this.store.selectSnapshot(it.multipleEntriesSelected),this.allStarred=this.store.selectSnapshot(it.allSelectedEntriesStarred),this.onlyFoldersSelected=this.store.selectSnapshot(it.onlyFoldersSelected)}},{key:"hasPermission",value:function(e){if("files.create"===e){var t=this.store.selectSnapshot(it.activePage).folder,n=!this.multipleEntriesSelected&&this.getSelectedFolder()||t;return((null==n?void 0:n.permissions)||[])["files.update"]}return this.getSelectedEntries().every(function(t){return t.permissions[e]})}},{key:"getSelectedFolder",value:function(){return this.getSelectedEntries().find(function(e){return"folder"===e.type})}},{key:"openUploadWindow",value:function(e){this.store.dispatch(new G(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.yh),g.LFG(tt.b),g.LFG(Ye.I))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),wi=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).actions=[{viewName:"Preview",icon:"visibility",showInCompact:!0,execute:function(){e.store.dispatch(new R)},visible:function(){return!e.onlyFoldersSelected}},{viewName:"Manage People",icon:"person-add",showInCompact:!0,execute:function(){e.store.dispatch(new F(on))},visible:function(){return e.hasPermission("files.update")}},{viewName:"Get shareable link",icon:"link",execute:function(){e.store.dispatch(new F(Cn,null,{panelClass:"share-link-dialog-container",autoFocus:!1}))},visible:function(){return!e.multipleEntriesSelected&&e.hasPermission("files.update")}},{viewName:"Add a star",icon:"star",execute:function(){e.store.dispatch(new j(e.getSelectedEntries()))},visible:function(){return!e.allStarred}},{viewName:"Remove star",icon:"star-border",execute:function(){e.store.dispatch(new Q(e.getSelectedEntries()))},visible:function(){return e.allStarred}},{viewName:"New Folder",icon:"create-new-folder",separatorBefore:e.store.selectSnapshot(it.isMobile),execute:function(){e.store.dispatch(new F(Zn,{folder:e.getSelectedFolder()}))},visible:function(){return e.hasPermission("files.create")}},{viewName:"Upload Files",icon:"cloud-upload",execute:function(){e.openUploadWindow("file")},visible:function(){return e.hasPermission("files.create")&&e.store.selectSnapshot(it.isMobile)}},{viewName:"Upload Folder",icon:"upload-folder-custom",execute:function(){e.openUploadWindow("directory")},visible:function(){return e.hasPermission("files.create")&&e.store.selectSnapshot(it.isMobile)}},{viewName:"Move to",icon:"subdirectory-arrow-right",separatorBefore:e.store.selectSnapshot(it.isMobile),execute:function(){e.store.dispatch(new F(mi,null,{panelClass:"move-entries-dialog-container"}))},visible:function(){return e.hasPermission("files.update")}},{viewName:"Rename",icon:"edit",execute:function(){e.store.dispatch(new F(bi))},visible:function(){return!e.multipleEntriesSelected&&e.hasPermission("files.update")}},{viewName:"Make a copy",icon:"file-copy",execute:function(){e.store.dispatch(new H)},visible:function(){return e.hasPermission("files.create")}},{viewName:"Download",icon:"file-download",execute:function(){e.store.dispatch(new Y)},visible:function(){return e.hasPermission("files.download")}},{viewName:"Delete",icon:"delete",showInCompact:!0,separatorBefore:!0,execute:function(){e.store.dispatch(new S)},visible:function(){return e.hasPermission("files.delete")}}],e}return n}(ki);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),xi=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).actions=[{viewName:"New Folder",icon:"create-new-folder",execute:function(){e.store.dispatch(new F(Zn))},visible:function(){return e.hasPermission("files.create")}},{viewName:"Upload Files",icon:"cloud-upload",separatorBefore:!0,execute:function(){e.openUploadWindow("file")},visible:function(){return e.hasPermission("files.create")}},{viewName:"Upload Folder",icon:"upload-folder-custom",execute:function(){e.openUploadWindow("directory")},visible:function(){return e.hasPermission("files.create")}}],e}return n}(ki);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),_i=function(){return!0},Ci=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,o){var a;return f(this,n),(a=t.call(this,e,o,i)).store=e,a.currentUser=i,a.shares=r,a.workspaces=o,a.actions=[{viewName:"Preview",icon:"visibility",execute:function(){a.store.dispatch(new R)},visible:function(){return!a.onlyFoldersSelected}},{viewName:"Manage People",icon:"person-add",showInCompact:!0,execute:function(){a.store.dispatch(new F(on))},visible:function(){return a.hasPermission("files.update")}},{viewName:"Get shareable link",icon:"link",execute:function(){a.store.dispatch(new F(Cn,null,{panelClass:"share-link-dialog-container",autoFocus:!1}))},visible:function(){return!a.multipleEntriesSelected&&a.hasPermission("files.update")}},{viewName:"Rename",icon:"edit",execute:function(){a.store.dispatch(new F(bi))},visible:function(){return!a.multipleEntriesSelected&&a.hasPermission("files.update")}},{viewName:"Make a copy",icon:"file-copy",execute:function(){a.store.dispatch(new H)},visible:function(){return a.hasPermission("files.download")&&a.hasPermission("files.create")}},{viewName:"Download",icon:"file-download",execute:function(){a.store.dispatch(new Y)},visible:function(){return a.hasPermission("files.download")}},{viewName:"Remove",icon:"delete",showInCompact:!0,execute:function(){var e=a.getSelectedEntries();a.shares.detachUser(a.currentUser.get("id"),e.map(function(e){return e.id})).subscribe(function(){a.store.dispatch(new J(e))})},visible:_i}],a}return n}(ki);return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.yh),g.LFG(Ye.I),g.LFG(_t),g.LFG(tt.b))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Ai=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).actions=[{viewName:"Restore",icon:"restore",showInCompact:!0,execute:function(){e.store.dispatch(new N)},visible:function(){return e.hasPermission("files.update")}},{viewName:"Delete Forever",icon:"delete-forever",showInCompact:!0,execute:function(){e.deleteForever()},visible:function(){return e.hasPermission("files.delete")}}],e}return s(n,[{key:"deleteForever",value:function(){this.store.dispatch(new M({title:"Delete Forever",body:"This will permanently delete selected items.",bodyBold:"This action can not be undone.",ok:"Delete Forever"},new $))}}]),n}(ki);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Zi=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).actions=[{viewName:"Empty Trash",icon:"delete-forever",execute:function(){e.emptyTrash()},visible:function(){return e.hasPermission("files.delete")}}],e}return s(n,[{key:"emptyTrash",value:function(){this.store.dispatch(new M({title:"Empty Trash",body:"All files and folders in your trash will be permanently deleted.",bodyBold:"This action can not be undone.",ok:"Empty Trash"},new B))}}]),n}(ki);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),Oi=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),Si=a(65072),Ii=a(70837),Ti=a(87519),Ei=a(39761),Pi=a(54395),Fi=a(90739),Mi=a(23876),Ui=a(75499),Di=a(83644),Li=a(45418),qi=a(79893),Ni=function(){var t=function(){function t(e,n,i,r){var o;f(this,t),this.store=e,this.driveApi=n,this.router=i,this.currentUser=r,this.filters=[qi.M,new Di.XQ({type:Di.Bq.Select,key:"owner_id",label:"Owner",description:"User that this file was uploaded by",defaultValue:(o=this.currentUser).get("id"),options:[{key:"Anyone",value:{value:null,operator:"!="}},{key:"Owned by me",value:o.get("id")},{key:"Not owned by me",value:{value:o.get("id"),operator:"!="}}]}),new Li.T7({description:"Date file was uploaded"}),new Li.yH({description:"Date file was last changed"}),new Di.XQ({type:Di.Bq.StaticValue,key:"deleted_at",label:"Trashed",defaultOperator:Di.pg.ne,defaultValue:null,description:"Only show files that are in the trash"}),new Di.XQ({type:Di.Bq.StaticValue,key:"shareableLink",label:"Has Shareable Link",description:"Only show files that have a shareable link",defaultValue:"*",defaultOperator:Di.pg.has}),new Di.XQ({type:Di.Bq.StaticValue,key:"sharedByMe",label:"Shared By Me",defaultValue:!0,description:"Only show files that are shared with someone"})],this.searchControl=new Pt.NI,this.filterChange$=new vt.X(null)}return s(t,[{key:"ngOnInit",value:function(){var t=this;this.metaSub=this.store.select(it.meta).subscribe(function(e){e.query||e.filters?t.searchEl.nativeElement.classList.add("always-white"):t.searchEl.nativeElement.classList.remove("always-white")}),(0,Fi.aj)([this.searchControl.valueChanges.pipe((0,Ti.x)(),(0,Ei.O)(null)),this.filterChange$]).pipe((0,pt.T)(1),(0,Pi.b)(0)).subscribe(function(n){var i=e(n,2),r=i[0],o=i[1],a={query:r,filters:o},s=t.store.selectSnapshot(Mi.uu.state).root.queryParams;!r&&!o||yt()(s,a)?o||r||!t.inSearchPage()||t.router.navigate(["/drive"]):t.store.dispatch(new C(a))})}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.metaSub)||void 0===e||e.unsubscribe()}},{key:"openSearchPage",value:function(){this.inSearchPage()||this.store.dispatch(new C)}},{key:"inSearchPage",value:function(){return this.router.routerState.snapshot.url.includes("/drive/search")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(m.yh),g.Y36(Qe),g.Y36(p.F0),g.Y36(Ye.I))},t.\u0275cmp=g.Xpm({type:t,selectors:[["main-searchbar"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Ui.k,7,g.SBq),2&e)&&(g.iGM(n=g.CRH())&&(t.searchEl=n.first))},decls:1,vars:3,consts:[["pluralName","files",1,"nav-searchbar",3,"compact","searchControl","filters","inputFocus","filterChange"]],template:function(e,t){1&e&&(g.TgZ(0,"search-input-with-filters",0),g.NdJ("inputFocus",function(){return t.openSearchPage()})("filterChange",function(e){return t.filterChange$.next(e)}),g.qZA()),2&e&&g.Q6J("compact",!0)("searchControl",t.searchControl)("filters",t.filters)},directives:[Ui.k],styles:["[_nghost-%COMP%]{display:block;width:100%;align-self:flex-start;margin-top:12.5px}search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis);max-width:750px}search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .search-input::-moz-placeholder{color:currentColor}search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .search-input:-ms-input-placeholder{color:currentColor}search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .clear-button, search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .filter-button, search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .search-icon, search-input-with-filters.nav-searchbar[_ngcontent-%COMP%]     .search-input::placeholder{color:currentColor}"],changeDetection:0}),t}(),$i=a(80521),Bi=a(71386),Ri=a(36461),Yi=a(77393);function ji(e){return function(t){return t.lift(new Qi(e))}}var Qi=function(){function e(t){f(this,e),this.value=t}return s(e,[{key:"call",value:function(e,t){return t.subscribe(new Ji(e,this.value))}}]),e}(),Ji=function(e){c(n,e);var t=u(n);function n(e,i){var r;return f(this,n),(r=t.call(this,e)).value=i,r}return s(n,[{key:"_next",value:function(e){this.destination.next(this.value)}}]),n}(Yi.L),Vi=a(46237),zi=a(19238),Hi=["*"];function Gi(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",2),g.NdJ("click",function(){return g.CHM(n),g.oxw()._onBackdropClicked()}),g.qZA()}if(2&e){var i=g.oxw();g.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function Wi(e,t){1&e&&(g.TgZ(0,"mat-drawer-content"),g.Hsn(1,2),g.qZA())}var Xi=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],Ki=["mat-drawer","mat-drawer-content","*"];function er(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",2),g.NdJ("click",function(){return g.CHM(n),g.oxw()._onBackdropClicked()}),g.qZA()}if(2&e){var i=g.oxw();g.ekj("mat-drawer-shown",i._isShowingBackdrop())}}function tr(e,t){1&e&&(g.TgZ(0,"mat-sidenav-content",3),g.Hsn(1,2),g.qZA())}var nr=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],ir=["mat-sidenav","mat-sidenav-content","*"],rr=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",or={transformDrawer:(0,Vt.X$)("transform",[(0,Vt.SB)("open, open-instant",(0,Vt.oB)({transform:"none",visibility:"visible"})),(0,Vt.SB)("void",(0,Vt.oB)({"box-shadow":"none",visibility:"hidden"})),(0,Vt.eR)("void => open-instant",(0,Vt.jt)("0ms")),(0,Vt.eR)("void <=> open, open-instant => void",(0,Vt.jt)("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},ar=new g.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),sr=new g.OlP("MAT_DRAWER_CONTAINER"),cr=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,o,a){var s;return f(this,n),(s=t.call(this,r,o,a))._changeDetectorRef=e,s._container=i,s}return s(n,[{key:"ngAfterContentInit",value:function(){var e=this;this._container._contentMarginChanges.subscribe(function(){e._changeDetectorRef.markForCheck()})}}]),n}(Bi.PQ);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.sBO),g.Y36((0,g.Gpc)(function(){return ur})),g.Y36(g.SBq),g.Y36(Bi.mF),g.Y36(g.R0b))},e.\u0275cmp=g.Xpm({type:e,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,t){2&e&&g.Udp("margin-left",t._container._contentMargins.left,"px")("margin-right",t._container._contentMargins.right,"px")},features:[g.qOj],ngContentSelectors:Hi,decls:1,vars:0,template:function(e,t){1&e&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),e}(),lr=function(){var e=function(){function e(t,n,i,r,o,a,s){var c=this;f(this,e),this._elementRef=t,this._focusTrapFactory=n,this._focusMonitor=i,this._platform=r,this._ngZone=o,this._doc=a,this._container=s,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ft.xQ,this._animationEnd=new ft.xQ,this._animationState="void",this.openedChange=new g.vpe(!0),this._openedStream=this.openedChange.pipe((0,ht.h)(function(e){return e}),(0,Ft.U)(function(){})),this.openedStart=this._animationStarted.pipe((0,ht.h)(function(e){return e.fromState!==e.toState&&0===e.toState.indexOf("open")}),ji(void 0)),this._closedStream=this.openedChange.pipe((0,ht.h)(function(e){return!e}),(0,Ft.U)(function(){})),this.closedStart=this._animationStarted.pipe((0,ht.h)(function(e){return e.fromState!==e.toState&&"void"===e.toState}),ji(void 0)),this._destroyed=new ft.xQ,this.onPositionChanged=new g.vpe,this._modeChanged=new ft.xQ,this.openedChange.subscribe(function(e){e?(c._doc&&(c._elementFocusedBeforeDrawerWasOpened=c._doc.activeElement),c._takeFocus()):c._isFocusWithinDrawer()&&c._restoreFocus()}),this._ngZone.runOutsideAngular(function(){(0,ui.R)(c._elementRef.nativeElement,"keydown").pipe((0,ht.h)(function(e){return e.keyCode===Ri.hY&&!c.disableClose&&!(0,Ri.Vb)(e)}),(0,Mt.R)(c._destroyed)).subscribe(function(e){return c._ngZone.run(function(){c.close(),e.stopPropagation(),e.preventDefault()})})}),this._animationEnd.pipe((0,Ti.x)(function(e,t){return e.fromState===t.fromState&&e.toState===t.toState})).subscribe(function(e){var t=e.fromState,n=e.toState;(0===n.indexOf("open")&&"void"===t||"void"===n&&0===t.indexOf("open"))&&c.openedChange.emit(c._opened)})}return s(e,[{key:"position",get:function(){return this._position},set:function(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}},{key:"mode",get:function(){return this._mode},set:function(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}},{key:"disableClose",get:function(){return this._disableClose},set:function(e){this._disableClose=(0,En.Ig)(e)}},{key:"autoFocus",get:function(){var e=this._autoFocus;return null==e?"side"!==this.mode:e},set:function(e){this._autoFocus=(0,En.Ig)(e)}},{key:"opened",get:function(){return this._opened},set:function(e){this.toggle((0,En.Ig)(e))}},{key:"_takeFocus",value:function(){var e=this;this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(function(t){t||"function"!=typeof e._elementRef.nativeElement.focus||e._elementRef.nativeElement.focus()})}},{key:"_restoreFocus",value:function(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}},{key:"_isFocusWithinDrawer",value:function(){var e,t=null===(e=this._doc)||void 0===e?void 0:e.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}},{key:"ngAfterContentInit",value:function(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}},{key:"ngAfterContentChecked",value:function(){this._platform.isBrowser&&(this._enableAnimations=!0)}},{key:"ngOnDestroy",value:function(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(e){return this.toggle(!0,e)}},{key:"close",value:function(){return this.toggle(!1)}},{key:"_closeViaBackdropClick",value:function(){return this._setOpen(!1,!0)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.opened,t=arguments.length>1?arguments[1]:void 0;return this._setOpen(e,!e&&this._isFocusWithinDrawer(),t)}},{key:"_setOpen",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"program";return this._opened=e,e?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=i):(this._animationState="void",t&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(function(e){n.openedChange.pipe((0,On.q)(1)).subscribe(function(t){return e(t?"open":"close")})})}},{key:"_getWidth",value:function(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}},{key:"_updateFocusTrapState",value:function(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}},{key:"_animationStartListener",value:function(e){this._animationStarted.next(e)}},{key:"_animationDoneListener",value:function(e){this._animationEnd.next(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(zi.qV),g.Y36(zi.tE),g.Y36($i.t4),g.Y36(g.R0b),g.Y36(d.K0,8),g.Y36(sr,8))},e.\u0275cmp=g.Xpm({type:e,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,t){1&e&&g.WFA("@transform.start",function(e){return t._animationStartListener(e)})("@transform.done",function(e){return t._animationDoneListener(e)}),2&e&&(g.uIk("align",null),g.d8E("@transform",t._animationState),g.ekj("mat-drawer-end","end"===t.position)("mat-drawer-over","over"===t.mode)("mat-drawer-push","push"===t.mode)("mat-drawer-side","side"===t.mode)("mat-drawer-opened",t.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Hi,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,t){1&e&&(g.F$t(),g.TgZ(0,"div",0),g.Hsn(1),g.qZA())},directives:[Bi.PQ],encapsulation:2,data:{animation:[or.transformDrawer]},changeDetection:0}),e}(),ur=function(){var e=function(){function e(t,n,i,r,o){var a=this,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0;f(this,e),this._dir=t,this._element=n,this._ngZone=i,this._changeDetectorRef=r,this._animationMode=c,this._drawers=new g.n_E,this.backdropClick=new g.vpe,this._destroyed=new ft.xQ,this._doCheckSubject=new ft.xQ,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ft.xQ,t&&t.change.pipe((0,Mt.R)(this._destroyed)).subscribe(function(){a._validateDrawers(),a.updateContentMargins()}),o.change().pipe((0,Mt.R)(this._destroyed)).subscribe(function(){return a.updateContentMargins()}),this._autosize=s}return s(e,[{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"autosize",get:function(){return this._autosize},set:function(e){this._autosize=(0,En.Ig)(e)}},{key:"hasBackdrop",get:function(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride},set:function(e){this._backdropOverride=null==e?null:(0,En.Ig)(e)}},{key:"scrollable",get:function(){return this._userContent||this._content}},{key:"ngAfterContentInit",value:function(){var e=this;this._allDrawers.changes.pipe((0,Ei.O)(this._allDrawers),(0,Mt.R)(this._destroyed)).subscribe(function(t){e._drawers.reset(t.filter(function(t){return!t._container||t._container===e})),e._drawers.notifyOnChanges()}),this._drawers.changes.pipe((0,Ei.O)(null)).subscribe(function(){e._validateDrawers(),e._drawers.forEach(function(t){e._watchDrawerToggle(t),e._watchDrawerPosition(t),e._watchDrawerMode(t)}),(!e._drawers.length||e._isDrawerOpen(e._start)||e._isDrawerOpen(e._end))&&e.updateContentMargins(),e._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(function(){e._doCheckSubject.pipe((0,Pi.b)(10),(0,Mt.R)(e._destroyed)).subscribe(function(){return e.updateContentMargins()})})}},{key:"ngOnDestroy",value:function(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}},{key:"open",value:function(){this._drawers.forEach(function(e){return e.open()})}},{key:"close",value:function(){this._drawers.forEach(function(e){return e.close()})}},{key:"updateContentMargins",value:function(){var e=this,t=0,n=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){var i=this._left._getWidth();t+=i,n-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)n+=this._right._getWidth();else if("push"==this._right.mode){var r=this._right._getWidth();n+=r,t-=r}n=n||null,(t=t||null)===this._contentMargins.left&&n===this._contentMargins.right||(this._contentMargins={left:t,right:n},this._ngZone.run(function(){return e._contentMarginChanges.next(e._contentMargins)}))}},{key:"ngDoCheck",value:function(){var e=this;this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(function(){return e._doCheckSubject.next()})}},{key:"_watchDrawerToggle",value:function(e){var t=this;e._animationStarted.pipe((0,ht.h)(function(e){return e.fromState!==e.toState}),(0,Mt.R)(this._drawers.changes)).subscribe(function(e){"open-instant"!==e.toState&&"NoopAnimations"!==t._animationMode&&t._element.nativeElement.classList.add("mat-drawer-transition"),t.updateContentMargins(),t._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe((0,Mt.R)(this._drawers.changes)).subscribe(function(){return t._setContainerClass(e.opened)})}},{key:"_watchDrawerPosition",value:function(e){var t=this;e&&e.onPositionChanged.pipe((0,Mt.R)(this._drawers.changes)).subscribe(function(){t._ngZone.onMicrotaskEmpty.pipe((0,On.q)(1)).subscribe(function(){t._validateDrawers()})})}},{key:"_watchDrawerMode",value:function(e){var t=this;e&&e._modeChanged.pipe((0,Mt.R)((0,Qn.T)(this._drawers.changes,this._destroyed))).subscribe(function(){t.updateContentMargins(),t._changeDetectorRef.markForCheck()})}},{key:"_setContainerClass",value:function(e){var t=this._element.nativeElement.classList,n="mat-drawer-container-has-open";e?t.add(n):t.remove(n)}},{key:"_validateDrawers",value:function(){var e=this;this._start=this._end=null,this._drawers.forEach(function(t){"end"==t.position?e._end=t:e._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}},{key:"_isPushed",value:function(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}},{key:"_onBackdropClicked",value:function(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}},{key:"_closeModalDrawersViaBackdrop",value:function(){var e=this;[this._start,this._end].filter(function(t){return t&&!t.disableClose&&e._canHaveBackdrop(t)}).forEach(function(e){return e._closeViaBackdropClick()})}},{key:"_isShowingBackdrop",value:function(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}},{key:"_canHaveBackdrop",value:function(e){return"side"!==e.mode||!!this._backdropOverride}},{key:"_isDrawerOpen",value:function(e){return null!=e&&e.opened}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Pn.Is,8),g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(g.sBO),g.Y36(Bi.rL),g.Y36(ar),g.Y36(Vi.Qb,8))},e.\u0275cmp=g.Xpm({type:e,selectors:[["mat-drawer-container"]],contentQueries:function(e,t,n){var i;(1&e&&(g.Suo(n,cr,5),g.Suo(n,lr,5)),2&e)&&(g.iGM(i=g.CRH())&&(t._content=i.first),g.iGM(i=g.CRH())&&(t._allDrawers=i))},viewQuery:function(e,t){var n;(1&e&&g.Gf(cr,5),2&e)&&(g.iGM(n=g.CRH())&&(t._userContent=n.first))},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("mat-drawer-container-explicit-backdrop",t._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[g._Bn([{provide:sr,useExisting:e}])],ngContentSelectors:Ki,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,t){1&e&&(g.F$t(Xi),g.YNc(0,Gi,1,2,"div",0),g.Hsn(1),g.Hsn(2,1),g.YNc(3,Wi,2,0,"mat-drawer-content",1)),2&e&&(g.Q6J("ngIf",t.hasBackdrop),g.xp6(3),g.Q6J("ngIf",!t._content))},directives:[d.O5,cr],styles:[rr],encapsulation:2,changeDetection:0}),e}(),dr=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,o,a){return f(this,n),t.call(this,e,i,r,o,a)}return n}(cr);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.sBO),g.Y36((0,g.Gpc)(function(){return hr})),g.Y36(g.SBq),g.Y36(Bi.mF),g.Y36(g.R0b))},e.\u0275cmp=g.Xpm({type:e,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,t){2&e&&g.Udp("margin-left",t._container._contentMargins.left,"px")("margin-right",t._container._contentMargins.right,"px")},features:[g.qOj],ngContentSelectors:Hi,decls:1,vars:0,template:function(e,t){1&e&&(g.F$t(),g.Hsn(0))},encapsulation:2,changeDetection:0}),e}(),pr=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments))._fixedInViewport=!1,e._fixedTopGap=0,e._fixedBottomGap=0,e}return s(n,[{key:"fixedInViewport",get:function(){return this._fixedInViewport},set:function(e){this._fixedInViewport=(0,En.Ig)(e)}},{key:"fixedTopGap",get:function(){return this._fixedTopGap},set:function(e){this._fixedTopGap=(0,En.su)(e)}},{key:"fixedBottomGap",get:function(){return this._fixedBottomGap},set:function(e){this._fixedBottomGap=(0,En.su)(e)}}]),n}(lr);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,t){2&e&&(g.uIk("align",null),g.Udp("top",t.fixedInViewport?t.fixedTopGap:null,"px")("bottom",t.fixedInViewport?t.fixedBottomGap:null,"px"),g.ekj("mat-drawer-end","end"===t.position)("mat-drawer-over","over"===t.mode)("mat-drawer-push","push"===t.mode)("mat-drawer-side","side"===t.mode)("mat-drawer-opened",t.opened)("mat-sidenav-fixed",t.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[g.qOj],ngContentSelectors:Hi,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,t){1&e&&(g.F$t(),g.TgZ(0,"div",0),g.Hsn(1),g.qZA())},directives:[Bi.PQ],encapsulation:2,data:{animation:[or.transformDrawer]},changeDetection:0}),t}(),hr=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(ur);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(e,t,n){var i;(1&e&&(g.Suo(n,dr,5),g.Suo(n,pr,5)),2&e)&&(g.iGM(i=g.CRH())&&(t._content=i.first),g.iGM(i=g.CRH())&&(t._allDrawers=i))},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("mat-drawer-container-explicit-backdrop",t._backdropOverride)},exportAs:["matSidenavContainer"],features:[g._Bn([{provide:sr,useExisting:t}]),g.qOj],ngContentSelectors:ir,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,t){1&e&&(g.F$t(nr),g.YNc(0,er,1,2,"div",0),g.Hsn(1),g.Hsn(2,1),g.YNc(3,tr,2,0,"mat-sidenav-content",1)),2&e&&(g.Q6J("ngIf",t.hasBackdrop),g.xp6(3),g.Q6J("ngIf",!t._content))},directives:[d.O5,dr,Bi.PQ],styles:[rr],encapsulation:2,changeDetection:0}),t}(),fr=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[d.ez,jn.BQ,$i.ud,Bi.ZD],Bi.ZD,jn.BQ]}),e}(),vr=a(15381),gr=a(52781),mr=function(){function e(t,n,i){f(this,e),this.dialog=t,this.store=n,this.uploadInputConfig=i}return s(e,[{key:"openNewFolderDialog",value:function(){this.dialog.open(Zn)}},{key:"openUploadsPanel",value:function(e){this.store.dispatch(new q(e))}}]),e}();mr.\u0275fac=function(e){return new(e||mr)(g.Y36(vr.u),g.Y36(m.yh),g.Y36(Ne))},mr.\u0275cmp=g.Xpm({type:mr,selectors:[["sidebar-action-buttons"]],decls:8,vars:7,consts:[["mat-raised-button","","color","accent",1,"upload-button",3,"disabled","uploadButton","filesSelected"],["svgIcon","cloud-upload"],["trans",""],["mat-raised-button","","color","accent",1,"new-folder-button",3,"disabled","click"],["svgIcon","create-new-folder"]],template:function(e,t){1&e&&(g.TgZ(0,"button",0),g.NdJ("filesSelected",function(e){return t.openUploadsPanel(e)}),g.ALo(1,"async"),g._UZ(2,"mat-icon",1),g.TgZ(3,"span",2),g._uU(4,"Upload"),g.qZA(),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",function(){return t.openNewFolderDialog()}),g.ALo(6,"async"),g._UZ(7,"mat-icon",4),g.qZA()),2&e&&(g.Q6J("disabled",!g.lcZ(1,3,t.canUpload$))("uploadButton",t.uploadInputConfig),g.xp6(5),g.Q6J("disabled",!g.lcZ(6,5,t.canUpload$)))},directives:[Nt.lW,gr.c,at.Hw,qt.P],pipes:[d.Ov],styles:["sidebar-action-buttons{display:block;text-align:center}sidebar-action-buttons .upload-button{margin-right:5px;margin-bottom:2px}sidebar-action-buttons .upload-button .mat-icon{margin-right:5px}sidebar-action-buttons .new-folder-button{max-width:60px;min-width:auto}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.canUpload)],mr.prototype,"canUpload$",void 0);var yr=a(14434),br=[(0,Vt.X$)("fadeIn",[(0,Vt.eR)(":enter",[(0,Vt.oB)({opacity:0}),(0,Vt.jt)("325ms ease-in",(0,Vt.oB)({opacity:1}))])]),(0,Vt.X$)("fadeOut",[(0,Vt.eR)(":leave",[(0,Vt.oB)({opacity:1,position:"absolute",left:"0",right:"0"}),(0,Vt.jt)("325ms ease-out",(0,Vt.oB)({opacity:0}))])])],kr=a(12178),wr=a(64833),xr=a(52644);function _r(e,t){if(1&e&&(g.TgZ(0,"div",4),g._uU(1),g.ALo(2,"formattedFileSize"),g.ALo(3,"async"),g.ALo(4,"trans"),g.ALo(5,"formattedFileSize"),g.ALo(6,"async"),g.ALo(7,"trans"),g.qZA()),2&e){var n=g.oxw();g.Q6J("@fadeIn",void 0),g.xp6(1),g.HOy(" ",g.lcZ(2,5,g.lcZ(3,7,n.spaceUsed$))," ",g.lcZ(4,9,"of")," ",g.lcZ(5,11,g.lcZ(6,13,n.spaceAvailable$))," ",g.lcZ(7,15,"used"),"\n")}}function Cr(e,t){1&e&&g._UZ(0,"skeleton",4),2&e&&g.Q6J("@fadeOut",void 0)}function Ar(e,t){1&e&&(g.TgZ(0,"div"),g.TgZ(1,"a",5),g._uU(2,"Upgrade Storage"),g.qZA(),g.qZA())}var Zr=function e(t,n){f(this,e),this.settings=t,this.workspaces=n};Zr.\u0275fac=function(e){return new(e||Zr)(g.Y36(Dt.Z),g.Y36(tt.b))},Zr.\u0275cmp=g.Xpm({type:Zr,selectors:[["available-space-indicator"]],decls:9,vars:12,consts:[["mode","determinate","color","accent",3,"value"],["class","usage-info",4,"ngIf","ngIfElse"],["skeleton",""],[4,"ngIf"],[1,"usage-info"],["mat-button","","routerLink","/billing/upgrade","target","_blank","trans","",1,"upgrade-link"]],template:function(e,t){if(1&e&&(g._UZ(0,"mat-progress-bar",0),g.ALo(1,"async"),g.YNc(2,_r,8,17,"div",1),g.ALo(3,"async"),g.YNc(4,Cr,1,1,"ng-template",null,2,g.W1O),g.YNc(6,Ar,3,0,"div",3),g.ALo(7,"async"),g.ALo(8,"async")),2&e){var n,i=g.MAs(5);g.Q6J("value",g.lcZ(1,4,t.spaceUsedPercent$)),g.xp6(2),g.Q6J("ngIf",null!==g.lcZ(3,6,t.spaceUsed$))("ngIfElse",i),g.xp6(4),g.Q6J("ngIf",t.settings.get("billing.enable")&&(!g.lcZ(7,8,t.workspaces.activeId$)||(null==(n=g.lcZ(8,10,t.workspaces.activeWorkspace$))||null==n.currentUser?null:n.currentUser.is_owner)))}},directives:[kr.pW,d.O5,wr._,Nt.zs,p.yS,qt.P],pipes:[d.Ov,xr.y,Ht.R],styles:["[_nghost-%COMP%]{display:block;flex:1 1 auto;position:relative}skeleton.text[_ngcontent-%COMP%]{height:18px}.usage-info[_ngcontent-%COMP%]{margin:5px 0;font-size:1.3rem;color:var(--be-secondary-text)}.upgrade-link[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem;margin-left:-16px}.mat-progress-bar[_ngcontent-%COMP%]{max-width:132px}"],data:{animation:[br]},changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.userSpaceUsed)],Zr.prototype,"spaceUsed$",void 0),(0,v.gn)([(0,m.Ph)(it.userSpaceAvailable)],Zr.prototype,"spaceAvailable$",void 0),(0,v.gn)([(0,m.Ph)(it.spaceUsedPercent)],Zr.prototype,"spaceUsedPercent$",void 0);var Or=a(81769),Sr=a(8208),Ir=a(48358);function Tr(e,t){1&e&&(g.TgZ(0,"span",12),g._uU(1,"Personal workspace"),g.qZA())}var Er=function(e){return{count:e}};function Pr(e,t){if(1&e&&(g.TgZ(0,"span",12),g._uU(1),g.ALo(2,"trans"),g.qZA()),2&e){var n=g.oxw().ngIf;g.xp6(1),g.Oqu(g.xi3(2,1,":count members",g.VKq(4,Er,(null==n?null:n.members_count)||0)))}}function Fr(e,t){if(1&e&&(g.TgZ(0,"div",5),g.TgZ(1,"div",6),g.TgZ(2,"div",7),g._uU(3),g.qZA(),g.TgZ(4,"div",8),g.YNc(5,Tr,2,0,"span",9),g.YNc(6,Pr,3,6,"span",9),g.qZA(),g.qZA(),g.TgZ(7,"div",10),g._UZ(8,"mat-icon",11),g.qZA(),g.qZA()),2&e){var n=t.ngIf;g.oxw();var i=g.MAs(3);g.Q6J("matMenuTriggerFor",i),g.xp6(3),g.Oqu(n.name),g.xp6(2),g.Q6J("ngIf",n.default),g.xp6(1),g.Q6J("ngIf",!n.default)}}function Mr(e,t){1&e&&(g.TgZ(0,"span",12),g._uU(1,"Personal workspace"),g.qZA())}function Ur(e,t){if(1&e&&(g.TgZ(0,"span",12),g._uU(1),g.ALo(2,"trans"),g.qZA()),2&e){var n=g.oxw().$implicit;g.xp6(1),g.Oqu(g.xi3(2,1,":count members",g.VKq(4,Er,(null==n?null:n.members_count)||0)))}}function Dr(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",17),g.NdJ("click",function(e){g.CHM(n);var t=g.oxw().$implicit;return g.oxw().openWorkspaceMembersModal(t),e.stopPropagation()}),g._UZ(1,"mat-icon",18),g.qZA()}}function Lr(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",13),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw().selectWorkspace(e)}),g.ALo(1,"async"),g._UZ(2,"mat-icon",14),g.ALo(3,"async"),g.TgZ(4,"div"),g.TgZ(5,"div",15),g._uU(6),g.qZA(),g.TgZ(7,"div",8),g.YNc(8,Mr,2,0,"span",9),g.YNc(9,Ur,3,6,"span",9),g.qZA(),g.qZA(),g.YNc(10,Dr,2,0,"button",16),g.qZA()}if(2&e){var i=t.$implicit,r=g.oxw();g.ekj("active",g.lcZ(1,8,r.workspaces.activeId$)===i.id),g.xp6(2),g.ekj("visually-hidden",g.lcZ(3,10,r.workspaces.activeId$)!==i.id),g.xp6(4),g.Oqu(i.name),g.xp6(2),g.Q6J("ngIf",i.default),g.xp6(1),g.Q6J("ngIf",!i.default),g.xp6(1),g.Q6J("ngIf",!i.default)}}function qr(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",19),g.NdJ("click",function(){return g.CHM(n),g.oxw().openCrupdateWorkspaceModal()}),g._UZ(1,"mat-icon",20),g.TgZ(2,"span",12),g._uU(3,"Create new workspace"),g.qZA(),g.qZA()}}var Nr=function(){var e=function(){function e(t,n,i,r,o,a){f(this,e),this.modal=t,this.workspaces=n,this.currentUser=i,this.toast=r,this.vcr=o,this.cd=a}return s(e,[{key:"ngOnInit",value:function(){this.workspaces.indexUserWorkspaces().subscribe()}},{key:"openCrupdateWorkspaceModal",value:function(e){var t=this;a.e(401).then(a.bind(a,41401)).then(function(n){t.modal.open(n.WorkspaceModule.components.crupdateModal,{workspace:e},{viewContainerRef:t.vcr}),t.cd.markForCheck()})}},{key:"openWorkspaceMembersModal",value:function(e){var t=this;a.e(401).then(a.bind(a,41401)).then(function(n){t.modal.open(n.WorkspaceModule.components.manageMembers,{workspace:e},{viewContainerRef:t.vcr}),t.cd.markForCheck(),t.menuTrigger.closeMenu()})}},{key:"maybeDeleteWorkspace",value:function(e){var t=this,n=Object.assign(Object.assign({},Ir.M),{replacements:{resource:"workspace"}});this.modal.open(Sr.z,n).afterClosed().pipe((0,ht.h)(function(e){return e})).subscribe(function(){t.workspaces.delete([e.id]).subscribe(function(){t.toast.open("Workspace deleted.")},function(e){t.toast.open(e.message||Or.v.Default)})})}},{key:"selectWorkspace",value:function(e){this.workspaces.select(e.id),this.menuTrigger.closeMenu()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(vr.u),g.Y36(tt.b),g.Y36(Ye.I),g.Y36(nt.F),g.Y36(g.s_b),g.Y36(g.sBO))},e.\u0275cmp=g.Xpm({type:e,selectors:[["workspace-selector"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Bt.p6,5),2&e)&&(g.iGM(n=g.CRH())&&(t.menuTrigger=n.first))},decls:7,vars:7,consts:[[3,"matMenuTriggerFor",4,"ngIf"],[1,"workspace-menu"],["workspaceMenu","matMenu"],["mat-menu-item","","class","workspace-menu-item",3,"active","click",4,"ngFor","ngForOf"],["mat-menu-item","","class","new-workspace-menu-item",3,"click",4,"ngIf"],[3,"matMenuTriggerFor"],[1,"left"],["trans","",1,"role-name"],[1,"member-count"],["trans","",4,"ngIf"],[1,"right"],["svgIcon","unfold-more"],["trans",""],["mat-menu-item","",1,"workspace-menu-item",3,"click"],["svgIcon","check"],["trans","",1,"name"],["type","button","class","settings-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"settings-button",3,"click"],["svgIcon","settings"],["mat-menu-item","",1,"new-workspace-menu-item",3,"click"],["svgIcon","add"]],template:function(e,t){1&e&&(g.YNc(0,Fr,9,4,"div",0),g.ALo(1,"async"),g.TgZ(2,"mat-menu",1,2),g.YNc(4,Lr,11,12,"div",3),g.ALo(5,"async"),g.YNc(6,qr,4,0,"div",4),g.qZA()),2&e&&(g.Q6J("ngIf",g.lcZ(1,3,t.workspaces.activeWorkspace$)),g.xp6(4),g.Q6J("ngForOf",g.lcZ(5,5,t.workspaces.available$)),g.xp6(2),g.Q6J("ngIf",t.currentUser.hasPermission("workspaces.create")))},directives:[d.O5,Bt.VK,d.sg,Bt.p6,qt.P,at.Hw,Bt.OP,Nt.lW],pipes:[d.Ov,Ht.R],styles:[".mat-menu-trigger[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;cursor:pointer;height:100%}.right[_ngcontent-%COMP%]{margin-left:auto;flex-shrink:0}.role-name[_ngcontent-%COMP%]{font-weight:500;text-transform:capitalize}.workspace-menu-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:normal;min-width:248px;line-height:normal;height:52px}.workspace-menu-item.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.workspace-menu-item.active[_ngcontent-%COMP%]   .member-count[_ngcontent-%COMP%]{color:inherit}.workspace-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex-shrink:0;color:inherit}.workspace-menu-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:10px;flex:1 1 auto;font-size:1.5rem;text-transform:capitalize}.new-workspace-menu-item[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);margin-top:8px;padding-top:4px;font-size:1.5rem}.member-count[_ngcontent-%COMP%]{color:var(--be-secondary-text);font-size:1.3rem}.settings-button[_ngcontent-%COMP%]{margin-left:auto;color:var(--be-secondary-text);width:30px;height:30px;line-height:30px}.settings-button[_ngcontent-%COMP%]:hover{color:var(--be-accent-default)}.settings-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;line-height:18px;margin-right:0}"],changeDetection:0}),e}(),$r=function(){return{exact:!0}},Br=function(){function e(t,n){f(this,e),this.urls=t,this.store=n}return s(e,[{key:"openFolder",value:function(e){this.store.dispatch(new _(e))}}]),e}();Br.\u0275fac=function(e){return new(e||Br)(g.Y36(Je),g.Y36(m.yh))},Br.\u0275cmp=g.Xpm({type:Br,selectors:[["sidebar"]],decls:17,vars:8,consts:[[1,"sidebar-body"],[1,"drive-folders"],["routerLinkActive","active",1,"sidebar-menu-item",3,"routerLink","routerLinkActiveOptions","folderDropTarget"],["svgIcon","arrow-drop-down",1,"toggle-expansion-icon",3,"click"],["svgIcon","network-drive-custom"],["trans","",1,"text"],[3,"folderSelected"],["driveTree",""],["position","drive-sidebar","itemClass","sidebar-menu-item",1,"sidebar-menu"],[1,"usage-container"],["svgIcon","storage"],[1,"sidebar-footer"]],template:function(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",0),g._UZ(1,"sidebar-action-buttons"),g.TgZ(2,"div",1),g.TgZ(3,"div",2),g.ALo(4,"async"),g.TgZ(5,"mat-icon",3),g.NdJ("click",function(e){return g.CHM(n),g.MAs(10).toggle(),e.stopPropagation()}),g.qZA(),g._UZ(6,"mat-icon",4),g.TgZ(7,"span",5),g._uU(8,"All Files"),g.qZA(),g.qZA(),g.TgZ(9,"folders-tree",6,7),g.NdJ("folderSelected",function(e){return t.openFolder(e)}),g.qZA(),g.qZA(),g._UZ(11,"custom-menu",8),g.TgZ(12,"div",9),g._UZ(13,"mat-icon",10),g._UZ(14,"available-space-indicator"),g.qZA(),g.qZA(),g.TgZ(15,"div",11),g._UZ(16,"workspace-selector"),g.qZA()}if(2&e){var i=g.MAs(10);g.xp6(3),g.Q6J("routerLink",t.urls.driveRoot())("routerLinkActiveOptions",g.DdM(7,$r))("folderDropTarget",g.lcZ(4,5,t.rootFolder$)),g.xp6(2),g.ekj("expanded",i.expanded)}},directives:[mr,p.Od,p.rH,pi,at.Hw,qt.P,gi,yr.K,Zr,Nr],pipes:[d.Ov],styles:['.be-light-mode sidebar{background-color:var(--be-background-alternative)}sidebar{display:flex;flex-direction:column;width:100%;min-height:100%;color:var(--be-text);position:relative}sidebar .sidebar-body{flex:1 1 auto}sidebar sidebar-action-buttons{padding:28px 0}sidebar .drag-over.can-drop{background-color:var(--be-accent-emphasis)}sidebar .sidebar-menu-item{display:flex;align-items:center;width:100%;height:48px;min-height:inherit;line-height:inherit;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:inherit;outline:none;cursor:pointer;-webkit-user-drag:none}sidebar .sidebar-menu-item.active{color:var(--be-accent-default);background-color:var(--be-accent-emphasis)}sidebar .sidebar-menu-item.active .mat-icon{color:inherit}sidebar .sidebar-menu-item.active .text{font-weight:500}sidebar .sidebar-menu-item:not(.active):not(.drag-over):hover{background-color:var(--be-hover)}sidebar .sidebar-menu-item .mat-icon:not(.toggle-expansion-icon){margin-right:15px}sidebar .sidebar-menu-item .mat-icon{color:var(--be-secondary-text)}sidebar .sidebar-menu-item:not(.active) .text{opacity:.8}sidebar .sidebar-menu .sidebar-menu-item{padding-left:24px;padding-right:24px}sidebar .sidebar-footer:hover{background-color:var(--be-hover)}sidebar workspace-selector{display:block;border-top:1px solid var(--be-divider-default);border-radius:4px;margin:0 20px;height:80px}sidebar .usage-container{display:flex;margin-top:24px;padding:24px 0 0 24px;border-top:1px solid var(--be-divider-default)}sidebar .usage-container .mat-icon{margin-right:15px;margin-top:-4px;color:var(--be-secondary-text)}sidebar folders-tree .mat-tree-node:before{display:block;content:" ";width:24px;flex:0 0 24px}'],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.activePage)],Br.prototype,"activePage$",void 0),(0,v.gn)([(0,m.Ph)(it.rootFolder)],Br.prototype,"rootFolder$",void 0);var Rr=a(11436),Yr=["textArea"];function jr(e,t){1&e&&(g.ynx(0),g.TgZ(1,"span",3),g._uU(2,"Saving..."),g.qZA(),g.BQk())}function Qr(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",6),g.TgZ(1,"label",7),g._uU(2,"Description"),g.qZA(),g.TgZ(3,"textarea",8,9),g.NdJ("enterKeybind",function(){return g.CHM(n),g.MAs(4).blur()})("blur",function(){g.CHM(n);var e=g.MAs(4),t=g.oxw(2).ngIf;return g.oxw().updateDescription(t,e.value)}),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2).ngIf;g.xp6(3),g.Q6J("value",i.description)}}function Jr(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",10),g.NdJ("click",function(){return g.CHM(n),g.oxw(3).editDescription()}),g._uU(1),g.ALo(2,"trans"),g.qZA(),g.TgZ(3,"button",11),g.NdJ("click",function(){return g.CHM(n),g.oxw(3).editDescription()}),g.ALo(4,"trans"),g._UZ(5,"mat-icon",12),g.qZA()}if(2&e){var i=g.oxw(2).ngIf;g.xp6(1),g.Oqu(i.description||g.lcZ(2,2,"Add a description")),g.xp6(2),g.Q6J("matTooltip",g.lcZ(4,4,"Edit description"))}}function Vr(e,t){if(1&e&&(g.YNc(0,Qr,5,1,"div",4),g.ALo(1,"async"),g.YNc(2,Jr,6,6,"ng-template",null,5,g.W1O)),2&e){var n=g.MAs(3),i=g.oxw(2);g.Q6J("ngIf",g.lcZ(1,2,i.editingDescription$))("ngIfElse",n)}}function zr(e,t){if(1&e&&(g.ynx(0),g.YNc(1,jr,3,0,"ng-container",1),g.ALo(2,"async"),g.YNc(3,Vr,4,4,"ng-template",null,2,g.W1O),g.BQk()),2&e){var n=g.MAs(4),i=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,2,i.savingDescription$))("ngIfElse",n)}}var Hr=function(){function e(t){f(this,e),this.store=t,this.editingDescription$=new vt.X(!1),this.savingDescription$=new vt.X(!1)}return s(e,[{key:"ngAfterViewInit",value:function(){this.textArea.changes.subscribe(function(e){e.length&&e.first.nativeElement.focus()})}},{key:"editDescription",value:function(){this.editingDescription$.next(!0)}},{key:"updateDescription",value:function(e,t){var n=this;this.editingDescription$.next(!1),e.description!==t&&(this.savingDescription$.next(!0),this.store.dispatch(new ie(e,t)).pipe((0,b.x)(function(){return n.savingDescription$.next(!1)})).subscribe())}}]),e}();function Gr(e,t){if(1&e&&g._UZ(0,"img",2),2&e){var n=g.oxw();g.Q6J("src",n.getPreviewUrl(),g.LSH)("ngClass",n.file.type+"-file")}}function Wr(e,t){if(1&e&&g._UZ(0,"file-icon",3),2&e){var n=g.oxw();g.Q6J("type","folder"===n.file.type?n.getFolderIcon():n.file.type)}}Hr.\u0275fac=function(e){return new(e||Hr)(g.Y36(m.yh))},Hr.\u0275cmp=g.Xpm({type:Hr,selectors:[["entry-description-panel"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Yr,5),2&e)&&(g.iGM(n=g.CRH())&&(t.textArea=n))},decls:2,vars:3,consts:[[4,"ngIf"],[4,"ngIf","ngIfElse"],["descriptionSaved",""],["trans",""],["class","input-container",4,"ngIf","ngIfElse"],["descriptionEl",""],[1,"input-container"],["for","description","trans","",1,"hidden"],["rows","4","id","description",3,"value","enterKeybind","blur"],["textArea",""],[1,"description-text",3,"click"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"]],template:function(e,t){1&e&&(g.YNc(0,zr,5,4,"ng-container",0),g.ALo(1,"async")),2&e&&g.Q6J("ngIf",g.lcZ(1,1,t.entry$))},directives:[d.O5,qt.P,Nt.lW,Rr.gM,at.Hw],pipes:[d.Ov,Ht.R],styles:["entry-description-panel{color:var(--be-text);display:flex;align-items:center;max-width:215px}entry-description-panel .description-text{cursor:text;vertical-align:sub;flex:1 1 auto;opacity:.8}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.selectedEntryOrActiveFolder)],Hr.prototype,"entry$",void 0);var Xr=function(){var e=function(){function e(){f(this,e)}return s(e,[{key:"getPreviewUrl",value:function(){var e=this.file.url;if(this.file.thumbnail){var t=e.includes("?")?"&":"?";e+=t+"thumbnail=true"}return e}},{key:"getFolderIcon",value:function(){return this.file.users&&this.file.users.length>1?"shared-folder":"folder"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["file-thumbnail"]],inputs:{file:"file"},decls:2,vars:2,consts:[["class","file-color","draggable","false",3,"src","ngClass",4,"ngIf"],[3,"type",4,"ngIf"],["draggable","false",1,"file-color",3,"src","ngClass"],[3,"type"]],template:function(e,t){1&e&&(g.YNc(0,Gr,1,2,"img",0),g.YNc(1,Wr,1,1,"file-icon",1)),2&e&&(g.Q6J("ngIf","image"===t.file.type),g.xp6(1),g.Q6J("ngIf","image"!==t.file.type))},directives:[d.O5,d.mk,st],styles:[".be-light-mode file-thumbnail{background-color:var(--be-background-alternative)}file-thumbnail{display:block}file-thumbnail img{display:block;max-width:100%;height:auto}"],encapsulation:2,changeDetection:0}),e}(),Kr=a(18256);function eo(e,t){if(1&e&&g._UZ(0,"file-thumbnail",16),2&e){var n=g.oxw(2).ngIf;g.Q6J("file",n)}}var to=function(e){return{workspace:e}};function no(e,t){if(1&e&&(g._UZ(0,"mat-icon",17),g.ALo(1,"trans"),g.ALo(2,"async")),2&e){var n,i=g.oxw(3);g.Q6J("matTooltip",g.xi3(1,1,"Everyone at :workspace workspace",g.VKq(6,to,null==(n=g.lcZ(2,4,i.workspaces.activeWorkspace$))?null:n.name)))}}function io(e,t){if(1&e&&g._UZ(0,"img",18),2&e){var n=t.$implicit;g.Q6J("src",n.avatar,g.LSH)("matTooltip",n.display_name)}}function ro(e,t){if(1&e&&(g.TgZ(0,"div",7),g.TgZ(1,"div",8),g._uU(2,"Owner"),g.qZA(),g.TgZ(3,"div",10),g._uU(4),g.qZA(),g.qZA()),2&e){var n=t.ngIf;g.xp6(4),g.Oqu(n.display_name)}}function oo(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.YNc(1,eo,1,1,"file-thumbnail",2),g.TgZ(2,"div",3),g.YNc(3,no,3,8,"mat-icon",4),g.YNc(4,io,1,2,"img",5),g.qZA(),g.TgZ(5,"div",6),g.TgZ(6,"div",7),g.TgZ(7,"div",8),g._uU(8,"Type"),g.qZA(),g.TgZ(9,"div",9),g._uU(10),g.qZA(),g.qZA(),g.TgZ(11,"div",7),g.TgZ(12,"div",8),g._uU(13,"Size"),g.qZA(),g.TgZ(14,"div",10),g._uU(15),g.ALo(16,"formattedFileSize"),g.qZA(),g.qZA(),g.TgZ(17,"div",7),g.TgZ(18,"div",8),g._uU(19,"Storage Used"),g.qZA(),g.TgZ(20,"div",10),g._uU(21),g.ALo(22,"formattedFileSize"),g.qZA(),g.qZA(),g.TgZ(23,"div",11),g.TgZ(24,"div",8),g._uU(25,"Location"),g.qZA(),g.TgZ(26,"div",12),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).openLocation()}),g._UZ(27,"mat-icon",13),g.TgZ(28,"span",14),g._uU(29),g.ALo(30,"trans"),g.ALo(31,"async"),g.qZA(),g.qZA(),g.qZA(),g.YNc(32,ro,5,1,"div",15),g.ALo(33,"async"),g.TgZ(34,"div",7),g.TgZ(35,"div",8),g._uU(36,"Last Updated"),g.qZA(),g.TgZ(37,"div",10),g._uU(38),g.ALo(39,"formattedDate"),g.qZA(),g.qZA(),g.TgZ(40,"div",7),g.TgZ(41,"div",8),g._uU(42,"Created"),g.qZA(),g.TgZ(43,"div",10),g._uU(44),g.ALo(45,"formattedDate"),g.qZA(),g.qZA(),g._UZ(46,"entry-description-panel"),g.qZA(),g.BQk()}if(2&e){var i,r=g.oxw().ngIf,o=g.oxw();g.xp6(1),g.Q6J("ngIf","image"===r.type),g.xp6(2),g.Q6J("ngIf",r.workspace_id),g.xp6(1),g.Q6J("ngForOf",r.users),g.xp6(6),g.Oqu(r.type),g.xp6(5),g.Oqu(g.lcZ(16,10,r.file_size)),g.xp6(6),g.Oqu(g.lcZ(22,12,r.file_size)),g.xp6(8),g.Oqu(g.lcZ(30,14,(null==(i=g.lcZ(31,16,o.parent$))?null:i.name)||"All Files")),g.xp6(3),g.Q6J("ngIf",g.lcZ(33,18,o.owner$)),g.xp6(6),g.Oqu(g.lcZ(39,20,r.updated_at)),g.xp6(6),g.Oqu(g.lcZ(45,22,r.created_at))}}function ao(e,t){if(1&e&&(g.ynx(0),g.YNc(1,oo,47,24,"ng-container",0),g.BQk()),2&e){var n=t.ngIf;g.oxw();var i=g.MAs(3);g.xp6(1),g.Q6J("ngIf",n.updated_at)("ngIfElse",i)}}function so(e,t){1&e&&(g.TgZ(0,"div",19),g._UZ(1,"mat-icon",20),g.TgZ(2,"div",21),g._uU(3,"Select file or folder to view its details."),g.qZA(),g.qZA())}var co=function(){function e(t,n){f(this,e),this.store=t,this.workspaces=n,this.owner$=this.store.select(it.selectedEntryOrActiveFolder).pipe((0,Ft.U)(function(e){return((null==e?void 0:e.users)||[]).find(function(e){return e.owns_entry})}))}return s(e,[{key:"openLocation",value:function(){var e=this.store.selectSnapshot(it.selectedEntryParent);this.store.dispatch(new _(e))}}]),e}();function lo(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"file-icon",6),g.TgZ(2,"div",7),g._uU(3),g.qZA(),g.BQk()),2&e){var n=g.oxw().ngIf;g.xp6(1),g.Q6J("type",n.type),g.xp6(2),g.Oqu(n.name)}}function uo(e,t){if(1&e&&(g.ynx(0),g.YNc(1,lo,4,2,"ng-container",2),g.BQk()),2&e){var n=t.ngIf;g.oxw();var i=g.MAs(5);g.xp6(1),g.Q6J("ngIf",n.type)("ngIfElse",i)}}function po(e,t){if(1&e&&(g._UZ(0,"file-icon",8),g.TgZ(1,"div",7),g._uU(2),g.ALo(3,"trans"),g.ALo(4,"async"),g.qZA()),2&e){var n,i=g.oxw();g.xp6(2),g.Oqu(g.lcZ(3,1,null==(n=g.lcZ(4,3,i.activePage$))?null:n.viewName))}}co.\u0275fac=function(e){return new(e||co)(g.Y36(m.yh),g.Y36(tt.b))},co.\u0275cmp=g.Xpm({type:co,selectors:[["details-panel"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["nothingSelected",""],["class","preview",3,"file",4,"ngIf"],[1,"users-list"],["class","users-list-img workspace-img","svgIcon","groups",3,"matTooltip",4,"ngIf"],["class","users-list-img",3,"src","matTooltip",4,"ngFor","ngForOf"],[1,"details-list"],[1,"item"],["trans","",1,"name"],["trans","",1,"value","type-value"],[1,"value"],[1,"item","location-item"],[1,"value",3,"click"],["svgIcon","folder"],[1,"text"],["class","item",4,"ngIf"],[1,"preview",3,"file"],["svgIcon","groups",1,"users-list-img","workspace-img",3,"matTooltip"],[1,"users-list-img",3,"src","matTooltip"],[1,"nothing-selected"],["svgIcon","selection-tool-custom",1,"icon"],["trans","",1,"text"]],template:function(e,t){if(1&e&&(g.YNc(0,ao,2,2,"ng-container",0),g.ALo(1,"async"),g.YNc(2,so,4,0,"ng-template",null,1,g.W1O)),2&e){var n=g.MAs(3);g.Q6J("ngIf",g.lcZ(1,2,t.entry$))("ngIfElse",n)}},directives:[d.O5,d.sg,qt.P,at.Hw,Hr,Xr,Rr.gM],pipes:[d.Ov,xr.y,Ht.R,Kr.l],styles:["details-panel{display:block;padding:24px}details-panel file-thumbnail{margin-bottom:20px}details-panel .users-list{display:flex;flex-wrap:wrap;margin-bottom:20px}details-panel .users-list-img{width:36px;height:36px;flex:0 0 36px;-o-object-fit:cover;object-fit:cover;margin-right:10px;border-radius:50%;overflow:hidden;color:var(--be-secondary-text)}details-panel .workspace-img{border:2px solid var(--be-secondary-text);border-radius:4px;padding:4px}details-panel .details-list .item{display:flex;align-items:center;margin-bottom:10px}details-panel .details-list .item .name{width:120px;flex-shrink:0;color:var(--be-text);opacity:.8}details-panel .details-list .item .value{flex-shrink:0}details-panel .details-list .item .type-value{text-transform:capitalize}details-panel .nothing-selected{display:flex;align-items:center;font-size:1.7rem;font-weight:400}details-panel .nothing-selected .mat-icon{margin-right:5px;width:36px;height:36px;flex-shrink:0}details-panel .location-item .value{font-weight:500;cursor:pointer}details-panel .location-item .value .mat-icon{color:var(--be-secondary-text);margin-right:4px;vertical-align:bottom}details-panel .location-item .value:hover .text{color:var(--be-link);text-decoration:underline}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.selectedEntryOrActiveFolder)],co.prototype,"entry$",void 0),(0,v.gn)([(0,m.Ph)(it.selectedEntryParent)],co.prototype,"parent$",void 0);var ho=function(){function e(t){f(this,e),this.store=t}return s(e,[{key:"close",value:function(){this.store.dispatch(new D)}}]),e}();ho.\u0275fac=function(e){return new(e||ho)(g.Y36(m.yh))},ho.\u0275cmp=g.Xpm({type:ho,selectors:[["details-sidebar"]],decls:9,vars:4,consts:[[1,"header"],[1,"title"],[4,"ngIf","ngIfElse"],["defaultTitle",""],["mat-icon-button","",1,"close-button",3,"click"],["svgIcon","close"],[3,"type"],[1,"name"],["type","folder"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.YNc(2,uo,2,2,"ng-container",2),g.ALo(3,"async"),g.YNc(4,po,5,5,"ng-template",null,3,g.W1O),g.TgZ(6,"button",4),g.NdJ("click",function(){return t.close()}),g._UZ(7,"mat-icon",5),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"details-panel")),2&e){var n=g.MAs(5);g.xp6(2),g.Q6J("ngIf",g.lcZ(3,2,t.entry$))("ngIfElse",n)}},directives:[d.O5,Nt.lW,at.Hw,co,st],pipes:[d.Ov,Ht.R],styles:["details-sidebar{display:block;padding:28px 0}details-sidebar>.header{margin-bottom:20px;padding:0 24px}details-sidebar>.header .title{display:flex;align-items:center}details-sidebar>.header .title .name{font-size:2.1rem;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis}details-sidebar>.header .title file-icon{width:24px;height:24px;margin-right:18px}details-sidebar>.header .close-button{color:var(--be-secondary-text);margin-left:auto}details-sidebar .mat-tab-label{min-width:50%}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.selectedEntryOrActiveFolder)],ho.prototype,"entry$",void 0),(0,v.gn)([(0,m.Ph)(it.activePage)],ho.prototype,"activePage$",void 0);var fo=function(){var e=function(){function e(){f(this,e),this.driveEntry=!0}return s(e,[{key:"fileId",get:function(){return this.entry.id}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["files-grid-item"]],hostVars:3,hostBindings:function(e,t){2&e&&(g.uIk("data-id",t.fileId),g.ekj("drive-entry",t.driveEntry))},inputs:{entry:"entry"},decls:6,vars:3,consts:[[1,"preview-container"],[1,"preview",3,"file"],[1,"files-grid-item-footer"],[3,"type"],[1,"text"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"file-thumbnail",1),g.qZA(),g.TgZ(2,"figcaption",2),g._UZ(3,"file-icon",3),g.TgZ(4,"div",4),g._uU(5),g.qZA(),g.qZA()),2&e&&(g.xp6(1),g.Q6J("file",t.entry),g.xp6(2),g.Q6J("type",t.entry.type),g.xp6(2),g.Oqu(t.entry.name))},directives:[Xr,st],styles:["files-grid{display:flex;flex-wrap:wrap;align-content:flex-start;margin:-8px}files-grid:empty{margin:0}files-grid-item{box-shadow:0 1px 5px rgba(50,50,50,.1);border:1px solid var(--be-divider-default);background-color:var(--be-background);flex:0 0 auto;margin:8px;border-radius:4px;overflow:hidden;transition:opacity .2s ease-in-out}@media only screen and (max-width:360px){files-grid-item{width:calc(100% - 16px)}}@media only screen and (min-width:360px) and (max-width:600px){files-grid-item{width:calc(50% - 16px)}}@media only screen and (min-width:600px) and (max-width:950px){files-grid-item{width:calc(33.3333333333% - 16px)}}@media only screen and (min-width:950px) and (max-width:1200px){files-grid-item{width:calc(25% - 16px)}}@media only screen and (min-width:1200px) and (max-width:1470px){files-grid-item{width:calc(20% - 16px)}}@media only screen and (min-width:1470px){files-grid-item{width:calc(16.6666666667% - 16px)}}files-grid-item.drag-over .files-grid-item-footer{background-color:var(--be-accent-emphasis)}files-grid-item.selected{border-color:var(--be-accent-default)}files-grid-item.selected .files-grid-item-footer{background-color:var(--be-accent-emphasis);color:var(--be-accent-default)}files-grid-item .preview-container{width:100%;padding-top:calc(100% - 48px);position:relative}files-grid-item .preview-container .preview{width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0}files-grid-item .preview-container .preview file-icon{width:74px;height:74px;position:absolute;top:0;left:0;bottom:0;right:0;margin:auto}files-grid-item .preview-container .preview img{width:auto;max-width:100%;height:100%;margin:auto;-o-object-fit:cover;object-fit:cover}.files-grid-item-footer{display:flex;align-items:center;padding:16px}.files-grid-item-footer file-icon{width:16px;height:16px;margin-right:16px}.files-grid-item-footer .text{line-height:16px;margin-right:auto;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),e}(),vo=function(){var e=function(){function e(t,n){f(this,e),this.store=t,this.cache=n,this.initial={x:0,y:0,scrollTop:0}}return s(e,[{key:"start",value:function(e){this.cacheClientRects(),this.createSelectBox(),this.bindScroll(),this.gridElements=this.getGridElements(),this.initial=Object.assign(Object.assign({},this.hammerToRelative(e)),{scrollTop:this.cache.scrollCont.scrollTop}),this.selectBox.style.top=this.initial.y+"px",this.selectBox.style.left=this.initial.x+"px"}},{key:"move",value:function(e){this.lastPanEvent=e,this.resizeBox(e)}},{key:"end",value:function(){this.removeSelectBox(),this.dispatchSelectedAction(),this.unbindScroll(),this.gridElements=[]}},{key:"resizeBox",value:function(e){if(e||(e=this.lastPanEvent),e&&this.selectBox){var t=this.getNewSelectorPosition(e);this.scrollAndRepositionSelector(t),this.selectIntersectingElements()}}},{key:"getNewSelectorPosition",value:function(e){var t,n=this.hammerToRelative(e),i=this.initial.x,r=this.initial.y,o=n.x,a=n.y;return i>o&&(t=o,o=i,i=t),r>a&&(t=a,a=r,r=t),{width:o-i,height:a-r,top:r,right:i+(o-i),bottom:r+(a-r),left:i}}},{key:"reachedAreaEdge",value:function(e){var t=this.rectToRelative(this.cache.filesContRect);return e.left<=t.left?"left":e.top<=t.top?"top":e.right>=t.right?"right":e.bottom>=t.bottom&&"bottom"}},{key:"scrollAndRepositionSelector",value:function(e){var t=this.cache.scrollCont,n=this.reachedAreaEdge(e);e.top+=this.initial.scrollTop,"bottom"===n?t.scrollBy({top:4}):"top"===n&&t.scrollBy({top:-4});var i=this.cache.scrollCont.scrollTop-this.initial.scrollTop,r=Math.abs(i);i<0&&(e.top-=r),e.height+=r,"left"===n||"right"===n||e.top+e.height>=this.cache.scrollCont.scrollHeight||this.applyPosition(e)}},{key:"applyPosition",value:function(e){this.selectBox.style.width=e.width+"px",this.selectBox.style.height=e.height+"px",this.selectBox.style.left=e.left+"px",this.selectBox.style.top=e.top+"px"}},{key:"selectIntersectingElements",value:function(){var e=this.selectBox.getBoundingClientRect();this.gridElements.forEach(function(t){var n=t.getBoundingClientRect();n.top+n.height>e.top&&n.left+n.width>e.left&&n.bottom-n.height<e.bottom&&n.right-n.width<e.right?t.classList.add("selected"):t.classList.remove("selected")})}},{key:"rectToRelative",value:function(e){return{width:e.width,height:e.height,left:e.left-this.cache.filesContRect.left,top:e.top-this.cache.filesContRect.top,right:e.right-this.cache.filesContRect.left,bottom:e.bottom-this.cache.filesContRect.top}}},{key:"hammerToRelative",value:function(e){return{x:e.center.x-this.cache.filesContRect.left,y:e.center.y-this.cache.filesContRect.top}}},{key:"dispatchSelectedAction",value:function(){var e=this.gridElements.filter(function(e){return e.classList.contains("selected")}).map(function(e){return+e.dataset.id}),t=this.store.selectSnapshot(it.entries).filter(function(t){return e.indexOf(t.id)>-1});this.store.dispatch(new be(t))}},{key:"createSelectBox",value:function(){this.selectBox=document.createElement("div"),this.selectBox.classList.add("files-select-box"),this.cache.filesCont.appendChild(this.selectBox)}},{key:"removeSelectBox",value:function(){this.selectBox&&(this.selectBox.remove(),this.selectBox=null)}},{key:"dragging",value:function(){return!!this.selectBox}},{key:"cacheClientRects",value:function(){this.cache.filesContRect=this.cache.filesCont.getBoundingClientRect(),this.cache.scrollContRect=this.cache.scrollCont.getBoundingClientRect()}},{key:"getGridElements",value:function(){return Array.from(this.cache.filesCont.querySelectorAll(".drive-entry"))}},{key:"bindScroll",value:function(){var e=this;this.scrollListener=function(){return e.resizeBox()},this.cache.scrollCont.addEventListener("scroll",this.scrollListener)}},{key:"unbindScroll",value:function(){this.cache.scrollCont.removeEventListener("scroll",this.scrollListener)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.yh),g.LFG(Oi))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),go=function(){var e=function(){function e(t,n){f(this,e),this.domCache=t,this.store=n}return s(e,[{key:"start",value:function(e){this.store.dispatch(new Oe)}},{key:"move",value:function(e){this.domCache.dragPreview.style.top=e.center.y+"px",this.domCache.dragPreview.style.left=e.center.x+"px"}},{key:"end",value:function(){this.store.dispatch(new Se)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(Oi),g.LFG(m.yh))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),mo=function(){var e=function(){function e(t,n,i,r,o,a){f(this,e),this.zone=t,this.el=n,this.store=i,this.dragSelect=r,this.dragEntry=o,this.domCache=a,this.subscriptions=[]}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.bindToHammer();var t=this.store.select(it.isMobile).subscribe(function(t){e.hammerManager.get("pan").set({enable:!t}),e.hammerManager.get("doubletap").set({enable:!t})});this.subscriptions.push(t)}},{key:"ngOnDestroy",value:function(){this.dragSelect.removeSelectBox(),this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"bindToHammer",value:function(){this.createHammerManager(),this.onPanStart(),this.onPan(),this.onPanEnd(),this.onTap(),this.onDoubleTap()}},{key:"createHammerManager",value:function(){var e=this;this.zone.runOutsideAngular(function(){e.hammerManager=new Hammer.Manager(e.domCache.filesCont);var t=new Hammer.Tap,n=new Hammer.Pan,i=new Hammer.Tap({event:"doubletap",taps:2});e.hammerManager.add([t,i,n]),e.hammerManager.get("doubletap").recognizeWith("tap")})}},{key:"onPanStart",value:function(){var e=this;this.hammerManager.on("panstart",function(t){var n=e.getEntryEl(t);if(n){e.panService=e.dragEntry;var i=e.getEntryByEl(n);e.store.selectSnapshot(it.selectedEntries).find(function(e){return e.id===i.id})||e.store.dispatch(new A([e.getEntryByEl(n)]))}else e.panService=e.dragSelect;e.panService.start(t)})}},{key:"onPan",value:function(){var e=this;this.hammerManager.on("pan",function(t){e.panService&&e.panService.move(t)})}},{key:"onPanEnd",value:function(){var e=this;this.hammerManager.on("panend",function(){e.panService&&e.panService.end()})}},{key:"onTap",value:function(){var e=this;this.hammerManager.on("tap",function(t){var n=e.getEntryEl(t);e.dragSelect.removeSelectBox(),n?e.store.dispatch(new we(e.getEntryByEl(n),t.srcEvent.ctrlKey||t.srcEvent.metaKey)):t.target.closest(".files-container")&&e.store.dispatch(new O)})}},{key:"onDoubleTap",value:function(){var e=this;this.hammerManager.on("doubletap",function(t){var n=e.getEntryEl(t);n&&e.store.dispatch(new xe(e.getEntryByEl(n)))})}},{key:"getEntryEl",value:function(e){return e.target.closest(".drive-entry")}},{key:"getEntryByEl",value:function(e){var t=+e.dataset.id;return this.store.selectSnapshot(it.entries).find(function(e){return e.id===+t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.R0b),g.Y36(g.SBq),g.Y36(m.yh),g.Y36(vo),g.Y36(go),g.Y36(Oi))},e.\u0275dir=g.lG2({type:e,selectors:[["","driveHammerInteractions",""]],contentQueries:function(e,t,n){var i;(1&e&&g.Suo(n,fo,5),2&e)&&(g.iGM(i=g.CRH())&&(t.gridItems=i))}}),e}(),yo=a(6097),bo=function(){function e(t){f(this,e),this.el=t}return s(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.selectedEntryIds.subscribe(function(t){var n=e.el.nativeElement.querySelectorAll(".drive-entry");n.length&&Array.from(n).forEach(function(e){t.indexOf(parseInt(e.dataset.id,10))>-1?e.classList.add("selected"):e.classList.remove("selected")})})}}]),e}();bo.\u0275fac=function(e){return new(e||bo)(g.Y36(g.SBq))},bo.\u0275dir=g.lG2({type:bo,selectors:[["","toggleSelectedClass",""]]}),(0,v.gn)([(0,m.Ph)(it.selectedEntryIds)],bo.prototype,"selectedEntryIds",void 0);var ko=a(83106);function wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,r,o,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r=e,new Promise(function(e){xo(r.createReader(),e)});case 2:i=n.sent,n.t0=regeneratorRuntime.keys(i);case 4:if((n.t1=n.t0()).done){n.next=19;break}if(o=n.t1.value,!(a=i[o]).isDirectory){n.next=12;break}return n.next=10,wo(a,t);case 10:n.next=17;break;case 12:return n.t2=t,n.next=15,_o(a);case 15:n.t3=n.sent,n.t2.push.call(n.t2,n.t3);case 17:n.next=4;break;case 19:return n.abrupt("return",t);case 20:case"end":return n.stop()}},n)}))}function xo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.readEntries(function(i){i.length?(n=n.concat(i),xo(e,t,n)):t(n)})}function _o(e){return new Promise(function(t){e.file(function(n){t(new ko.D(n,e.fullPath))})})}var Co=function(){var e=function(){function e(t){f(this,e),this.el=t,this.disableDropzoneClick=!1,this.disableDropzone=!1,this.uploadConfig={},this.filesDropped=new g.vpe}return s(e,[{key:"ngOnInit",value:function(){var e=this,t=this.el.nativeElement;t.addEventListener("dragenter",function(t){return e.handleDragEnter(t)}),t.addEventListener("dragover",function(t){return e.handleDragOver(t)}),t.addEventListener("dragleave",function(t){return e.handleDragLeave(t)}),t.addEventListener("drop",function(t){return e.handleDrop(t)}),this.disableDropzoneClick||(this.clickButton?this.clickButton.nativeElement:t).addEventListener("click",function(){return e.handleClick()})}},{key:"ngOnDestroy",value:function(){this.removeClassesFromDropzone()}},{key:"handleClick",value:function(){var e=this;this.disableDropzone||(0,Le.r)(this.uploadConfig).then(function(t){e.emitUploadEvent(t)})}},{key:"handleDragEnter",value:function(e){this.dropzoneDisabled(e)||this.el.nativeElement.classList.add("file-over-dropzone")}},{key:"handleDragOver",value:function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect=this.dropzoneDisabled(e)?"none":"move",!1}},{key:"handleDragLeave",value:function(e){var t=document.elementFromPoint(e.clientX,e.clientY);this.el.nativeElement.contains(t)||this.removeClassesFromDropzone()}},{key:"handleDrop",value:function(e){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),e.preventDefault(),this.removeClassesFromDropzone(),!this.dropzoneDisabled(e)&&e.dataTransfer.items){t.next=2;break}return t.abrupt("return");case 2:if(n=Array.from(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return e.webkitGetAsEntry()}),t.t0=n.length,!t.t0){t.next=10;break}return t.t1=this,t.next=8,function(e){return(0,v.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],t.t0=regeneratorRuntime.keys(e);case 2:if((t.t1=t.t0()).done){t.next=20;break}if(i=t.t1.value,!(r=e[i]).isDirectory){t.next=13;break}return t.t2=n,t.next=9,wo(r);case 9:t.t3=t.sent,n=t.t2.concat.call(t.t2,t.t3),t.next=18;break;case 13:return t.t4=n,t.next=16,_o(r);case 16:t.t5=t.sent,t.t4.push.call(t.t4,t.t5);case 18:t.next=2;break;case 20:return t.abrupt("return",n);case 21:case"end":return t.stop()}},t)}))}(n);case 8:t.t2=t.sent,t.t1.emitUploadEvent.call(t.t1,t.t2);case 10:case"end":return t.stop()}},t,this)}))}},{key:"emitUploadEvent",value:function(e){this.filesDropped.emit(e)}},{key:"removeClassesFromDropzone",value:function(){this.el.nativeElement.classList.remove("file-over-dropzone")}},{key:"dropzoneDisabled",value:function(e){var t=e.dataTransfer.types.find(function(e){return"files"===e.toLowerCase()});return this.disableDropzone||!t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq))},e.\u0275dir=g.lG2({type:e,selectors:[["","fileDropzone",""]],inputs:{disableDropzoneClick:"disableDropzoneClick",disableDropzone:"disableDropzone",clickButton:"clickButton",uploadConfig:["fileDropzone","uploadConfig"]},outputs:{filesDropped:"filesDropped"}}),e}(),Ao=function(){var e=function(){function e(){f(this,e),this.threshold=50}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.el||(this.el=new g.SBq(document)),this.zone.runOutsideAngular(function(){e.scrollSub=(0,ui.R)(e.getScrollContainer(),"scroll",{capture:!0,passive:!0}).pipe((0,Pi.b)(20)).subscribe(function(t){return e.onScroll(t.target)})})}},{key:"ngOnDestroy",value:function(){this.scrollSub&&this.scrollSub.unsubscribe()}},{key:"getScrollContainer",value:function(){return this.el?this.el.nativeElement:document}},{key:"onScroll",value:function(e){var t=this;if(e&&e===this.el.nativeElement&&this.canLoadMore()&&!this.isLoading()){var n=parseInt(this.threshold),i=this.el&&void 0!==e.scrollTop;(i?e.scrollTop+e.offsetHeight:window.scrollY+window.innerHeight)>=(i?e.scrollHeight-n:document.documentElement.scrollHeight-n)&&this.zone.run(function(){t.loadMoreItems()})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=g.lG2({type:e}),e}(),Zo=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r){var o;return f(this,n),(o=t.call(this)).el=e,o.store=i,o.zone=r,o}return s(n,[{key:"loadMoreItems",value:function(){var e=this.store.selectSnapshot(it.currentPage)+1;this.store.dispatch(new V({page:e}))}},{key:"isLoading",value:function(){return this.store.selectSnapshot(it.loading)}},{key:"canLoadMore",value:function(){return this.store.selectSnapshot(it.canLoadMoreEntries)}}]),n}(Ao);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36(m.yh),g.Y36(g.R0b))},e.\u0275dir=g.lG2({type:e,selectors:[["","driveInfiniteScroll",""]],features:[g.qOj]}),e}(),Oo=function(){var e=function e(t,n,i){f(this,e),this.data=t,this.store=n,this.currentUser=i,this.contextMenu=!0,this.store.dispatch(this.data&&this.data.entry?new Ce(this.data.entry):new O)};return e.\u0275fac=function(t){return new(t||e)(g.Y36(ai,8),g.Y36(m.yh),g.Y36(Ye.I))},e.\u0275cmp=g.Xpm({type:e,selectors:[["drive-context-menu"]],hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("context-menu",t.contextMenu)},decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"context-actions-container")},encapsulation:2,changeDetection:0}),e}(),So=a(19244);function Io(e,t){1&e&&g._UZ(0,"skeleton"),2&e&&g.Q6J("@fadeOut",void 0)}function To(e,t){1&e&&g._UZ(0,"mat-icon",9)}function Eo(e,t){1&e&&g._UZ(0,"mat-icon",10)}function Po(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"div",4,5),g.NdJ("click",function(){var e=g.CHM(n),t=e.last,i=e.$implicit,r=g.MAs(2),o=g.oxw(2);return t?o.openContextMenu(i,r):o.openPage(i)}),g.TgZ(3,"span",6),g._uU(4),g.ALo(5,"trans"),g.qZA(),g.YNc(6,To,1,0,"mat-icon",7),g.qZA(),g.YNc(7,Eo,1,0,"mat-icon",8),g.BQk()}if(2&e){var i=t.$implicit,r=t.last,o=t.first;g.xp6(1),g.ekj("no-action",!i.hasActions),g.xp6(3),g.Oqu(o?g.lcZ(5,5,i.viewName):i.viewName),g.xp6(2),g.Q6J("ngIf",r&&i.hasActions),g.xp6(1),g.Q6J("ngIf",!r)}}function Fo(e,t){if(1&e&&(g.TgZ(0,"div",2),g.YNc(1,Po,8,7,"ng-container",3),g.ALo(2,"async"),g.qZA()),2&e){var n=g.oxw();g.Q6J("@fadeIn",void 0),g.xp6(1),g.Q6J("ngForOf",g.lcZ(2,2,n.breadcrumb))}}var Mo=function(){var t=function(){function t(e,n,i,r,o){f(this,t),this.entriesApi=e,this.i18n=n,this.contextMenu=i,this.store=r,this.workspaces=o,this.breadcrumb=new vt.X([]),this.loading$=new vt.X(!0)}return s(t,[{key:"ngOnInit",value:function(){var t=this;(0,Fi.aj)([this.store.select(it.meta),this.store.select(it.userFoldersLoaded),this.workspaces.activeWorkspace$]).pipe((0,ht.h)(function(t){var n=e(t,3),i=n[0],r=n[1],o=n[2];return i.currentPage&&r&&!!o}),(0,On.q)(1)).subscribe(function(){t.loading$.next(!1),t.bindToActivePage()})}},{key:"ngOnDestroy",value:function(){this.activePageSub&&this.activePageSub.unsubscribe()}},{key:"openPage",value:function(e){this.store.dispatch(e.folder?new _(e.folder):new Mi.Fg(["/drive/shares"]))}},{key:"openContextMenu",value:function(e,t){var n={originX:"start",overlayX:"start"};switch(e.name){case"trash":return this.contextMenu.open(Oo,t,n);case"folder":return n=Object.assign({data:{entry:this.store.selectSnapshot(it.activeFolder)}},n),this.contextMenu.open(Oo,t,n)}}},{key:"generateBreadCrumb",value:function(e){var t,n=[this.getRootBreadcrumb(e)];if(null===(t=e.folder)||void 0===t?void 0:t.id){var r=this.getBreadcrumbForFolder(e.folder);n.push.apply(n,i(r))}this.breadcrumb.next(n)}},{key:"getBreadcrumbForFolder",value:function(e){var t=this.store.selectSnapshot(it.flatFolders)||[];return(e.path?e.path.split("/"):[e.id]).map(function(n){var i=e.id===+n?e:t.find(function(e){return e.id===+n});if(i)return new de(i)}).filter(function(e){return!!e})}},{key:"getRootBreadcrumb",value:function(e){if("folder"===e.name){var t=this.workspaces.activeId$.value,n=new de(this.store.selectSnapshot(it.rootFolder));return t&&e.folder.workspace_id===t?Object.assign(Object.assign({},n),{viewName:this.workspaces.activeWorkspace$.value.name}):this.store.selectSnapshot(it.userOwnsActiveFolder)?n:se}return e}},{key:"bindToActivePage",value:function(){var t=this;this.activePageSub=(0,Fi.aj)([this.store.select(it.activePage),this.store.select(it.flatFolders)]).pipe((0,Ti.x)(),(0,ht.h)(function(t){var n,i=e(t,1)[0];return"folder"!==i.name||(null===(n=i.folder)||void 0===n?void 0:n.name)})).subscribe(function(n){var i=e(n,1)[0];t.generateBreadCrumb(i)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.Y36(Qe),g.Y36(So.Z),g.Y36(ci),g.Y36(m.yh),g.Y36(tt.b))},t.\u0275cmp=g.Xpm({type:t,selectors:[["entry-breadcrumbs"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["breadcrumbs",""],[1,"breadcrumb-container"],[4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"click"],["button",""],[1,"name"],["svgIcon","arrow-drop-down",4,"ngIf"],["class","separator","svgIcon","keyboard-arrow-right",4,"ngIf"],["svgIcon","arrow-drop-down"],["svgIcon","keyboard-arrow-right",1,"separator"]],template:function(e,t){if(1&e&&(g.YNc(0,Io,1,1,"skeleton",0),g.ALo(1,"async"),g.YNc(2,Fo,3,4,"ng-template",null,1,g.W1O)),2&e){var n=g.MAs(3);g.Q6J("ngIf",g.lcZ(1,2,t.loading$))("ngIfElse",n)}},directives:[d.O5,wr._,d.sg,at.Hw],pipes:[d.Ov,Ht.R],styles:["[_nghost-%COMP%]{display:block;position:relative;min-height:33px;max-width:100%;overflow:hidden}.breadcrumb-container[_ngcontent-%COMP%]{display:flex;align-items:center}skeleton.text[_ngcontent-%COMP%]{position:absolute;max-width:250px;height:1.8rem;margin:auto 0;top:0;bottom:0}.breadcrumb-item[_ngcontent-%COMP%]{font-size:1.8rem;color:var(--be-text);border-radius:8px;padding:4px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}.breadcrumb-item[_ngcontent-%COMP%]:hover{background-color:var(--be-hover)}.breadcrumb-item[_ngcontent-%COMP%]:first-of-type{text-transform:capitalize}.breadcrumb-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle}.breadcrumb-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .separator[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],data:{animation:[br]},changeDetection:0}),t}(),Uo=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["drive-toolbar"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"entry-breadcrumbs")},directives:[Mo],styles:["drive-toolbar{display:block;padding:14px 28px;width:100%;overflow:hidden}drive-toolbar entry-breadcrumbs{margin:0 -8px}"],encapsulation:2,changeDetection:0}),e}(),Do=[{name:"file_size",viewName:"Size"},{name:"name",viewName:"Name"},{name:"updated_at",viewName:"Last Modified"},{name:"created_at",viewName:"Upload Date"},{name:"type",viewName:"Type"},{name:"extension",viewName:"Extension"}];function Lo(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",9),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw(2).changeSort(e)}),g._UZ(1,"mat-icon",10),g.TgZ(2,"span",11),g._uU(3),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit,r=g.oxw().ngIf;g.ekj("active",r.column===i.name),g.xp6(3),g.Oqu(i.viewName)}}function qo(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"span",1),g._uU(2,"Sort by"),g.qZA(),g.TgZ(3,"button",2),g.TgZ(4,"span",3),g.TgZ(5,"span"),g._uU(6),g.ALo(7,"trans"),g.qZA(),g._UZ(8,"mat-icon",4),g.qZA(),g._UZ(9,"mat-icon",5),g.qZA(),g.TgZ(10,"mat-menu",6,7),g.TgZ(12,"div",8),g._uU(13,"Direction"),g.qZA(),g.TgZ(14,"button",9),g.NdJ("click",function(){return g.CHM(n),g.oxw().changeDirection("asc")}),g._UZ(15,"mat-icon",10),g.TgZ(16,"span",11),g._uU(17,"Ascending"),g.qZA(),g.qZA(),g.TgZ(18,"button",9),g.NdJ("click",function(){return g.CHM(n),g.oxw().changeDirection("desc")}),g._UZ(19,"mat-icon",10),g.TgZ(20,"span",11),g._uU(21,"Descending"),g.qZA(),g.qZA(),g._UZ(22,"div",12),g.TgZ(23,"div",8),g._uU(24,"Sort By"),g.qZA(),g.YNc(25,Lo,4,3,"button",13),g.qZA(),g.BQk()}if(2&e){var i=t.ngIf,r=g.MAs(11),o=g.oxw();g.xp6(3),g.Q6J("matMenuTriggerFor",r)("disabled",o.btnDisabled),g.xp6(3),g.Oqu(g.lcZ(7,8,o.getSortViewName(i.column))),g.xp6(8),g.ekj("active","asc"===i.direction),g.xp6(4),g.ekj("active","desc"===i.direction),g.xp6(7),g.Q6J("ngForOf",o.availableSorts)}}var No={column:"updated_at",direction:"desc"},$o=function(){var e=function(){function e(){f(this,e),this.btnDisabled=!1,this.availableSorts=Do,this.sort$=new vt.X(No)}return s(e,[{key:"changeSort",value:function(e){this.sort$.next(Object.assign(Object.assign({},this.sort$.value),{column:e.name})),this.propagateChange(this.sort$.value)}},{key:"changeDirection",value:function(e){this.sort$.next(Object.assign(Object.assign({},this.sort$.value),{direction:e})),this.propagateChange(this.sort$.value)}},{key:"getSortViewName",value:function(e){return this.availableSorts.find(function(t){return t.name===e}).viewName}},{key:"writeValue",value:function(e){this.sort$.next(e||No)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["entries-sort-button"]],inputs:{btnDisabled:"btnDisabled"},features:[g._Bn([{provide:Pt.JU,useExisting:e,multi:!0}])],decls:2,vars:3,consts:[[4,"ngIf"],["trans","",1,"label"],[1,"no-style",3,"matMenuTriggerFor","disabled"],[1,"sort-button-content"],["svgIcon","keyboard-arrow-down",1,"arrow-icon"],["svgIcon","sort",1,"mobile-sort-button-content"],[1,"drive-sort-menu"],["menu","matMenu"],["trans","",1,"title"],["mat-menu-item","",3,"click"],["svgIcon","check"],["trans",""],[1,"separator"],["mat-menu-item","",3,"active","click",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(g.YNc(0,qo,26,10,"ng-container",0),g.ALo(1,"async")),2&e&&g.Q6J("ngIf",g.lcZ(1,1,t.sort$))},directives:[d.O5,qt.P,Bt.p6,at.Hw,Bt.VK,Bt.OP,d.sg],pipes:[d.Ov,Ht.R],styles:["entries-sort-button{display:inline-block}entries-sort-button .label{color:var(--be-secondary-text);padding-right:3px}entries-sort-button .arrow-icon{width:14px;height:14px;position:relative;top:2px}entries-sort-button button:disabled{color:var(--be-secondary-text);cursor:default}entries-sort-button .mobile-sort-button-content,entries-sort-button button:disabled .mat-icon{display:none}.drive-sort-menu .mat-menu-item{padding-left:8px;line-height:35px;height:35px;font-size:1.5rem}.drive-sort-menu .mat-menu-item.active{color:var(--be-accent-default)}.drive-sort-menu .mat-menu-item.active .mat-icon{visibility:visible;color:inherit}.drive-sort-menu .mat-menu-item .mat-icon{visibility:hidden;margin-right:8px;width:20px;height:20px}.drive-sort-menu .separator{height:1px;background-color:var(--be-divider-default);margin:5px 0 20px}.drive-sort-menu .title{text-transform:uppercase;padding-left:32px;font-size:1.2rem;font-weight:500;margin-bottom:10px}"],encapsulation:2,changeDetection:0}),e}(),Bo=["moreActionsButton"];function Ro(e,t){1&e&&g._UZ(0,"div",5)}function Yo(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",6),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).$implicit.execute()}),g._UZ(1,"mat-icon",7),g.TgZ(2,"span",8),g._uU(3),g.qZA(),g.qZA()}if(2&e){var i=g.oxw(2).$implicit;g.xp6(1),g.Q6J("svgIcon",i.icon),g.xp6(2),g.Oqu(i.viewName)}}function jo(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",9),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).$implicit.execute()}),g.ALo(1,"trans"),g._UZ(2,"mat-icon",7),g.qZA()}if(2&e){var i=g.oxw(2).$implicit;g.Q6J("matTooltip",g.lcZ(1,2,i.viewName)),g.xp6(2),g.Q6J("svgIcon",i.icon)}}function Qo(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Ro,1,0,"div",3),g.YNc(2,Yo,4,2,"button",4),g.YNc(3,jo,3,4,"button",1),g.BQk()),2&e){var n=g.oxw().$implicit,i=g.oxw();g.xp6(1),g.Q6J("ngIf",!i.compact&&n.separatorBefore),g.xp6(1),g.Q6J("ngIf",!i.compact),g.xp6(1),g.Q6J("ngIf",i.compact&&n.showInCompact)}}function Jo(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Qo,4,3,"ng-container",2),g.BQk()),2&e){var n=t.$implicit;g.xp6(1),g.Q6J("ngIf",n.visible())}}function Vo(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",9,10),g.NdJ("click",function(){return g.CHM(n),g.oxw().openMoreActionsMenu()}),g.ALo(2,"trans"),g._UZ(3,"mat-icon",11),g.qZA()}2&e&&g.Q6J("matTooltip",g.lcZ(2,1,"More actions"))}var zo=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.store=t,this.injector=n,this.contextMenu=i,this.compact=!1,this.hasMoreActions$=new vt.X(!1),this.actions$=new vt.X([]),this.subscription=(0,Fi.aj)([this.store.select(it.activePage),this.store.select(it.selectedEntry)]).subscribe(function(e){r.setActions(e[0],e[1]),r.hasMoreActions$.next(r.actions$.value.some(function(e){return!e.showInCompact}))})}return s(e,[{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"openMoreActionsMenu",value:function(){var e=this.store.selectSnapshot(it.selectedEntryOrActiveFolder);this.contextMenu.open(Oo,this.moreActionsButton.nativeElement,{data:{entry:e}})}},{key:"setActions",value:function(e,t){"trash"!==(null==e?void 0:e.name)||t?"trash"===(null==e?void 0:e.name)&&t?this.actions$.next(this.injector.get(Ai).getActions()):"shares"===(null==e?void 0:e.name)&&t?this.setActionsForEntry():(null==e?void 0:e.folder)&&!(null==t?void 0:t.id)?this.actions$.next(this.injector.get(xi).getActions()):"starred"===(null==e?void 0:e.name)||"recent"===(null==e?void 0:e.name)?this.actions$.next(this.injector.get(wi).getActions()):t?this.setActionsForEntry():this.actions$.next([]):this.actions$.next(this.injector.get(Zi).getActions())}},{key:"setActionsForEntry",value:function(){var e,t=this,n=this.store.selectSnapshot(it.selectedEntries).length?this.store.selectSnapshot(it.selectedEntries):[this.store.selectSnapshot(it.activeFolder)],i=this.store.selectSnapshot(it.selectedEntries).length?this.store.selectSnapshot(it.userOwnsSelectedEntries):this.store.selectSnapshot(it.userOwnsActiveFolder);(null===(e=this.store.selectSnapshot(it.activeWorkspace))||void 0===e?void 0:e.id)&&(i=n.every(function(e){var n;return e.workspace_id===(null===(n=t.store.selectSnapshot(it.activeWorkspace))||void 0===n?void 0:n.id)})),this.actions$.next(i?this.injector.get(wi).getActions():this.injector.get(Ci).getActions())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(g.zs3),g.Y36(ci))},e.\u0275cmp=g.Xpm({type:e,selectors:[["context-actions-container"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Bo,5,g.SBq),2&e)&&(g.iGM(n=g.CRH())&&(t.moreActionsButton=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("compact",t.compact)},inputs:{compact:"compact"},decls:4,vars:6,consts:[[4,"ngFor","ngForOf"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],[4,"ngIf"],["class","separator",4,"ngIf"],["class","context-menu-item",3,"click",4,"ngIf"],[1,"separator"],[1,"context-menu-item",3,"click"],[3,"svgIcon"],["trans",""],["mat-icon-button","",3,"matTooltip","click"],["moreActionsButton",""],["svgIcon","more-vert"]],template:function(e,t){1&e&&(g.YNc(0,Jo,2,1,"ng-container",0),g.ALo(1,"async"),g.YNc(2,Vo,4,3,"button",1),g.ALo(3,"async")),2&e&&(g.Q6J("ngForOf",g.lcZ(1,2,t.actions$)),g.xp6(2),g.Q6J("ngIf",g.lcZ(3,4,t.compact&&t.hasMoreActions$)))},directives:[d.sg,d.O5,at.Hw,qt.P,Nt.lW,Rr.gM],pipes:[d.Ov,Ht.R],encapsulation:2,changeDetection:0}),e}(),Ho=["moreActionsButton"],Go=function(){function e(t,n){f(this,e),this.store=t,this.contextMenu=n}return s(e,[{key:"toggleViewMode",value:function(){var e=this.store.selectSnapshot(it.viewMode);this.store.dispatch(new U("list"===e?"grid":"list"))}},{key:"ToggleDetails",value:function(){this.store.dispatch(new D)}},{key:"openMoreActionsMenu",value:function(){var e=this.store.selectSnapshot(it.selectedEntry);this.contextMenu.open(Oo,this.moreActionsButton.nativeElement,{data:{entry:e}})}}]),e}();Go.\u0275fac=function(e){return new(e||Go)(g.Y36(m.yh),g.Y36(ci))},Go.\u0275cmp=g.Xpm({type:Go,selectors:[["toolbar-actions"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Ho,5,g.SBq),2&e)&&(g.iGM(n=g.CRH())&&(t.moreActionsButton=n.first))},decls:8,vars:8,consts:[[3,"compact"],[1,"always-visible-actions"],["mat-icon-button","",3,"click"],[3,"svgIcon"],["svgIcon","info"]],template:function(e,t){1&e&&(g._UZ(0,"context-actions-container",0),g.TgZ(1,"div",1),g.TgZ(2,"button",2),g.NdJ("click",function(){return t.toggleViewMode()}),g._UZ(3,"mat-icon",3),g.ALo(4,"async"),g.qZA(),g.TgZ(5,"button",2),g.NdJ("click",function(){return t.ToggleDetails()}),g.ALo(6,"async"),g._UZ(7,"mat-icon",4),g.qZA(),g.qZA()),2&e&&(g.Q6J("compact",!0),g.xp6(3),g.Q6J("svgIcon","list"===g.lcZ(4,4,t.viewMode)?"view-list":"view-module"),g.xp6(2),g.ekj("active",g.lcZ(6,6,t.activityOpen)))},directives:[zo,Nt.lW,at.Hw],pipes:[d.Ov],styles:["toolbar-actions{display:flex;align-items:center;color:var(--be-secondary-text)}toolbar-actions context-actions-container{border-right:1px solid var(--be-divider-default);padding-right:5px;margin-right:5px}toolbar-actions .always-visible-actions .active{color:var(--be-accent-default)}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.anythingSelected)],Go.prototype,"anythingSelected",void 0),(0,v.gn)([(0,m.Ph)(it.viewMode)],Go.prototype,"viewMode",void 0),(0,v.gn)([(0,m.Ph)(it.detailsOpen)],Go.prototype,"activityOpen",void 0),(0,v.gn)([(0,m.Ph)(it.multipleEntriesSelected)],Go.prototype,"multipleEntriesSelected$",void 0);var Wo=function(){function t(e){f(this,t),this.store=e,this.sortFormControl=new Pt.NI({column:this.store.selectSnapshot(it.sortColumn),direction:this.store.selectSnapshot(it.sortDirection)})}return s(t,[{key:"ngOnInit",value:function(){var t=this;(0,Fi.aj)([this.store.select(it.sortColumn),this.store.select(it.sortDirection)]).subscribe(function(n){var i=e(n,2),r=i[0],o=i[1];t.sortFormControl.setValue({column:r,direction:o},{emitEvent:!1})}),this.sortFormControl.valueChanges.subscribe(function(e){t.store.dispatch(new z({orderBy:e.column,orderDir:e.direction}))})}}]),t}();Wo.\u0275fac=function(e){return new(e||Wo)(g.Y36(m.yh))},Wo.\u0275cmp=g.Xpm({type:Wo,selectors:[["file-list-header"]],decls:4,vars:4,consts:[[1,"sort-header"],[3,"btnDisabled","formControl"]],template:function(e,t){var n;(1&e&&(g.TgZ(0,"div",0),g._UZ(1,"entries-sort-button",1),g.ALo(2,"async"),g.qZA(),g._UZ(3,"toolbar-actions")),2&e)&&(g.xp6(1),g.Q6J("btnDisabled",null==(n=g.lcZ(2,2,t.activePage$))?null:n.disableSort)("formControl",t.sortFormControl))},directives:[$o,Pt.JJ,Pt.oH,Go],pipes:[d.Ov],styles:["file-list-header{display:flex;align-items:center;border-bottom:1px solid var(--be-divider-default);padding-bottom:8px;margin:0 28px;color:var(--be-text);max-height:49px}file-list-header toolbar-actions{margin-left:auto}@media only screen and (max-width:450px){file-list-header entries-sort-button .label,file-list-header entries-sort-button .sort-button-content{display:none}file-list-header entries-sort-button .mobile-sort-button-content{display:inline-block}}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.sortColumn)],Wo.prototype,"sortColumn$",void 0),(0,v.gn)([(0,m.Ph)(it.activePage)],Wo.prototype,"activePage$",void 0);var Xo=["scrollContainer"],Ko=["filesContainer"];function ea(e,t){1&e&&(g.ynx(0),g._UZ(1,"drive-toolbar"),g._UZ(2,"file-list-header"),g.BQk())}var ta=[wi,xi,Ci,Ai,Zi],na=function(){function e(t,n,i,r,o,a,s,c){f(this,e),this.store=t,this.route=n,this.currentUser=i,this.localStorage=r,this.domCache=o,this.breakpoints=a,this.workspaces=s,this.settings=c,this.subscriptions=[]}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.setViewMode(),this.cacheDemoElements(),this.observeBreakpointChanges(),this.bindToWorkspace(),this.store.dispatch(new k),this.store.dispatch(new w),this.store.dispatch(new te(this.currentUser.getModel())),this.currentUser.model$.subscribe(function(t){e.store.dispatch(new te(t))})}},{key:"ngOnDestroy",value:function(){this.store.dispatch(K),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions=[]}},{key:"uploadFiles",value:function(e){this.store.dispatch(new q(e))}},{key:"toggleSidebar",value:function(){this.store.dispatch(new L)}},{key:"cacheDemoElements",value:function(){this.domCache.filesCont=this.filesContainer.nativeElement,this.domCache.scrollCont=this.scrollContainer.nativeElement,this.domCache.dragPreview=this.dragPreview.nativeElement}},{key:"setViewMode",value:function(){this.store.dispatch(new U(this.localStorage.get("bedrive.viewMode",this.settings.get("drive.default_view","grid"))))}},{key:"observeBreakpointChanges",value:function(){var e=this,t=this.breakpoints.observe("(max-width: 1100px)").subscribe(function(t){e.store.dispatch(new Ue({isMobile:t.matches}))});this.subscriptions.push(t)}},{key:"bindToWorkspace",value:function(){var e=this,t=this.workspaces.activeId$.pipe((0,pt.T)(1)).subscribe(function(){e.store.dispatch([new z({},new de(e.store.selectSnapshot(it.rootFolder))),new Me,new k])}),n=this.workspaces.activeWorkspace$.pipe((0,ht.h)(function(e){return!!e})).subscribe(function(t){e.store.dispatch(new ne(t))}),i=this.workspaces.bindToNotificationClick();this.subscriptions.push(t,i,n)}}]),e}();na.\u0275fac=function(e){return new(e||na)(g.Y36(m.yh),g.Y36(p.gz),g.Y36(Ye.I),g.Y36(ze.m),g.Y36(Oi),g.Y36(Si.Yg),g.Y36(tt.b),g.Y36(Dt.Z))},na.\u0275cmp=g.Xpm({type:na,selectors:[["drive"]],viewQuery:function(e,t){var n;(1&e&&(g.Gf(Xo,7,g.SBq),g.Gf(Ko,7),g.Gf(dt,7,g.SBq)),2&e)&&(g.iGM(n=g.CRH())&&(t.scrollContainer=n.first),g.iGM(n=g.CRH())&&(t.filesContainer=n.first),g.iGM(n=g.CRH())&&(t.dragPreview=n.first))},features:[g._Bn([].concat(ta,[ci,tt.b]))],decls:27,vars:34,consts:[["menuPosition","drive-navbar",3,"showToggleButton","toggleButtonClick"],[1,"left-sidebar",3,"mode","opened"],["position","end",1,"right-sidebar",3,"opened","mode"],["driveHammerInteractions",""],["slot","ads.drive"],[4,"ngIf"],[1,"loading-overlay-container"],["toggleSelectedClass","","contextMenu","entry","fileDropzone","","driveInfiniteScroll","",1,"files-container",3,"disableContextMenu","disableDropzoneClick","disableDropzone","filesDropped"],["filesContainer","","scrollContainer",""],[1,"overlay",3,"isVisible"]],template:function(e,t){var n;(1&e&&(g.TgZ(0,"material-navbar",0),g.NdJ("toggleButtonClick",function(){return t.toggleSidebar()}),g.ALo(1,"async"),g._UZ(2,"main-searchbar"),g.qZA(),g.TgZ(3,"mat-sidenav-container"),g.TgZ(4,"mat-sidenav",1),g.ALo(5,"async"),g.ALo(6,"async"),g._UZ(7,"sidebar"),g.qZA(),g.TgZ(8,"mat-sidenav",2),g.ALo(9,"async"),g.ALo(10,"async"),g._UZ(11,"details-sidebar"),g.qZA(),g.TgZ(12,"mat-sidenav-content",3),g._UZ(13,"ad-host",4),g.YNc(14,ea,3,0,"ng-container",5),g.ALo(15,"async"),g.TgZ(16,"div",6),g.TgZ(17,"div",7,8),g.NdJ("filesDropped",function(e){return t.uploadFiles(e)}),g.ALo(20,"async"),g.ALo(21,"async"),g.ALo(22,"async"),g._UZ(23,"router-outlet"),g.qZA(),g._UZ(24,"loading-indicator",9),g.ALo(25,"async"),g.qZA(),g.qZA(),g.qZA(),g._UZ(26,"entry-drag-preview")),2&e)&&(g.Q6J("showToggleButton",g.lcZ(1,14,t.isMobile$)),g.xp6(4),g.Q6J("mode",g.lcZ(5,16,t.isMobile$)?"over":"side")("opened",g.lcZ(6,18,t.sidebarOpen$)),g.xp6(4),g.Q6J("opened",g.lcZ(9,20,t.activityOpen$))("mode",g.lcZ(10,22,t.isMobile$)?"over":"side"),g.xp6(4),g.ekj("has-rek",t.settings.has("ads.drive")),g.xp6(2),g.Q6J("ngIf","workspaces"!==(null==(n=g.lcZ(15,24,t.activePage$))?null:n.name)),g.xp6(3),g.ekj("dragging",g.lcZ(20,26,t.dragging)),g.Q6J("disableContextMenu",!g.lcZ(21,28,t.canUpload$))("disableDropzoneClick",!0)("disableDropzone",!g.lcZ(22,30,t.canUpload$)),g.xp6(7),g.Q6J("isVisible",g.lcZ(25,32,t.loading$)))},directives:[Ii.e,Ni,hr,pr,Br,ho,dr,mo,yo.i,d.O5,bo,li,Co,Zo,p.lC,xn.Q,dt,Uo,Wo],pipes:[d.Ov],styles:["drive{display:block;width:100%;height:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}drive .loading-overlay-container{position:relative;height:calc(100% - 106px)}drive .has-rek ad-host{margin-top:25px}drive .has-rek .loading-overlay-container{height:calc(100% - 281px)}drive .mat-sidenav-container{width:100%;height:calc(100% - 70px)}drive .mat-sidenav-container .left-sidebar{width:220px;flex:0 0 220px;border-right:1px solid var(--be-divider-default)}drive .mat-sidenav-container .right-sidebar{width:300px;flex:0 0 300px;border-left:1px solid var(--be-divider-default);background-color:var(--be-background);color:var(--be-text)}drive .mat-sidenav-container .mat-sidenav-content{position:relative;width:auto;overflow:hidden;height:100%;background-color:var(--be-background)}drive .files-container{height:calc(100% - 4px);border:2px solid transparent;overflow-x:hidden;overflow-y:auto;position:relative;padding:26px}drive .files-container.dragging .selected{opacity:.4}drive .files-container.file-over-dropzone{border-color:var(--be-accent-default);background-color:var(--be-accent-emphasis)}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.dragging)],na.prototype,"dragging",void 0),(0,v.gn)([(0,m.Ph)(it.detailsOpen)],na.prototype,"activityOpen$",void 0),(0,v.gn)([(0,m.Ph)(it.sidebarOpen)],na.prototype,"sidebarOpen$",void 0),(0,v.gn)([(0,m.Ph)(it.loading)],na.prototype,"loading$",void 0),(0,v.gn)([(0,m.Ph)(it.isMobile)],na.prototype,"isMobile$",void 0),(0,v.gn)([(0,m.Ph)(it.canUpload)],na.prototype,"canUpload$",void 0),(0,v.gn)([(0,m.Ph)(it.activePage)],na.prototype,"activePage$",void 0);var ia=a(63868),ra=function(e){return{type:"entry",entry:e}};function oa(e,t){if(1&e&&g._UZ(0,"files-grid-item",1),2&e){var n=t.$implicit,i=g.oxw();g.Q6J("entry",n)("contextMenu",g.VKq(4,ra,n))("disableContextMenu",i.disableInteractions)("folderDropTarget",n)}}var aa=function(){var e=function(){function e(){f(this,e),this.disableInteractions=!1}return s(e,[{key:"trackById",value:function(e,t){return t.id}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["files-grid"]],inputs:{entries:"entries",disableInteractions:"disableInteractions"},decls:1,vars:2,consts:[[3,"entry","contextMenu","disableContextMenu","folderDropTarget",4,"ngFor","ngForOf","ngForTrackBy"],[3,"entry","contextMenu","disableContextMenu","folderDropTarget"]],template:function(e,t){1&e&&g.YNc(0,oa,1,6,"files-grid-item",0),2&e&&g.Q6J("ngForOf",t.entries)("ngForTrackBy",t.trackById)},directives:[d.sg,fo,li,pi],styles:["files-grid{display:flex;flex-wrap:wrap;align-content:flex-start;margin:-8px}files-grid:empty{margin:0}"],encapsulation:2,changeDetection:0}),e}(),sa=a(99883),ca=a(1303);function la(e,t){1&e&&(g._UZ(0,"mat-icon",14),g.ALo(1,"trans")),2&e&&g.Q6J("matTooltip",g.lcZ(1,1,"Starred"))}var ua=function(e){return{type:"entry",entry:e}};function da(e,t){if(1&e&&(g.TgZ(0,"tr",5),g.TgZ(1,"td",6),g.TgZ(2,"div",7),g._UZ(3,"file-thumbnail",8),g.TgZ(4,"div",9),g.TgZ(5,"span",10),g._uU(6),g.qZA(),g.YNc(7,la,2,3,"mat-icon",11),g.qZA(),g.qZA(),g.qZA(),g.TgZ(8,"td",12),g._uU(9),g.ALo(10,"formattedDate"),g.qZA(),g.TgZ(11,"td",13),g._uU(12),g.ALo(13,"formattedFileSize"),g.qZA(),g.qZA()),2&e){var n=t.$implicit,i=g.oxw();g.Q6J("contextMenu",g.VKq(13,ua,n))("disableContextMenu",i.disableInteractions)("folderDropTarget",n),g.uIk("data-id",n.id),g.xp6(3),g.Q6J("file",n),g.xp6(3),g.Oqu(n.name),g.xp6(1),g.Q6J("ngIf",i.isStarred(n)),g.xp6(2),g.Oqu(g.lcZ(10,9,n.updated_at)),g.xp6(3),g.Oqu(g.lcZ(13,11,n.file_size))}}var pa=function(){var e=function(){function e(t,n){f(this,e),this.store=t,this.datatable=n,this.disableInteractions=!1}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.datatable.init({disableSort:this.disableInteractions}),this.datatable.sort$.pipe((0,ht.h)(function(e){return!!Object.keys(e).length})).subscribe(function(t){e.store.dispatch(new z(t))})}},{key:"ngOnDestroy",value:function(){this.datatable.destroy()}},{key:"isStarred",value:function(e){return!!e.tags&&!!e.tags.find(function(e){return"starred"===e.name})}},{key:"trackById",value:function(e,t){return t.id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(sa.x))},e.\u0275cmp=g.Xpm({type:e,selectors:[["files-list"]],inputs:{entries:"entries",disableInteractions:"disableInteractions"},features:[g._Bn([sa.x])],decls:11,vars:2,consts:[[1,"material-table"],["table-sort-header","","trans","",1,"name-column"],["table-sort-header","updated_at","trans","",1,"last-updated-column"],["table-sort-header","file_size","trans","",1,"size-column"],["class","drive-entry",3,"contextMenu","disableContextMenu","folderDropTarget",4,"ngFor","ngForOf","ngForTrackBy"],[1,"drive-entry",3,"contextMenu","disableContextMenu","folderDropTarget"],["data-label","Name",1,"name-column"],[1,"file-name-container"],[3,"file"],[1,"file-name"],[1,"entry-name"],["class","star-icon","svgIcon","star",3,"matTooltip",4,"ngIf"],["data-label","Last Updated",1,"last-updated-column"],["data-label","Size",1,"size-column"],["svgIcon","star",1,"star-icon",3,"matTooltip"]],template:function(e,t){1&e&&(g.TgZ(0,"table",0),g.TgZ(1,"thead"),g.TgZ(2,"tr"),g.TgZ(3,"th",1),g._uU(4,"Name"),g.qZA(),g.TgZ(5,"th",2),g._uU(6,"Last Updated"),g.qZA(),g.TgZ(7,"th",3),g._uU(8,"Size"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"tbody"),g.YNc(10,da,14,15,"tr",4),g.qZA(),g.qZA()),2&e&&(g.xp6(10),g.Q6J("ngForOf",t.entries)("ngForTrackBy",t.trackById))},directives:[ca.p,qt.P,d.sg,li,pi,Xr,d.O5,at.Hw,Rr.gM],pipes:[Kr.l,xr.y,Ht.R],styles:["[_nghost-%COMP%]{display:block}table[_ngcontent-%COMP%]{table-layout:fixed}.last-updated-column[_ngcontent-%COMP%]{width:220px}.size-column[_ngcontent-%COMP%]{width:120px}tr.drag-over[_ngcontent-%COMP%], tr.selected[_ngcontent-%COMP%]{background-color:var(--be-accent-emphasis)}.file-name-container[_ngcontent-%COMP%]{display:flex;align-items:center}.file-name[_ngcontent-%COMP%]{max-width:90%;overflow:hidden;text-overflow:ellipsis}file-thumbnail[_ngcontent-%COMP%]{background-color:transparent!important;margin-right:15px}file-thumbnail[_ngcontent-%COMP%]  file-icon, file-thumbnail[_ngcontent-%COMP%]  img{width:24px;height:24px;max-width:none;-o-object-fit:cover;object-fit:cover}file-thumbnail[_ngcontent-%COMP%]  file-icon{margin-top:3px}.star-icon[_ngcontent-%COMP%]{color:#ffc000;width:18px;height:18px;vertical-align:middle}@media only screen and (max-width:768px){.last-updated-column[_ngcontent-%COMP%], .size-column[_ngcontent-%COMP%], thead[_ngcontent-%COMP%]{display:none}}"],changeDetection:0}),e}(),ha=a(2861),fa=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-recent-entries"]],decls:6,vars:0,consts:[[1,"no-results-message"],["name","time-management",1,"icon"],["trans","",1,"main"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"svg-image",1),g.TgZ(2,"div",2),g._uU(3,"No recent entries."),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"You have not uploaded any files or folders yet."),g.qZA(),g.qZA())},directives:[ha.L,qt.P],encapsulation:2,changeDetection:0}),e}(),va=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-trashed-entries"]],decls:6,vars:0,consts:[[1,"no-results-message"],["name","throw-away",1,"icon"],["trans","",1,"main"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"svg-image",1),g.TgZ(2,"div",2),g._uU(3,"Trash is empty."),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"There are no files or folders in your trash currently."),g.qZA(),g.qZA())},directives:[ha.L,qt.P],encapsulation:2,changeDetection:0}),e}(),ga=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-starred-entries"]],decls:6,vars:0,consts:[[1,"no-results-message"],["name","loving-it",1,"icon"],["trans","",1,"main"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"svg-image",1),g.TgZ(2,"div",2),g._uU(3,"Nothing is starred."),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"Add stars to files and folders that you want to easily find later."),g.qZA(),g.qZA())},directives:[ha.L,qt.P],encapsulation:2,changeDetection:0}),e}(),ma=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-shared-entries"]],decls:6,vars:0,consts:[[1,"no-results-message"],["name","share",1,"icon"],["trans","",1,"main"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"svg-image",1),g.TgZ(2,"div",2),g._uU(3,"Shared with me."),g.qZA(),g.TgZ(4,"div",3),g._uU(5,"Files and folders other people have shared with you."),g.qZA(),g.qZA())},directives:[ha.L,qt.P],encapsulation:2,changeDetection:0}),e}();function ya(e,t){1&e&&(g.TgZ(0,"div",1),g._UZ(1,"svg-image",2),g.TgZ(2,"div",3),g._uU(3,"Begin typing or select a filter to search"),g.qZA(),g.TgZ(4,"div",4),g._uU(5,"Search for files, folders and other content."),g.qZA(),g.qZA())}function ba(e,t){1&e&&(g.TgZ(0,"div",1),g._UZ(1,"svg-image",2),g.TgZ(2,"div",3),g._uU(3,"No matches found."),g.qZA(),g.TgZ(4,"div",4),g._uU(5,"Try another search with different query or filters."),g.qZA(),g.qZA())}var ka=function(){var e=function e(t){f(this,e),this.store=t,this.noQueryOrFilters$=this.store.select(it.meta).pipe((0,Ft.U)(function(e){return!e.query&&!e.filters}))};return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh))},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-search-entries"]],decls:4,vars:6,consts:[["class","no-results-message",4,"ngIf"],[1,"no-results-message"],["name","file-searching",1,"icon"],["trans","",1,"main"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g.YNc(0,ya,6,0,"div",0),g.ALo(1,"async"),g.YNc(2,ba,6,0,"div",0),g.ALo(3,"async")),2&e&&(g.Q6J("ngIf",g.lcZ(1,2,t.noQueryOrFilters$)),g.xp6(2),g.Q6J("ngIf",!g.lcZ(3,4,t.noQueryOrFilters$)))},directives:[d.O5,ha.L,qt.P],pipes:[d.Ov],encapsulation:2,changeDetection:0}),e}(),wa=["clickTarget"],xa=function(){var e=function(){function e(t,n){f(this,e),this.store=t,this.uploadConfig=n}return s(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.clickTarget.nativeElement.addEventListener("click",function(){(0,Le.r)(e.uploadConfig).then(function(t){e.store.dispatch(new q(t))})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(Ne))},e.\u0275cmp=g.Xpm({type:e,selectors:[["upload-dropzone"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(wa,7),2&e)&&(g.iGM(n=g.CRH())&&(t.clickTarget=n.first))},decls:9,vars:0,consts:[[1,"animation-circle"],[1,"content-circle"],["clickTarget",""],["svgIcon","upload-custom",1,"main-icon"],[1,"text","initial-text"],["trans","",1,"primary"],["trans","",1,"secondary"]],template:function(e,t){1&e&&(g._UZ(0,"div",0),g.TgZ(1,"div",1,2),g._UZ(3,"mat-icon",3),g.TgZ(4,"div",4),g.TgZ(5,"div",5),g._uU(6,"Drop files or folders here"),g.qZA(),g.TgZ(7,"div",6),g._uU(8,"or click to upload."),g.qZA(),g.qZA(),g.qZA())},directives:[at.Hw,qt.P],styles:["@-webkit-keyframes pulsate{0%{-webkit-transform:scale(1)}50%{-webkit-transform:scale(1.05)}to{-webkit-transform:scale(1)}}@keyframes pulsate{0%{-webkit-transform:scale(1)}50%{-webkit-transform:scale(1.05)}to{-webkit-transform:scale(1)}}.file-over-dropzone .animation-circle{-webkit-animation:pulsate .7s ease-out;animation:pulsate .7s ease-out;-webkit-animation-iteration-count:15;animation-iteration-count:15;background-color:var(--be-accent-lighter);pointer-events:none}.file-over-dropzone .content-circle{color:var(--be-accent-contrast);pointer-events:none}upload-dropzone{display:block;position:relative;width:400px;height:400px;border:2px solid transparent;margin:auto}upload-dropzone .animation-circle,upload-dropzone .content-circle{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width:400px;height:400px;min-height:300px;max-width:90%;max-height:90%;border-radius:50%;overflow:hidden;cursor:pointer}upload-dropzone .animation-circle{background-color:var(--be-background);border:1px solid var(--be-divider-default);z-index:1}upload-dropzone .content-circle{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:transparent;border-color:transparent;color:var(--be-secondary-text);z-index:2}upload-dropzone .content-circle .main-icon{width:100px;height:100px}upload-dropzone .content-circle .text{text-align:center;margin-top:8px}upload-dropzone .content-circle .text .mat-icon{vertical-align:middle}upload-dropzone .content-circle .text .primary{font-size:1.8rem;font-weight:500;margin-bottom:5px}upload-dropzone .content-circle .text .secondary{font-size:1.5rem}@media only screen and (max-width:500px){upload-dropzone{width:auto}upload-dropzone .animation-circle,upload-dropzone .content-circle{border-radius:0;border:none;max-width:100%;max-height:100%}}"],encapsulation:2,changeDetection:0}),e}(),_a=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=g.Xpm({type:e,selectors:[["no-folder-entries"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"upload-dropzone")},directives:[xa],encapsulation:2,changeDetection:0}),e}();function Ca(e,t){if(1&e&&(g._UZ(0,"files-grid",3),g.ALo(1,"async")),2&e){var n=g.oxw();g.Q6J("entries",g.lcZ(1,1,n.entries$))}}function Aa(e,t){if(1&e&&(g._UZ(0,"files-list",3),g.ALo(1,"async")),2&e){var n=g.oxw();g.Q6J("entries",g.lcZ(1,1,n.entries$))}}function Za(e,t){1&e&&g._UZ(0,"no-recent-entries")}function Oa(e,t){1&e&&g._UZ(0,"no-trashed-entries")}function Sa(e,t){1&e&&g._UZ(0,"no-starred-entries")}function Ia(e,t){1&e&&g._UZ(0,"no-shared-entries")}function Ta(e,t){1&e&&g._UZ(0,"no-search-entries")}function Ea(e,t){1&e&&g._UZ(0,"no-folder-entries")}function Pa(e,t){if(1&e&&(g.ynx(0,4),g.ALo(1,"async"),g.YNc(2,Za,1,0,"no-recent-entries",5),g.YNc(3,Oa,1,0,"no-trashed-entries",5),g.YNc(4,Sa,1,0,"no-starred-entries",5),g.YNc(5,Ia,1,0,"no-shared-entries",5),g.YNc(6,Ta,1,0,"no-search-entries",5),g.YNc(7,Ea,1,0,"no-folder-entries",6),g.BQk()),2&e){var n=g.oxw();g.Q6J("ngSwitch",g.lcZ(1,6,n.activePageName$)),g.xp6(2),g.Q6J("ngSwitchCase","recent"),g.xp6(1),g.Q6J("ngSwitchCase","trash"),g.xp6(1),g.Q6J("ngSwitchCase","starred"),g.xp6(1),g.Q6J("ngSwitchCase","shares"),g.xp6(1),g.Q6J("ngSwitchCase","search")}}var Fa=function(){function e(t,n,i){f(this,e),this.store=t,this.el=n,this.keybinds=i,this.tabindex=0}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.keybindSub=this.keybinds.listenOn(this.el.nativeElement),this.keybinds.addWithPreventDefault("ctrl+a",function(){e.store.dispatch(new Z)}),this.keybinds.addWithPreventDefault("delete",function(){"trash"===e.store.selectSnapshot(it.activePageName)?e.store.dispatch(new M({title:"Delete Forever",body:"This will permanently delete selected items.",bodyBold:"This action can not be undone.",ok:"Delete Forever"},new $)):e.store.dispatch(new S)}),this.keybinds.addWithPreventDefault("enter",function(){e.store.dispatch(new xe(e.store.selectSnapshot(it.selectedEntry)))})}},{key:"ngOnDestroy",value:function(){this.keybindSub.unsubscribe()}}]),e}();Fa.\u0275fac=function(e){return new(e||Fa)(g.Y36(m.yh),g.Y36(g.SBq),g.Y36(ia.C))},Fa.\u0275cmp=g.Xpm({type:Fa,selectors:[["entries-container"]],hostVars:1,hostBindings:function(e,t){2&e&&g.uIk("tabindex",t.tabindex)},features:[g._Bn([ia.C])],decls:6,vars:7,consts:[[3,"entries",4,"ngIf","ngIfElse"],["filesList",""],[3,"ngSwitch",4,"ngIf"],[3,"entries"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){if(1&e&&(g.YNc(0,Ca,2,3,"files-grid",0),g.ALo(1,"async"),g.YNc(2,Aa,2,3,"ng-template",null,1,g.W1O),g.YNc(4,Pa,8,8,"ng-container",2),g.ALo(5,"async")),2&e){var n=g.MAs(3);g.Q6J("ngIf","grid"===g.lcZ(1,3,t.viewMode$))("ngIfElse",n),g.xp6(4),g.Q6J("ngIf",g.lcZ(5,5,t.noEntries))}},directives:[d.O5,aa,pa,d.RF,d.n9,d.ED,fa,va,ga,ma,ka,_a],pipes:[d.Ov],styles:["entries-container{display:block;height:100%;outline:none}entries-container .no-results-message{margin-top:40px}entries-container .no-results-message .mat-icon{margin-top:15px}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.entries)],Fa.prototype,"entries$",void 0),(0,v.gn)([(0,m.Ph)(it.entriesEmpty)],Fa.prototype,"noEntries",void 0),(0,v.gn)([(0,m.Ph)(it.viewMode)],Fa.prototype,"viewMode$",void 0),(0,v.gn)([(0,m.Ph)(it.activePageName)],Fa.prototype,"activePageName$",void 0);var Ma=new g.OlP("CURRENT_PREVIEW_FILE"),Ua=new g.OlP("PREVIEW_URL_TRANSFORMER",{factory:function(){return function(e){return e.url}},providedIn:"root"}),Da=a(39075),La=function(){var e=function(){function e(t,n,i,r,o,a){f(this,e),this.file=t,this.transformer=n,this.settings=i,this.http=r,this.sanitizer=o,this.currentUser=a,this.filePreviewWrapper=!0,this.download=new g.vpe}return s(e,[{key:"getSrc",value:function(){return this.transformer(this.file)}},{key:"getSafeSrc",value:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getSrc())}},{key:"getContents",value:function(){return this.http.get(this.getSrc(),null,{responseType:"text"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Ma),g.Y36(Ua),g.Y36(Dt.Z),g.Y36(Re.r),g.Y36(Da.H7),g.Y36(Ye.I))},e.\u0275dir=g.lG2({type:e,hostVars:2,hostBindings:function(e,t){2&e&&g.ekj("file-preview-wrapper",t.filePreviewWrapper)}}),e}();function qa(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){return g.CHM(n),g.oxw().download.emit()}),g._uU(1,"Download"),g.qZA()}}var Na=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return s(n,[{key:"getMessage",value:function(){return this.message||"No file preview available."}}]),n}(La);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["default-preview"]],inputs:{message:"message"},features:[g.qOj],decls:5,vars:4,consts:[[1,"panel","preview-object"],[1,"message"],["mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._uU(2),g.ALo(3,"trans"),g.qZA(),g.YNc(4,qa,2,0,"button",2),g.qZA()),2&e&&(g.xp6(2),g.Oqu(g.lcZ(3,2,t.getMessage())),g.xp6(2),g.Q6J("ngIf",t.download.observers.length))},directives:[d.O5,Nt.lW,qt.P],pipes:[Ht.R],styles:["[_nghost-%COMP%]{display:block;max-width:380px;max-height:150px}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--be-background);color:var(--be-text);border-radius:4px;width:100%;height:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.message[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:15px}.mat-raised-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t}();function $a(e,t){1&e&&g._UZ(0,"default-preview",2)}function Ba(e,t){if(1&e&&(g.TgZ(0,"div",3),g.TgZ(1,"pre"),g._uU(2),g.ALo(3,"async"),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(2),g.Oqu(g.lcZ(3,1,n.content$))}}var Ra=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).content$=new vt.X(""),e.fileTooLarge$=new vt.X(!1),e}return s(n,[{key:"ngOnInit",value:function(){this.file.file_size>5242880?this.fileTooLarge$.next(!0):this.loadFileContents()}},{key:"loadFileContents",value:function(){var e=this;this.getContents().subscribe(function(t){e.content$.next(t)})}}]),n}(La);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["text-preview"]],features:[g.qOj],decls:4,vars:4,consts:[["message","This file is too large to preview.",4,"ngIf","ngIfElse"],["textPreview",""],["message","This file is too large to preview."],[1,"text-wrapper","preview-object"]],template:function(e,t){if(1&e&&(g.YNc(0,$a,1,0,"default-preview",0),g.ALo(1,"async"),g.YNc(2,Ba,4,3,"ng-template",null,1,g.W1O)),2&e){var n=g.MAs(3);g.Q6J("ngIf",g.lcZ(1,2,t.fileTooLarge$))("ngIfElse",n)}},directives:[d.O5,Na],pipes:[d.Ov],styles:["[_nghost-%COMP%]{display:block;width:80%;min-height:80%}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}.text-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--be-background);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);border-radius:4px;color:var(--be-text);padding:20px;overflow:auto}.text-wrapper[_ngcontent-%COMP%], pre[_ngcontent-%COMP%]{word-wrap:break-word}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;margin:0;font-size:1.4rem;font-family:inherit}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t}(),Ya=["playerEl"];function ja(e,t){1&e&&g._UZ(0,"default-preview")}var Qa=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).invalidMedia=!1,e}return s(n,[{key:"ngOnInit",value:function(){if(this.invalidMedia=!this.canPlayVideo(),!this.invalidMedia){var e=document.createElement("source");e.src=this.getSrc(),e.type=this.file.mime,this.player().appendChild(e),this.player().play()}}},{key:"canPlayVideo",value:function(){return!!this.player().canPlayType(this.file.mime)}},{key:"player",value:function(){return this.playerEl.nativeElement}}]),n}(La);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["audio-preview"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Ya,7),2&e)&&(g.iGM(n=g.CRH())&&(t.playerEl=n.first))},features:[g.qOj],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(e,t){1&e&&(g._UZ(0,"audio",0,1),g.YNc(2,ja,1,0,"default-preview",2)),2&e&&(g.ekj("hidden",t.invalidMedia),g.xp6(2),g.Q6J("ngIf",t.invalidMedia))},directives:[d.O5,Na],styles:["[_nghost-%COMP%]{display:block;max-width:80%;height:auto;margin-bottom:40px}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}audio[_ngcontent-%COMP%]{display:block;max-width:100%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);max-height:60px}audio[_ngcontent-%COMP%], default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t}();function Ja(e,t){1&e&&g._UZ(0,"default-preview")}var Va=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(Qa);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["video-preview"]],features:[g.qOj],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback","playsinline","",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(e,t){1&e&&(g._UZ(0,"video",0,1),g.YNc(2,Ja,1,0,"default-preview",2)),2&e&&(g.ekj("hidden",t.invalidMedia),g.xp6(2),g.Q6J("ngIf",t.invalidMedia))},directives:[d.O5,Na],styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;margin-bottom:40px}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}video[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}default-preview[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t}(),za=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){return f(this,n),t.apply(this,arguments)}return n}(La);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["image-preview"]],features:[g.qOj],decls:1,vars:1,consts:[[1,"preview-object",3,"src"]],template:function(e,t){1&e&&g._UZ(0,"img",0),2&e&&g.Q6J("src",t.getSafeSrc(),g.LSH)},styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;margin-bottom:40px}@media only screen and (max-width:768px){[_nghost-%COMP%]{width:90%}}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--be-background)}"],changeDetection:0}),t}(),Ha=function(){var e,n=function(e){c(i,e);var n=u(i);function i(){var e;return f(this,i),(e=n.apply(this,arguments)).className="preview-object",e}return s(i,[{key:"getSrc",value:function(){return t(h(i.prototype),"getSrc",this).call(this)+"#toolbar=0"}}]),i}(La);return n.\u0275fac=function(t){return(e||(e=g.n5z(n)))(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["pdf-preview"]],hostVars:2,hostBindings:function(e,t){2&e&&g.Tol(t.className)},features:[g.qOj],decls:1,vars:1,consts:[[3,"src"]],template:function(e,t){1&e&&g._UZ(0,"iframe",0),2&e&&g.Q6J("src",t.getSafeSrc(),g.uOi)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}iframe[_ngcontent-%COMP%], object[_ngcontent-%COMP%]{width:100%;height:100%;border:none}"],changeDetection:0}),n}(),Ga=a(24890),Wa=["iframe"];function Xa(e,t){if(1&e){var n=g.EpF();g.ynx(0),g._UZ(1,"iframe",3,4),g.TgZ(3,"div",5),g.NdJ("click",function(){return g.CHM(n),g.oxw().openInNewWindow()}),g.qZA(),g.BQk()}}function Ka(e,t){1&e&&g._UZ(0,"default-preview")}var es=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).loading$=new vt.X(!0),e.showDefaultPreview$=new vt.X(!1),e}return s(n,[{key:"ngAfterViewInit",value:function(){var e=this;if(this.file.file_size>25e6)return this.showDefaultPreview();this.iframe.nativeElement.onload=function(){clearTimeout(e.timeoutRef),e.stopLoading()},this.getIframeSrc().then(function(t){e.iframe.nativeElement.src=t}).catch(function(){e.showDefaultPreview()}),this.timeoutRef=setTimeout(function(){e.showDefaultPreview()},5e3)}},{key:"stopLoading",value:function(){this.loading$.next(!1)}},{key:"showDefaultPreview",value:function(){this.stopLoading(),this.showDefaultPreview$.next(!0)}},{key:"openInNewWindow",value:function(){window.open(window.location.href,"_blank")}},{key:"getIframeSrc",value:function(){var e=this;return new Promise(function(t,n){var i=e.getSrc();-1===i.indexOf("shareable_link")?e.http.post("uploads/".concat(e.file.id,"/add-preview-token")).subscribe(function(n){i+="?preview_token=".concat(n.preview_token),t(e.getFullPreviewUrl(i))},function(){return n}):t(e.getFullPreviewUrl(i))})}},{key:"getFullPreviewUrl",value:function(e){return e=(0,Ga.s)(e)?e:this.settings.getBaseUrl()+"/"+e,"https://view.officeapps.live.com/op/embed.aspx?src="+encodeURIComponent(e)}}]),n}(La);return t.\u0275fac=function(n){return(e||(e=g.n5z(t)))(n||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["google-docs-viewer"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Wa,5),2&e)&&(g.iGM(n=g.CRH())&&(t.iframe=n.first))},features:[g.qOj],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["defaultPreview",""],[1,"overlay",3,"isVisible"],[1,"preview-object"],["iframe",""],[1,"pop-out-block","office-block",3,"click"]],template:function(e,t){if(1&e&&(g.YNc(0,Xa,4,0,"ng-container",0),g.ALo(1,"async"),g.YNc(2,Ka,1,0,"ng-template",null,1,g.W1O),g._UZ(4,"loading-indicator",2),g.ALo(5,"async")),2&e){var n=g.MAs(3);g.Q6J("ngIf",!g.lcZ(1,3,t.showDefaultPreview$))("ngIfElse",n),g.xp6(4),g.Q6J("isVisible",g.lcZ(5,5,t.loading$))}},directives:[d.O5,xn.Q,Na],pipes:[d.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}loading-indicator.overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:transparent}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}.pop-out-block[_ngcontent-%COMP%]{position:absolute;right:12px;cursor:pointer}.office-block[_ngcontent-%COMP%]{width:25px;height:25px;bottom:0}.gdocs-block[_ngcontent-%COMP%]{width:40px;height:40px;top:12px}"],changeDetection:0}),t}(),ts=new g.OlP("AVAILABLE_PREVIEWS"),ns=function(){var e=function e(){f(this,e),this.text=Ra,this.video=Va,this.audio=Qa,this.image=za,this.pdf=Ha,this.spreadsheet=es,this.powerPoint=es,this.word=es};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),is=function(){var e=function(){function e(t,n){f(this,e),this.availablePreviews=t,this.injector=n,this.files=[],this.portal=new vt.X(null),this.meta=new vt.X({}),this.previewUriTransformer=null,this.download=new ft.xQ}return s(e,[{key:"pagination",value:function(){return this.meta.pipe((0,ht.h)(function(e){return e&&!!e.entry}))}},{key:"getCurrent",value:function(){return this.meta.value.entry}},{key:"getAllEntries",value:function(){return this.files}},{key:"getPortal",value:function(){return this.portal.asObservable()}},{key:"showNext",value:function(){this.meta.value.haveNext&&(this.updateMeta("next"),this.updatePortal())}},{key:"showPrevious",value:function(){this.meta.value.havePrevious&&(this.updateMeta("previous"),this.updatePortal())}},{key:"updateMeta",value:function(e){var t=0;if("string"==typeof e){var n=this.meta.value.pointer;t="next"===e?n+1:n-1}else"number"==typeof e&&(t=e);this.meta.next({pointer:t,entry:this.files[t],total:this.files.length,haveNext:t+1<this.files.length,havePrevious:t-1>-1})}},{key:"updatePortal",value:function(){var e=this.getCurrent();this.portal.next(new ri.C5(e&&this.availablePreviews[e.type]||Na,null,this.createInjector()))}},{key:"set",value:function(e,t){e&&0!==e.length&&(this.files=e.filter(function(e){return"folder"!==e.type}),this.updateMeta(t),this.updatePortal())}},{key:"createInjector",value:function(){var e=new WeakMap;return e.set(Ma,this.getCurrent()),this.previewUriTransformer&&e.set(Ua,this.previewUriTransformer),new ri.nK(this.injector,e)}},{key:"destroy",value:function(){this.meta.next({}),this.files=null,this.portal.next(null)}},{key:"setPreviewUriTransformer",value:function(e){this.previewUriTransformer=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(ts),g.LFG(g.zs3))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function rs(e,t){1&e&&(g.TgZ(0,"div",9),g._uU(1,"Password does not match."),g.qZA())}var os=function(){var e=function(){function e(t){f(this,e),this.links=t,this.passwordControl=new Pt.NI,this.passwordError$=new vt.X(!1),this.passwordValid=new g.vpe(null)}return s(e,[{key:"submitPassword",value:function(){var e=this;this.links.checkPassword(this.link.id,this.passwordControl.value).subscribe(function(t){e.handlePasswordCheck(t.matches)},function(){})}},{key:"handlePasswordCheck",value:function(e){this.passwordError$.next(!e),e&&this.passwordValid.emit(this.passwordControl.value)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(an))},e.\u0275cmp=g.Xpm({type:e,selectors:[["link-preview-password-panel"]],inputs:{link:"link"},outputs:{passwordValid:"passwordValid"},decls:13,vars:4,consts:[["svgIcon","password-custom"],["ngNativeValidate","",1,"content",3,"ngSubmit"],["trans","",1,"message"],[1,"input-container"],["for","password","trans","",1,"hidden"],["type","password","id","password","placeholder","Password","trans-placeholder","","required","",3,"formControl"],[1,"button-container"],["class","error","trans","",4,"ngIf"],["type","submit","mat-raised-button","","color","accent","trans",""],["trans","",1,"error"]],template:function(e,t){1&e&&(g._UZ(0,"mat-icon",0),g.TgZ(1,"form",1),g.NdJ("ngSubmit",function(){return t.submitPassword()}),g.TgZ(2,"div",2),g._uU(3,"The link you are trying to access is password protected."),g.qZA(),g.TgZ(4,"div",3),g.TgZ(5,"label",4),g._uU(6,"Password"),g.qZA(),g._UZ(7,"input",5),g.qZA(),g.TgZ(8,"div",6),g.YNc(9,rs,2,0,"div",7),g.ALo(10,"async"),g.TgZ(11,"button",8),g._uU(12,"Enter"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.xp6(7),g.Q6J("formControl",t.passwordControl),g.xp6(2),g.Q6J("ngIf",g.lcZ(10,2,t.passwordError$)))},directives:[at.Hw,Pt.JL,Pt.F,qt.P,Pt.Fj,Pt.Q7,Pt.JJ,Pt.oH,d.O5,Nt.lW],pipes:[d.Ov],styles:["link-preview-password-panel{display:flex;background-color:var(--be-background);color:var(--be-text);border:1px solid var(--be-divider-default);padding:25px;border-radius:4px;position:absolute;top:0;left:0;right:0;bottom:0;width:500px;height:192px;max-width:90%;max-height:90%;margin:auto}link-preview-password-panel .content{flex:1 1 auto}link-preview-password-panel .content .message{margin-bottom:8px}link-preview-password-panel .button-container{display:flex;align-items:center;margin-top:10px}link-preview-password-panel .button-container button{margin-left:auto}link-preview-password-panel .mat-icon{width:140px;height:140px;flex:0 0 140px;margin-right:10px;margin-left:-25px}"],encapsulation:2,changeDetection:0}),e}(),as=a(72100),ss=a(67310);function cs(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",3),g.NdJ("click",function(){return g.CHM(n),g.oxw().closed.emit(!0)}),g._UZ(1,"mat-icon",4),g.qZA()}}function ls(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"div",10),g.TgZ(2,"button",11),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).previewFiles.showPrevious()}),g._UZ(3,"mat-icon",12),g.qZA(),g.TgZ(4,"span",13),g._uU(5),g.ALo(6,"trans"),g.qZA(),g.TgZ(7,"button",14),g.NdJ("click",function(){return g.CHM(n),g.oxw(2).previewFiles.showNext()}),g._UZ(8,"mat-icon",15),g.qZA(),g.qZA(),g.BQk()}if(2&e){var i=t.ngIf;g.xp6(2),g.Q6J("disabled",!i.havePrevious),g.xp6(3),g.lnq("",i.pointer+1," ",g.lcZ(6,5,"of")," ",i.total,""),g.xp6(2),g.Q6J("disabled",!i.haveNext)}}function us(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"div",5),g._UZ(2,"file-icon",6),g._uU(3),g.qZA(),g.YNc(4,ls,9,7,"ng-container",1),g.ALo(5,"async"),g.TgZ(6,"div",7),g.TgZ(7,"button",8),g.NdJ("click",function(){return g.CHM(n),g.oxw().downloadFiles()}),g._UZ(8,"mat-icon",9),g.qZA(),g.Hsn(9),g.qZA(),g.BQk()}if(2&e){var i=t.ngIf,r=g.oxw();g.xp6(2),g.Q6J("type",i.entry.type),g.xp6(1),g.hij(" ",i.entry.name," "),g.xp6(1),g.Q6J("ngIf",g.lcZ(5,4,r.previewFiles.pagination())),g.xp6(3),g.Q6J("disabled",r.disableDownload)}}function ds(e,t){if(1&e&&g._UZ(0,"img",18),2&e){var n=g.oxw(2);g.Q6J("src",n.settings.get("branding.logo_light"),g.LSH)}}function ps(e,t){if(1&e&&(g.TgZ(0,"a",16),g.YNc(1,ds,1,1,"img",17),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.Q6J("ngIf",n.showLogo&&n.settings.get("branding.logo_light"))}}var hs=["*"],fs=function(){var e=function(){function e(t,n){f(this,e),this.previewFiles=t,this.settings=n,this.showLogo=!1,this.disableDownload=!1,this.showCloseButton=!1,this.closed=new g.vpe}return s(e,[{key:"downloadFiles",value:function(){this.previewFiles.download.next()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(is),g.Y36(Dt.Z))},e.\u0275cmp=g.Xpm({type:e,selectors:[["file-preview-toolbar"]],inputs:{showLogo:"showLogo",disableDownload:"disableDownload",showCloseButton:"showCloseButton"},outputs:{closed:"closed"},ngContentSelectors:hs,decls:4,vars:5,consts:[["mat-icon-button","","class","back-button",3,"click",4,"ngIf"],[4,"ngIf"],["routerLink","/drive","class","logo",4,"ngIf"],["mat-icon-button","",1,"back-button",3,"click"],["svgIcon","arrow-back"],[1,"entry-name"],[3,"type"],[1,"actions"],["mat-icon-button","",3,"disabled","click"],["svgIcon","file-download"],[1,"navigation"],["mat-icon-button","",1,"previous",3,"disabled","click"],["svgIcon","keyboard-arrow-left"],[1,"meta"],["mat-icon-button","",1,"next",3,"disabled","click"],["svgIcon","keyboard-arrow-right"],["routerLink","/drive",1,"logo"],[3,"src",4,"ngIf"],[3,"src"]],template:function(e,t){1&e&&(g.F$t(),g.YNc(0,cs,2,0,"button",0),g.YNc(1,us,10,6,"ng-container",1),g.ALo(2,"async"),g.YNc(3,ps,2,1,"a",2)),2&e&&(g.Q6J("ngIf",t.showCloseButton),g.xp6(1),g.Q6J("ngIf",g.lcZ(2,3,t.previewFiles.pagination())),g.xp6(2),g.Q6J("ngIf",t.showLogo&&t.settings.has("branding.logo_light")))},directives:[d.O5,Nt.lW,at.Hw,st,p.yS],pipes:[d.Ov,Ht.R],styles:["file-preview-toolbar{position:fixed;top:0;left:0;display:flex;width:100%;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:linear-gradient(180deg,rgba(0,0,0,.65) 0,transparent);z-index:10}@media only screen and (max-width:550px){file-preview-toolbar{padding:0 5px}}file-preview-toolbar .entry-name{display:block;margin-right:25px;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width:550px){file-preview-toolbar .entry-name{max-width:calc(50% - 77.5px)}}file-preview-toolbar .entry-name file-icon{display:inline-block;vertical-align:bottom;margin-right:5px}@media only screen and (min-width:550px){file-preview-toolbar .navigation{position:absolute;left:50%;top:50%;margin-right:-50%;transform:translate(-50%,-50%)}}@media only screen and (max-width:550px){file-preview-toolbar .navigation{position:fixed;bottom:10px;left:5px}}file-preview-toolbar .actions{margin-left:auto;white-space:nowrap}file-preview-toolbar .actions a,file-preview-toolbar .actions button{margin:0 5px}file-preview-toolbar .close-button{margin-right:25px}file-preview-toolbar .logo{position:fixed;bottom:15px;right:15px;opacity:.2;width:150px;height:auto}file-preview-toolbar .logo img{width:100%;height:auto}file-preview-toolbar .mat-icon-button[disabled][disabled]{color:#737373}"],encapsulation:2,changeDetection:0}),e}();function vs(e,t){}function gs(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.YNc(1,vs,0,0,"ng-template",1),g.NdJ("attached",function(e){return g.CHM(n),g.oxw().listenForDownloadClick(e)}),g.BQk()}if(2&e){var i=t.ngIf;g.xp6(1),g.Q6J("cdkPortalOutlet",i)}}var ms=function(){var e=function(){function e(t){f(this,e),this.previewFiles=t,this.disableDownload=!1}return s(e,[{key:"ngOnChanges",value:function(e){this.previewFiles.set(this.files,this.activeFile)}},{key:"ngOnDestroy",value:function(){this.previewFiles.destroy(),this.downloadSub&&this.downloadSub.unsubscribe()}},{key:"listenForDownloadClick",value:function(e){var t=this;this.downloadSub&&this.downloadSub.unsubscribe(),this.disableDownload||(this.downloadSub=e.instance.download.subscribe(function(){t.previewFiles.download.next()}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(is))},e.\u0275cmp=g.Xpm({type:e,selectors:[["preview-container"]],inputs:{files:"files",activeFile:"activeFile",disableDownload:"disableDownload"},features:[g.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cdkPortalOutlet","attached"]],template:function(e,t){1&e&&(g.YNc(0,gs,2,1,"ng-container",0),g.ALo(1,"async")),2&e&&g.Q6J("ngIf",g.lcZ(1,1,t.previewFiles.getPortal()))},directives:[d.O5,ri.Pl],pipes:[d.Ov],styles:["[_nghost-%COMP%]{display:flex;width:100%;min-height:100%;align-items:center;justify-content:center;position:relative;overflow:hidden}  .file-preview-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}"],changeDetection:0}),e}(),ys=["previewContainer"],bs=["moreOptionsButton"];function ks(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",4,5),g.NdJ("click",function(){return g.CHM(n),g.oxw().openContextMenu()}),g._UZ(2,"mat-icon",6),g.qZA()}}var ws=function(){var e=function(){function e(t,n,i,r,o,a,s){f(this,e),this.store=t,this.el=n,this.contextMenu=i,this.overlayRef=r,this.previewFiles=o,this.currentUser=a,this.data=s}return s(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.bindToDownload(),setTimeout(function(){e.previewContainer.nativeElement.addEventListener("click",function(t){t.target.closest(".preview-object")||e.overlayRef.close()})})}},{key:"ngOnDestroy",value:function(){this.downloadSub.unsubscribe()}},{key:"openContextMenu",value:function(){this.contextMenu.open(Oo,this.optionsButton.nativeElement,{data:{entry:this.previewFiles.getCurrent()}})}},{key:"closeOverlay",value:function(){this.overlayRef.close()}},{key:"canDownload",value:function(){var e=this;return this.data.entries.every(function(t){var n;t.users||(t.users=[]);var i=t.users&&t.users.find(function(t){return t.id===e.currentUser.get("id")});return(null===(n=e.data.shareableLink)||void 0===n?void 0:n.allow_download)||i&&(i.owns_entry||i.entry_permissions.download)})}},{key:"bindToDownload",value:function(){var e=this;this.downloadSub=this.previewFiles.download.subscribe(function(){var t=e.previewFiles.getCurrent();e.store.dispatch(new Y([t],e.data.shareableLink,e.data.password))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(g.SBq),g.Y36(ci),g.Y36(ss.L),g.Y36(is),g.Y36(Ye.I),g.Y36(as.p))},e.\u0275cmp=g.Xpm({type:e,selectors:[["file-preview-overlay"]],viewQuery:function(e,t){var n;(1&e&&(g.Gf(ys,7,g.SBq),g.Gf(bs,5,g.SBq)),2&e)&&(g.iGM(n=g.CRH())&&(t.previewContainer=n.first),g.iGM(n=g.CRH())&&(t.optionsButton=n.first))},decls:4,vars:6,consts:[[3,"showCloseButton","disableDownload","closed"],["mat-icon-button","",3,"click",4,"ngIf"],[3,"files","activeFile","disableDownload"],["previewContainer",""],["mat-icon-button","",3,"click"],["moreOptionsButton",""],["svgIcon","more-vert"]],template:function(e,t){1&e&&(g.TgZ(0,"file-preview-toolbar",0),g.NdJ("closed",function(){return t.closeOverlay()}),g.YNc(1,ks,3,0,"button",1),g.qZA(),g._UZ(2,"preview-container",2,3)),2&e&&(g.Q6J("showCloseButton",!0)("disableDownload",!t.canDownload()),g.xp6(1),g.Q6J("ngIf",!t.data.hideMoreOptionsBtn),g.xp6(1),g.Q6J("files",t.data.entries)("activeFile",t.data.activeEntry)("disableDownload",!t.canDownload()))},directives:[fs,d.O5,ms,Nt.lW,at.Hw],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;background-color:rgba(0,0,0,.9);color:var(--be-accent-contrast);overflow:auto;position:relative}preview-container[_ngcontent-%COMP%]{margin-top:60px;min-height:calc(100% - 60px)}"],changeDetection:0}),e}(),xs=a(7964),_s=a(76403),Cs=["filesContainer"];function As(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",13),g.NdJ("click",function(){return g.CHM(n),g.oxw().openFolder()}),g._UZ(1,"mat-icon",14),g.qZA()}}function Zs(e,t){1&e&&g._UZ(0,"mat-icon",17)}function Os(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"div",15),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw().openFolder(e)}),g._uU(2),g.qZA(),g.YNc(3,Zs,1,0,"mat-icon",16),g.BQk()}if(2&e){var i=t.$implicit,r=t.last;g.xp6(2),g.Oqu(i.name),g.xp6(1),g.Q6J("ngIf",!r)}}function Ss(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"button",18),g.NdJ("click",function(){return g.CHM(n),g.oxw().toggleViewMode()}),g.ALo(2,"trans"),g._UZ(3,"mat-icon",19),g.qZA(),g.BQk()}if(2&e){var i=t.ngIf;g.xp6(1),g.Q6J("matTooltip",g.lcZ(2,2,"list"===i?"Grid view":"List view")),g.xp6(2),g.Q6J("svgIcon","list"===i?"view-list":"view-module")}}function Is(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",20),g.NdJ("click",function(){return g.CHM(n),g.oxw().download()}),g.ALo(1,"trans"),g._UZ(2,"mat-icon",21),g.qZA()}2&e&&g.Q6J("matTooltip",g.lcZ(1,1,"Download all"))}function Ts(e,t){if(1&e&&g._UZ(0,"files-grid",24),2&e){var n=g.oxw().ngIf;g.Q6J("entries",n.data)("disableInteractions",!0)}}function Es(e,t){if(1&e&&g._UZ(0,"files-list",24),2&e){var n=g.oxw().ngIf;g.Q6J("entries",n.data)("disableInteractions",!0)}}function Ps(e,t){1&e&&(g.TgZ(0,"no-results-message"),g.TgZ(1,"span",25),g._uU(2,"Folder Is Empty"),g.qZA(),g.TgZ(3,"span",26),g._uU(4,"No files have been uploaded to this folder yet."),g.qZA(),g.qZA())}function Fs(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Ts,1,2,"files-grid",22),g.ALo(2,"async"),g.YNc(3,Es,1,2,"ng-template",null,23,g.W1O),g.YNc(5,Ps,5,0,"no-results-message",7),g.BQk()),2&e){var n=t.ngIf,i=g.MAs(4),r=g.oxw();g.xp6(1),g.Q6J("ngIf","grid"===g.lcZ(2,3,r.viewMode$))("ngIfElse",i),g.xp6(4),g.Q6J("ngIf",!n.data.length)}}var Ms=function(e){c(r,e);var n=u(r);function r(e,t,i,o,a,s){var c;return f(this,r),(c=n.call(this)).store=e,c.overlay=t,c.router=i,c.linkApi=o,c.zone=a,c.el=s,c.loading$=new vt.X(!1),c.breadcrumb$=new vt.X([]),c.pagination$=new vt.X(null),c.allFolders={},c.sortFormControl=new Pt.NI({column:"updated_at",direction:"desc"}),c}return s(r,[{key:"folder",get:function(){return this.data.link.entry}},{key:"children",get:function(){return this.pagination$.value.data}},{key:"ngOnInit",value:function(){var e=this;t(h(r.prototype),"ngOnInit",this).call(this),this.sortFormControl.valueChanges.subscribe(function(t){t&&e.loadChildren({},!0)})}},{key:"ngOnChanges",value:function(){this.allFolders[this.folder.id]=this.folder,this.generateBreadcrumb(this.folder),this.setPagination(this.data.folderChildren),this.loading$.next(!1)}},{key:"download",value:function(){this.store.dispatch(new Y([this.folder],this.data.link,this.password))}},{key:"toggleViewMode",value:function(){var e=this.store.selectSnapshot(it.viewMode);this.store.dispatch(new U("list"===e?"grid":"list"))}},{key:"openPreviewOverlay",value:function(e){var t=this.children.filter(function(e){return"folder"!==e.type}),n=t.findIndex(function(t){return t.id===e.id});this.overlay.open(ws,{position:"center",origin:"global",panelClass:"file-preview-overlay-container",data:{entries:t.slice(),activeEntry:n,shareableLink:this.data.link,password:this.password,hideMoreOptionsBtn:!0}})}},{key:"getEntry",value:function(e){var t=e.target.closest(".drive-entry");if(t)return this.children.find(function(e){return e.id===+t.dataset.id})}},{key:"onClick",value:function(e){var t=this.getEntry(e);t&&("folder"===t.type?this.openFolder(t):this.openPreviewOverlay(t))}},{key:"isSubFolder",value:function(){return this.router.url.indexOf(":")>-1}},{key:"openFolder",value:function(e){var t=this;e&&this.folder.id===e.id||(this.loading$.next(!0),this.router.navigate(["/drive/s",this.makeLinkHash(e)]).then(function(){t.sortFormControl.reset()}))}},{key:"generateBreadcrumb",value:function(e){var t=this;this.breadcrumb$.next(e.path.split("/").map(function(e){return t.allFolders[+e]}).filter(function(e){return!!e}))}},{key:"loadChildren",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading$.next(!0);var r="".concat(this.sortFormControl.value.column,":").concat(this.sortFormControl.value.direction),o=e.page||this.pagination$.value.current_page;this.linkApi.findByHash(this.makeLinkHash(this.folder),{page:o,order:r,withEntries:!0}).pipe((0,b.x)(function(){return t.loading$.next(!1)})).subscribe(function(e){var r=e.folderChildren;n||(r.data=[].concat(i(t.children),i(r.data))),t.setPagination(r)})}},{key:"makeLinkHash",value:function(e){var t=this.data.link.hash;return e&&(t+=":"+e.hash),t}},{key:"setPagination",value:function(e){var t=this;e.data=e.data.map(function(e){return e.url+="?shareable_link=".concat(t.data.link.id),t.password&&(e.url+="&password=".concat(t.password)),e}),this.pagination$.next(e)}},{key:"loadMoreItems",value:function(){this.loadChildren({page:this.pagination$.value.current_page+1},!1)}},{key:"canLoadMore",value:function(){return this.pagination$.value.current_page<this.pagination$.value.last_page}},{key:"isLoading",value:function(){return this.loading$.value}}]),r}(Ao);function Us(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"link-preview-password-panel",3),g.NdJ("passwordValid",function(e){return g.CHM(n),g.oxw(2).setValidPassword(e)}),g.qZA()}if(2&e){var i=g.oxw().ngIf;g.Q6J("link",i.link)}}function Ds(e,t){if(1&e){var n=g.EpF();g.ynx(0),g._UZ(1,"span",5),g.TgZ(2,"button",6),g.NdJ("click",function(){return g.CHM(n),g.oxw(4).import()}),g._uU(3,"Import"),g.qZA(),g.BQk()}}function Ls(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"folder-preview",4),g.YNc(2,Ds,4,0,"ng-container",0),g.ALo(3,"async"),g.qZA(),g.BQk()),2&e){var n=g.oxw(2).ngIf,i=g.oxw();g.xp6(1),g.Q6J("data",n)("password",i.password),g.xp6(1),g.Q6J("ngIf",!g.lcZ(3,3,i.entryAlreadyImported$)&&i.currentUser.isLoggedIn())}}function qs(e,t){1&e&&(g.TgZ(0,"a",12),g._uU(1,"Sign In"),g.qZA())}function Ns(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",6),g.NdJ("click",function(){return g.CHM(n),g.oxw(4).import()}),g._uU(1,"Import"),g.qZA()}}Ms.\u0275fac=function(e){return new(e||Ms)(g.Y36(m.yh),g.Y36(xs.T),g.Y36(p.F0),g.Y36(an),g.Y36(g.R0b),g.Y36(g.SBq))},Ms.\u0275cmp=g.Xpm({type:Ms,selectors:[["folder-preview"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Cs,7),2&e)&&(g.iGM(n=g.CRH())&&(t.filesContainer=n.first))},inputs:{data:"data",password:"password"},features:[g.qOj,g.TTD],ngContentSelectors:["*"],decls:20,vars:15,consts:[[1,"toolbar"],[1,"breadcrumb"],["mat-icon-button","","class","home-button",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"actions"],[3,"formControl"],[1,"action-separator"],[4,"ngIf"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["slot","ads.file-preview",1,"folder-preview-vert-host"],[1,"files-container",3,"click"],["filesContainer",""],[1,"overlay",3,"isVisible"],["mat-icon-button","",1,"home-button",3,"click"],["svgIcon","home",1,"action-icon"],[1,"breadcrumb-item",3,"click"],["class","separator","svgIcon","keyboard-arrow-right",4,"ngIf"],["svgIcon","keyboard-arrow-right",1,"separator"],["mat-icon-button","",1,"view-toggle-button",3,"matTooltip","click"],[1,"action-icon",3,"svgIcon"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","file-download",1,"action-icon"],[3,"entries","disableInteractions",4,"ngIf","ngIfElse"],["filesList",""],[3,"entries","disableInteractions"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(e,t){1&e&&(g.F$t(),g._UZ(0,"material-navbar"),g.TgZ(1,"div",0),g.TgZ(2,"div",1),g.YNc(3,As,2,0,"button",2),g.YNc(4,Os,4,2,"ng-container",3),g.ALo(5,"async"),g.qZA(),g.TgZ(6,"div",4),g._UZ(7,"entries-sort-button",5),g._UZ(8,"span",6),g.YNc(9,Ss,4,4,"ng-container",7),g.ALo(10,"async"),g.YNc(11,Is,3,3,"button",8),g.Hsn(12),g.qZA(),g.qZA(),g._UZ(13,"ad-host",9),g.TgZ(14,"div",10,11),g.NdJ("click",function(e){return t.onClick(e)}),g.YNc(16,Fs,6,5,"ng-container",7),g.ALo(17,"async"),g.qZA(),g._UZ(18,"loading-indicator",12),g.ALo(19,"async")),2&e&&(g.xp6(3),g.Q6J("ngIf",t.isSubFolder()),g.xp6(1),g.Q6J("ngForOf",g.lcZ(5,7,t.breadcrumb$)),g.xp6(3),g.Q6J("formControl",t.sortFormControl),g.xp6(2),g.Q6J("ngIf",g.lcZ(10,9,t.viewMode$)),g.xp6(2),g.Q6J("ngIf",t.data.link.allow_download),g.xp6(5),g.Q6J("ngIf",g.lcZ(17,11,t.pagination$)),g.xp6(2),g.Q6J("isVisible",g.lcZ(19,13,t.loading$)))},directives:[Ii.e,d.O5,d.sg,$o,Pt.JJ,Pt.oH,yo.i,xn.Q,Nt.lW,at.Hw,Rr.gM,aa,pa,_s.U,qt.P],pipes:[d.Ov,Ht.R],styles:["folder-preview{display:block;max-height:100vh;overflow:auto}folder-preview .files-container{max-width:1280px;margin-left:auto;margin-right:auto;padding:10px 20px}folder-preview .folder-preview-vert-host{margin:30px 0}folder-preview material-navbar:not(.transparent){background-color:var(--be-accent-default)}folder-preview material-navbar:not(.transparent) .mat-raised-button.mat-accent{background-color:#fff;color:var(--be-text)}folder-preview .toolbar{display:flex;padding:15px;margin-bottom:15px;border-bottom:1px solid var(--be-divider-default);color:var(--be-text)}@media only screen and (max-width:768px){folder-preview .toolbar{display:block}folder-preview .toolbar .breadcrumb{margin-bottom:10px}}folder-preview .toolbar .action-icon{color:var(--be-secondary-text)}folder-preview .toolbar .breadcrumb{flex:1 1 auto}folder-preview .toolbar .actions{margin-left:auto}folder-preview .toolbar .action-separator{display:inline-block;vertical-align:middle;background-color:var(--be-divider-default);width:1px;height:40px;margin:0 12px}folder-preview .drive-entry{cursor:pointer;transition-property:all}folder-preview .drive-entry:hover{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}folder-preview .breadcrumb{display:flex;align-items:center;max-width:100%;overflow:hidden}folder-preview .breadcrumb .breadcrumb-item{font-size:1.8rem;color:var(--be-text);border-radius:4px;padding:4px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer}folder-preview .breadcrumb .breadcrumb-item:hover{background-color:var(--be-hover)}folder-preview .breadcrumb .breadcrumb-item:first-of-type{text-transform:capitalize}folder-preview .breadcrumb .breadcrumb-item .mat-icon{vertical-align:middle;color:var(--be-secondary-text);margin-left:-5px}folder-preview .breadcrumb .separator{color:var(--be-secondary-text)}folder-preview no-results-message{margin-top:40px}@media only screen and (max-width:450px){folder-preview entries-sort-button .label{display:none}}"],encapsulation:2,changeDetection:0}),(0,v.gn)([(0,m.Ph)(it.viewMode)],Ms.prototype,"viewMode$",void 0);var $s=function(e){return[e]};function Bs(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"file-preview-toolbar",7),g.YNc(2,qs,2,0,"a",8),g.YNc(3,Ns,2,0,"button",9),g.ALo(4,"async"),g.qZA(),g._UZ(5,"ad-host",10),g._UZ(6,"preview-container",11),g.BQk()),2&e){var n=g.oxw(2).ngIf,i=g.oxw();g.xp6(1),g.Q6J("showLogo",!0)("disableDownload",!n.link.allow_download),g.xp6(1),g.Q6J("ngIf",!i.currentUser.isLoggedIn()),g.xp6(1),g.Q6J("ngIf",!g.lcZ(4,7,i.entryAlreadyImported$)&&i.currentUser.isLoggedIn()),g.xp6(3),g.ekj("has-rek",i.settings.has("ads.file-preview")),g.Q6J("files",g.VKq(9,$s,n.link.entry))}}function Rs(e,t){if(1&e&&(g.YNc(0,Ls,4,5,"ng-container",0),g.YNc(1,Bs,7,11,"ng-container",0)),2&e){var n=g.oxw().ngIf;g.Q6J("ngIf","folder"===n.link.entry.type),g.xp6(1),g.Q6J("ngIf","folder"!==n.link.entry.type)}}function Ys(e,t){if(1&e&&(g.ynx(0),g.YNc(1,Us,1,1,"link-preview-password-panel",1),g.ALo(2,"async"),g.YNc(3,Rs,2,2,"ng-template",null,2,g.W1O),g.BQk()),2&e){var n=g.MAs(4),i=g.oxw();g.xp6(1),g.Q6J("ngIf",g.lcZ(2,2,i.passwordPanelVisible$))("ngIfElse",n)}}var js=function(){var e=function(){function e(t,n,i,r,o,a,s,c,l,u){f(this,e),this.store=t,this.route=n,this.links=i,this.previewFiles=r,this.settings=o,this.currentUser=a,this.router=s,this.toast=c,this.el=l,this.localStorage=u,this.data$=new vt.X(null),this.passwordPanelVisible$=new vt.X(!1)}return s(e,[{key:"entryAlreadyImported$",get:function(){var e=this.currentUser.get("id");return this.data$.pipe((0,Ft.U)(function(e){return e.link}),(0,ht.h)(function(e){return!!e&&!!e.entry&&!!e.entry.users}),(0,Ft.U)(function(e){return e.entry}),(0,Ft.U)(function(t){return!!t.users.find(function(t){return t.id===e})}))}},{key:"ngOnInit",value:function(){var e=this;this.bindToDownload(),this.disableContextMenu(),this.setViewMode(),this.route.params.subscribe(function(t){e.links.findByHash(t.hash,{withEntries:!0}).subscribe(function(t){var n=t.link.id!==(e.data$.value&&e.data$.value.link.id);e.data$.next(t),e.setBackgroundClass(t.link),!t.link.password||!n&&e.password?(e.togglePasswordPanel(!1),e.showPreview()):e.togglePasswordPanel(!0)},function(){e.router.navigate(["/404"])})})}},{key:"ngOnDestroy",value:function(){this.downloadSub.unsubscribe()}},{key:"import",value:function(){var e=this;this.links.importEntry(this.data$.value.link.id,this.password).subscribe(function(t){var n=e.data$.value.link;n.entry.users=t.users,e.data$.next(Object.assign(Object.assign({},e.data$.value),{link:n})),e.toast.open({message:'":name" imported into your drive.',replacements:{name:n.entry.name}})})}},{key:"togglePasswordPanel",value:function(e){this.passwordPanelVisible$.next(e)}},{key:"bindToDownload",value:function(){var e=this;this.downloadSub=this.previewFiles.download.subscribe(function(){var t=e.data$.value.link;e.store.dispatch(new Y([t.entry],t,e.password))})}},{key:"showPreview",value:function(){var e=this.data$.value;e.link.entry.url+="?shareable_link=".concat(e.link.id),this.password&&(e.link.entry.url+="&password=".concat(this.password)),this.data$.next(Object.assign({},e))}},{key:"setValidPassword",value:function(e){this.password=e,this.showPreview(),this.togglePasswordPanel(!1)}},{key:"setBackgroundClass",value:function(e){this.el.nativeElement.classList.add("folder"===e.entry.type?"folder-link":"file-link")}},{key:"disableContextMenu",value:function(){(0,ui.R)(this.el.nativeElement,"contextmenu").subscribe(function(e){e.preventDefault()})}},{key:"setViewMode",value:function(){this.store.dispatch(new U(this.localStorage.get("bedrive.viewMode",this.settings.get("drive.default_view","grid"))))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(p.gz),g.Y36(an),g.Y36(is),g.Y36(Dt.Z),g.Y36(Ye.I),g.Y36(p.F0),g.Y36(nt.F),g.Y36(g.SBq),g.Y36(ze.m))},e.\u0275cmp=g.Xpm({type:e,selectors:[["link-preview-container"]],features:[g._Bn([is])],decls:2,vars:3,consts:[[4,"ngIf"],[3,"link","passwordValid",4,"ngIf","ngIfElse"],["filePreview",""],[3,"link","passwordValid"],[3,"data","password"],[1,"action-separator"],["mat-flat-button","","color","accent","trans","",3,"click"],[3,"showLogo","disableDownload"],["mat-flat-button","","color","accent","routerLink","/login","trans","",4,"ngIf"],["mat-flat-button","","color","accent","trans","",3,"click",4,"ngIf"],["slot","ads.file-preview",1,"file-preview-vert-host"],[3,"files"],["mat-flat-button","","color","accent","routerLink","/login","trans",""]],template:function(e,t){1&e&&(g.YNc(0,Ys,5,4,"ng-container",0),g.ALo(1,"async")),2&e&&g.Q6J("ngIf",g.lcZ(1,1,t.data$))},directives:[d.O5,os,Ms,Nt.lW,qt.P,fs,yo.i,ms,Nt.zs,p.yS],pipes:[d.Ov],styles:["link-preview-container{display:block;width:100%;height:100%;position:relative;overflow:hidden}link-preview-container.folder-link{background-color:var(--be-background)}link-preview-container.file-link{background-color:rgba(0,0,0,.9)}link-preview-container preview-container{margin:60px 0;min-height:calc(100% - 120px)}link-preview-container .file-preview-vert-host{margin-top:80px}"],encapsulation:2,changeDetection:0}),e}(),Qs=a(42690),Js=a(20765),Vs=[{path:"s/:hash",component:js},{path:"",component:na,canActivate:[Qs.a,Js.d],children:[{path:"",component:Fa},{path:"shares",component:Fa},{path:"search",component:Fa},{path:"recent",component:Fa},{path:"starred",component:Fa},{path:"trash",component:Fa},{path:"folders/:hash",component:Fa},{path:"workspaces",loadChildren:function(){return a.e(752).then(a.bind(a,72752)).then(function(e){return e.WorkspaceWrapperModule})}}]}],zs=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[d.ez,p.Bz.forChild(Vs)],p.Bz]}),e}();function Hs(e,t){if(1&e&&(g.O4$(),g._UZ(0,"circle",3)),2&e){var n=g.oxw();g.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+n._spinnerAnimationLabel)("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),g.uIk("r",n._getCircleRadius())}}function Gs(e,t){if(1&e&&(g.O4$(),g._UZ(0,"circle",3)),2&e){var n=g.oxw();g.Udp("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),g.uIk("r",n._getCircleRadius())}}function Ws(e,t){if(1&e&&(g.O4$(),g._UZ(0,"circle",3)),2&e){var n=g.oxw();g.Udp("animation-name","mat-progress-spinner-stroke-rotate-"+n._spinnerAnimationLabel)("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),g.uIk("r",n._getCircleRadius())}}function Xs(e,t){if(1&e&&(g.O4$(),g._UZ(0,"circle",3)),2&e){var n=g.oxw();g.Udp("stroke-dashoffset",n._getStrokeDashOffset(),"px")("stroke-dasharray",n._getStrokeCircumference(),"px")("stroke-width",n._getCircleStrokeWidth(),"%"),g.uIk("r",n._getCircleRadius())}}var Ks=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",ec=(0,jn.pj)(function e(t){f(this,e),this._elementRef=t},"primary"),tc=new g.OlP("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}}),nc=function(e){c(n,e);var t=u(n);function n(e,i,r,o,a){var s;f(this,n),(s=t.call(this,e))._elementRef=e,s._document=r,s._diameter=100,s._value=0,s._fallbackAnimation=!1,s.mode="determinate";var c=n._diameters;return s._spinnerAnimationLabel=s._getSpinnerAnimationLabel(),c.has(r.head)||c.set(r.head,new Set([100])),s._fallbackAnimation=i.EDGE||i.TRIDENT,s._noopAnimations="NoopAnimations"===o&&!!a&&!a._forceAnimations,a&&(a.diameter&&(s.diameter=a.diameter),a.strokeWidth&&(s.strokeWidth=a.strokeWidth)),s}return s(n,[{key:"diameter",get:function(){return this._diameter},set:function(e){this._diameter=(0,En.su)(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}},{key:"strokeWidth",get:function(){return this._strokeWidth||this.diameter/10},set:function(e){this._strokeWidth=(0,En.su)(e)}},{key:"value",get:function(){return"determinate"===this.mode?this._value:0},set:function(e){this._value=Math.max(0,Math.min(100,(0,En.su)(e)))}},{key:"ngOnInit",value:function(){var e=this._elementRef.nativeElement;this._styleRoot=(0,$i.kV)(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate".concat(this._fallbackAnimation?"-fallback":"","-animation"))}},{key:"_getCircleRadius",value:function(){return(this.diameter-10)/2}},{key:"_getViewBox",value:function(){var e=2*this._getCircleRadius()+this.strokeWidth;return"0 0 ".concat(e," ").concat(e)}},{key:"_getStrokeCircumference",value:function(){return 2*Math.PI*this._getCircleRadius()}},{key:"_getStrokeDashOffset",value:function(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}},{key:"_getCircleStrokeWidth",value:function(){return this.strokeWidth/this.diameter*100}},{key:"_attachStyleNode",value:function(){var e=this._styleRoot,t=this._diameter,i=n._diameters,r=i.get(e);if(!r||!r.has(t)){var o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),e.appendChild(o),r||(r=new Set,i.set(e,r)),r.add(t)}}},{key:"_getAnimationText",value:function(){var e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,"".concat(this._spinnerAnimationLabel))}},{key:"_getSpinnerAnimationLabel",value:function(){return this.diameter.toString().replace(".","_")}}]),n}(ec);nc.\u0275fac=function(e){return new(e||nc)(g.Y36(g.SBq),g.Y36($i.t4),g.Y36(d.K0,8),g.Y36(Vi.Qb,8),g.Y36(tc))},nc.\u0275cmp=g.Xpm({type:nc,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(g.uIk("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),g.Udp("width",t.diameter,"px")("height",t.diameter,"px"),g.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[g.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(g.O4$(),g.TgZ(0,"svg",0),g.YNc(1,Hs,1,9,"circle",1),g.YNc(2,Gs,1,7,"circle",2),g.qZA()),2&e&&(g.Udp("width",t.diameter,"px")("height",t.diameter,"px"),g.Q6J("ngSwitch","indeterminate"===t.mode),g.uIk("viewBox",t._getViewBox()),g.xp6(1),g.Q6J("ngSwitchCase",!0),g.xp6(1),g.Q6J("ngSwitchCase",!1))},directives:[d.RF,d.n9],styles:[Ks],encapsulation:2,changeDetection:0}),nc._diameters=new WeakMap;var ic=function(){var e=function(e){c(n,e);var t=u(n);function n(e,i,r,o,a){var s;return f(this,n),(s=t.call(this,e,i,r,o,a)).mode="indeterminate",s}return n}(nc);return e.\u0275fac=function(t){return new(t||e)(g.Y36(g.SBq),g.Y36($i.t4),g.Y36(d.K0,8),g.Y36(Vi.Qb,8),g.Y36(tc))},e.\u0275cmp=g.Xpm({type:e,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(e,t){2&e&&(g.Udp("width",t.diameter,"px")("height",t.diameter,"px"),g.ekj("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color"},features:[g.qOj],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(g.O4$(),g.TgZ(0,"svg",0),g.YNc(1,Ws,1,9,"circle",1),g.YNc(2,Xs,1,7,"circle",2),g.qZA()),2&e&&(g.Udp("width",t.diameter,"px")("height",t.diameter,"px"),g.Q6J("ngSwitch","indeterminate"===t.mode),g.uIk("viewBox",t._getViewBox()),g.xp6(1),g.Q6J("ngSwitchCase",!0),g.xp6(1),g.Q6J("ngSwitchCase",!1))},directives:[d.RF,d.n9],styles:[Ks],encapsulation:2,changeDetection:0}),e}(),rc=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[jn.BQ,d.ez],jn.BQ]}),e}(),oc=a(65939),ac={entry:Oo},sc=function(){var e=function e(t,n,i){var r=this;f(this,e),this.store=t,this.actions$=n,this.overlay=i,this.actions$.pipe((0,m.nW)(R)).subscribe(function(e){r.overlayRef&&(r.overlayRef.close(),r.overlayRef=null);var t=r.store.selectSnapshot(it.entries).filter(function(e){return"folder"!==e.type}),n=r.store.selectSnapshot(it.selectedEntry),i=t.findIndex(function(e){return e.id===(null==n?void 0:n.id)});r.overlayRef=r.overlay.open(ws,{position:"center",origin:"global",panelClass:"file-preview-overlay-container",data:{entries:t.slice(),activeEntry:-1===i?0:i}})})};return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.yh),g.LFG(m.eX),g.LFG(xs.T))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),cc=a(63412),lc=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.actions$=t,this.store=n,this.settings=i,this.actions$.pipe((0,m.nW)(Y)).subscribe(function(e){(0,cc.k)(r.getDownloadUrl(e))})}return s(e,[{key:"getDownloadUrl",value:function(e){var t=this.getEntryHashes(e.entries),n="".concat(this.settings.getBaseUrl(),"/secure/uploads/download?hashes=").concat(t);return e.link&&(n+="&shareable_link=".concat(e.link.id)),e.password&&(n+="&password=".concat(e.password)),n}},{key:"getEntryHashes",value:function(e){return e||(e=this.store.selectSnapshot(it.selectedEntries)),e.map(function(e){return e.hash}).join(",")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(m.yh),g.LFG(Dt.Z))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),uc=a(77001),dc=function(){var e=function e(t){f(this,e),this.data=t};return e.\u0275fac=function(t){return new(t||e)(g.Y36(uc.qD))},e.\u0275cmp=g.Xpm({type:e,selectors:[["loading-toast"]],decls:3,vars:2,consts:[[3,"diameter"],["trans",""]],template:function(e,t){1&e&&(g._UZ(0,"mat-spinner",0),g.TgZ(1,"span",1),g._uU(2),g.qZA()),2&e&&(g.Q6J("diameter",30),g.xp6(2),g.Oqu(t.data.message))},directives:[ic,qt.P],styles:["loading-toast{display:flex;align-items:center}loading-toast .mat-spinner{margin-right:20px}loading-toast .mat-spinner circle{stroke:var(--be-accent-contrast)}"],encapsulation:2,changeDetection:0}),e}(),pc=function(){var e=function(){function e(t,n,i,r){f(this,e),this.actions$=t,this.toast=n,this.store=i,this.router=r,this.entriesDeleted(),this.entriesStarred(),this.entriesUnstarred(),this.entriesMoveFailed(),this.folderCreated(),this.entriesMoved(),this.entriesDeletedForever(),this.entriesRestoredFromTrash(),this.entryRenamed(),this.linkCopiedToClipboard(),this.notEnoughSpace(),this.loadingToast()}return s(e,[{key:"entriesDeleted",value:function(){var e=this;this.actions$.pipe((0,m.Lt)(_e)).subscribe(function(t){e.toast.open({message:"Deleted :count items.",replacements:{count:t.deletedFiles.length}},{action:"UNDO"}).onAction().subscribe(function(){e.store.dispatch(new N(t.deletedFiles))})})}},{key:"entriesStarred",value:function(){var e=this;this.actions$.pipe((0,m.nW)(j)).subscribe(function(t){e.toast.open("Star added.",{action:"UNDO"}).onAction().subscribe(function(){e.store.dispatch(new Q(t.entries))})})}},{key:"entriesUnstarred",value:function(){var e=this;this.actions$.pipe((0,m.nW)(Q)).subscribe(function(t){e.toast.open("Star Removed.",{action:"UNDO"}).onAction().subscribe(function(){e.store.dispatch(new j(t.entries))})})}},{key:"entriesMoved",value:function(){var e=this;this.actions$.pipe((0,m.Lt)(Ie)).subscribe(function(t){e.toast.open({message:"Moved :count items.",replacements:{count:t.entries.length}})})}},{key:"entriesMoveFailed",value:function(){var e=this;this.actions$.pipe((0,m.Lt)(Te)).subscribe(function(){e.toast.open("There was an issue with moving selected items.")})}},{key:"folderCreated",value:function(){var e=this;this.actions$.pipe((0,m.Lt)(Ae)).subscribe(function(){e.toast.open("Folder created.")})}},{key:"entriesDeletedForever",value:function(){var e=this;this.actions$.pipe((0,m.nW)(Ee)).subscribe(function(t){e.toast.open({message:"Permanently deleted :count items.",replacements:{count:t.entries.length}})})}},{key:"entriesRestoredFromTrash",value:function(){var e=this;this.actions$.pipe((0,m.nW)(Pe)).subscribe(function(t){e.toast.open({message:"Restored :count items.",replacements:{count:t.entries.length}})})}},{key:"entryRenamed",value:function(){var e=this;this.actions$.pipe((0,m.nW)(Ze)).subscribe(function(t){e.toast.open({message:":oldName renamed to :newName",replacements:{oldName:t.entry.name,newName:t.newName}})})}},{key:"linkCopiedToClipboard",value:function(){var e=this;this.actions$.pipe((0,m.nW)(pn)).subscribe(function(){e.toast.open("Link copied to clipboard.")})}},{key:"notEnoughSpace",value:function(){var e=this;this.actions$.pipe((0,m.nW)(Fe)).subscribe(function(){e.toast.open("You are out of space. Try to delete some files.",{action:"Upgrade"}).onAction().subscribe(function(){e.router.navigate(["/billing/upgrade"])})})}},{key:"loadingToast",value:function(){var e,t=this;this.actions$.pipe((0,m.nW)(W)).subscribe(function(n){e=t.toast.openComponent(dc,{duration:0,data:{message:n.message}})}),this.actions$.pipe((0,m.nW)(X)).subscribe(function(){e&&(e.dismiss(),e=null)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(nt.F),g.LFG(m.yh),g.LFG(p.F0))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),hc=a(39426),fc=a(61927);function vc(e,t){if(1&e&&(g.TgZ(0,"div",9),g._uU(1),g.TgZ(2,"span",10),g._uU(3,"left"),g.qZA(),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.hij(" ",n.progress.eta," ")}}function gc(e,t){1&e&&(g._UZ(0,"mat-icon",11),g.ALo(1,"trans")),2&e&&g.Q6J("matTooltip",g.lcZ(1,1,t.ngIf))}function mc(e,t){1&e&&g._UZ(0,"mat-icon",14)}function yc(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"span",15),g.NdJ("click",function(){g.CHM(n);var e=g.oxw(2);return e.cancelUpload(e.upload)}),g._uU(1,"Cancel"),g.qZA()}}function bc(e,t){if(1&e&&(g.YNc(0,mc,1,0,"mat-icon",12),g.YNc(1,yc,2,0,"span",13)),2&e){var n=g.oxw();g.Q6J("ngIf",n.upload.completed),g.xp6(1),g.Q6J("ngIf",!n.upload.completed)}}var kc=function(){var e=function(){function e(t,n,i){f(this,e),this.uploadQueue=t,this.store=n,this.cd=i,this.progress={}}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.subscription=this.upload.progress$.pipe((0,hc.p)(260,fc.Z,{leading:!0,trailing:!0})).subscribe(function(t){e.progress=t,e.cd.detectChanges()})}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"cancelUpload",value:function(e){this.uploadQueue.remove(e.id),this.uploadQueue.isEmpty()&&this.store.dispatch(new T)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Ve.A),g.Y36(m.yh),g.Y36(g.sBO))},e.\u0275cmp=g.Xpm({type:e,selectors:[["uploads-panel-item"]],inputs:{upload:"upload"},decls:12,vars:9,consts:[[3,"mime"],[1,"content"],[1,"meta"],[1,"name",3,"matTooltip"],["class","time-left",4,"ngIf"],[1,"actions"],["svgIcon","error","class","error-icon","matTooltipPosition","left",3,"matTooltip",4,"ngIf","ngIfElse"],["noError",""],["mode","determinate","color","accent",3,"value"],[1,"time-left"],["trans",""],["svgIcon","error","matTooltipPosition","left",1,"error-icon",3,"matTooltip"],["svgIcon","check-circle","class","completed-icon",4,"ngIf"],["class","cancel-button","trans","",3,"click",4,"ngIf"],["svgIcon","check-circle",1,"completed-icon"],["trans","",1,"cancel-button",3,"click"]],template:function(e,t){if(1&e&&(g._UZ(0,"file-icon",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div",3),g._uU(4),g.qZA(),g.YNc(5,vc,4,1,"div",4),g.TgZ(6,"div",5),g.YNc(7,gc,2,3,"mat-icon",6),g.ALo(8,"async"),g.YNc(9,bc,2,2,"ng-template",null,7,g.W1O),g.qZA(),g.qZA(),g._UZ(11,"mat-progress-bar",8),g.qZA()),2&e){var n=g.MAs(10);g.Q6J("mime",t.upload.uploadedFile.mime),g.xp6(3),g.Q6J("matTooltip",t.upload.uploadedFile.name),g.xp6(1),g.Oqu(t.upload.uploadedFile.name),g.xp6(1),g.Q6J("ngIf",t.progress.percentage&&t.progress.percentage<100&&!t.upload.error$.value),g.xp6(2),g.Q6J("ngIf",g.lcZ(8,7,t.upload.error$))("ngIfElse",n),g.xp6(4),g.Q6J("value",t.progress.percentage)}},directives:[st,Rr.gM,d.O5,kr.pW,qt.P,at.Hw],pipes:[d.Ov,Ht.R],styles:["uploads-panel-item{display:flex;align-items:center;padding:15px;border-bottom:1px solid var(--be-divider-default)}uploads-panel-item file-icon{width:35px;height:35px;flex:0 0 35px;margin-right:10px}uploads-panel-item .content{flex:1 1 auto;margin-bottom:5px;min-width:0}uploads-panel-item .content .meta{display:flex;align-items:center;padding-bottom:4px}uploads-panel-item .name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}uploads-panel-item .time-left{color:var(--be-secondary-text);font-size:1.3rem;padding-left:15px;white-space:nowrap}uploads-panel-item .actions{margin-left:auto;padding-left:20px}uploads-panel-item .actions .mat-icon{vertical-align:middle;width:22px;height:22px;margin-bottom:4px}uploads-panel-item .completed-icon{color:var(--be-accent-default)}uploads-panel-item .error-icon{color:#f44336}uploads-panel-item .cancel-button{color:var(--be-link);cursor:pointer;font-size:1.2rem;text-transform:uppercase;line-height:22px}uploads-panel-item .cancel-button:hover{text-decoration:underline}uploads-panel-item .mat-progress-bar{height:3px;border-radius:3px}uploads-panel-item .mat-progress-bar .mat-progress-bar-buffer{background-color:var(--be-hover)}uploads-panel-item .mat-progress-bar .mat-progress-bar-fill:after{background-color:var(--be-accent-default)}"],encapsulation:2,changeDetection:0}),e}();function wc(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.ALo(2,"trans"),g.ALo(3,"trans"),g.BQk()),2&e){var n=g.oxw().ngIf;g.xp6(1),g.lnq(" ",g.lcZ(2,3,"Uploading")," ",n.pending," ",g.lcZ(3,5,n.pending>1?"Items":"Item")," ")}}function xc(e,t){if(1&e&&(g.ynx(0),g._uU(1),g.ALo(2,"trans"),g.BQk()),2&e){var n=g.oxw().ngIf;g.xp6(1),g.AsE(" ",n.completed," ",g.lcZ(2,2,"items uploaded")," ")}}function _c(e,t){if(1&e&&(g.ynx(0),g.YNc(1,wc,4,7,"ng-container",2),g.YNc(2,xc,3,4,"ng-container",2),g.BQk()),2&e){var n=t.ngIf;g.xp6(1),g.Q6J("ngIf",n.pending>0),g.xp6(1),g.Q6J("ngIf",0===n.pending)}}function Cc(e,t){1&e&&g._UZ(0,"mat-icon",10)}function Ac(e,t){1&e&&g._UZ(0,"mat-icon",11)}function Zc(e,t){1&e&&g._UZ(0,"uploads-panel-item",12),2&e&&g.Q6J("upload",t.$implicit)}var Oc,Sc=function(){var e=function(){function e(t,n){f(this,e),this.store=t,this.activeUploads=n,this.minimized$=new vt.X(!1)}return s(e,[{key:"ngOnDestroy",value:function(){this.activeUploads.reset()}},{key:"toggleMinimized",value:function(){this.minimized$.next(!this.minimized$.value)}},{key:"close",value:function(){this.store.dispatch(new T)}},{key:"trackById",value:function(e,t){return t.id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(m.yh),g.Y36(Ve.A))},e.\u0275cmp=g.Xpm({type:e,selectors:[["uploads-panel"]],decls:16,vars:15,consts:[[1,"header"],[1,"info"],[4,"ngIf"],[1,"actions"],["mat-icon-button","",3,"click"],["svgIcon","keyboard-arrow-up","class","minimize-icon",4,"ngIf","ngIfElse"],["notMinimized",""],["svgIcon","close"],[1,"uploads-list"],[3,"upload",4,"ngFor","ngForOf","ngForTrackBy"],["svgIcon","keyboard-arrow-up",1,"minimize-icon"],["svgIcon","keyboard-arrow-down",1,"minimize-icon"],[3,"upload"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.YNc(2,_c,3,2,"ng-container",2),g.ALo(3,"async"),g.qZA(),g.TgZ(4,"div",3),g.TgZ(5,"button",4),g.NdJ("click",function(){return t.toggleMinimized()}),g.YNc(6,Cc,1,0,"mat-icon",5),g.ALo(7,"async"),g.YNc(8,Ac,1,0,"ng-template",null,6,g.W1O),g.qZA(),g.TgZ(10,"button",4),g.NdJ("click",function(){return t.close()}),g._UZ(11,"mat-icon",7),g.qZA(),g.qZA(),g.qZA(),g.TgZ(12,"div",8),g.ALo(13,"async"),g.YNc(14,Zc,1,1,"uploads-panel-item",9),g.ALo(15,"async"),g.qZA()),2&e){var n=g.MAs(9);g.xp6(2),g.Q6J("ngIf",g.lcZ(3,7,t.activeUploads.count$)),g.xp6(4),g.Q6J("ngIf",g.lcZ(7,9,t.minimized$))("ngIfElse",n),g.xp6(6),g.ekj("hidden",g.lcZ(13,11,t.minimized$)),g.xp6(2),g.Q6J("ngForOf",g.lcZ(15,13,t.activeUploads.uploads$))("ngForTrackBy",t.trackById)}},directives:[d.O5,Nt.lW,at.Hw,d.sg,kc],pipes:[d.Ov,Ht.R],styles:["uploads-panel{width:380px;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12);background-color:var(--be-background);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}uploads-panel .header{display:flex;align-items:center;background-color:var(--be-accent-default);color:var(--be-accent-contrast);padding:8px}uploads-panel .header .info{padding-left:10px}uploads-panel .header .actions{margin-left:auto}uploads-panel .header .minimize-icon{width:30px;height:30px}uploads-panel .uploads-list{max-height:350px;overflow:auto}"],encapsulation:2,changeDetection:0}),e}(),Ic={origin:"global",hasBackdrop:!1,position:{right:"10px",bottom:"10px"},mobilePosition:{left:0,bottom:0}},Tc=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.actions$=t,this.currentUser=n,this.overlayPanel=i,this.actions$.pipe((0,m.nW)(I)).subscribe(function(){r.openUploadsPanel()}),this.actions$.pipe((0,m.nW)(T)).subscribe(function(){r.closeUploadsPanel()}),this.currentUser.model$.subscribe(function(){r.closeUploadsPanel()})}return s(e,[{key:"openUploadsPanel",value:function(){this.uploadPanelRef||(this.uploadPanelRef=this.overlayPanel.open(Sc,Ic))}},{key:"closeUploadsPanel",value:function(){this.uploadPanelRef&&(this.uploadPanelRef.close(),this.uploadPanelRef=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(Ye.I),g.LFG(xs.T))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),Ec=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.actions$=t,this.dialog=n,this.store=i,this.actions$.pipe((0,m.xt)(F)).subscribe(function(e){r.dialog.open(e.dialog,e.data,e.config)}),this.actions$.pipe((0,m.xt)(M)).subscribe(function(e){r.openConfirmDialog(e)})}return s(e,[{key:"openConfirmDialog",value:function(e){var t=this;this.dialog.open(Sr.z,e.data).beforeClosed().subscribe(function(n){if(n)return t.store.dispatch(e.confirmAction)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(vr.u),g.LFG(m.yh))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),Pc=a(45396),Fc=a(49866),Mc=a(43389),Uc=a(87738),Dc=a(85218),Lc=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({providers:[vr.u],imports:[[d.ez,Pt.UX,Fc.N,Mc.p,Pc.rP,oc.Nh,Ut.Is,Uc.G,at.Ps,Bt.Tx,Nt.ot,Rr.AV,yn.p9,Dc.a]]}),e}(),qc=function(){var e=function e(t,n){var i=this;f(this,e),this.actions$=t,this.domCache=n,this.actions$.pipe((0,m.nW)(z)).subscribe(function(){i.domCache.scrollCont.scrollTo({top:0})})};return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(Oi))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),Nc=function(){var e=function e(t){var n=this;f(this,e),this.store=t,this.store.select(it.activePage).pipe((0,ht.h)(function(e){return!!e})).subscribe(function(){n.store.dispatch(new O)})};return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.yh))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),$c=function(){var t=function(){function t(e,n,i){var r=this;f(this,t),this.store=e,this.actions$=n,this.currentUser=i,this.actions$.pipe((0,m.nW)(Mi.w8),(0,ht.h)(function(e){return e.event.urlAfterRedirects.indexOf("drive")>-1}),(0,ht.h)(function(){return r.currentUser.isLoggedIn()})).subscribe(function(){var e=r.getPageLoadAction();e&&r.store.dispatch(e)})}return s(t,[{key:"getPageLoadAction",value:function(){var e=this.getPageUriParams();switch(e.pageName){case"recent":return new pe;case"trash":return new ve;case"shares":return new fe;case"starred":return new ye;case"search":var t=this.store.selectSnapshot(Mi.uu.state).root.firstChild.queryParams;return new me({filters:t.filters,query:t.query});case"workspaces":return new ge;case"s":return null;default:return new he(e.folderHash)}}},{key:"getPageUriParams",value:function(){var t=e(this.store.selectSnapshot(Mi.uu.url).split("?")[0].split("/").filter(function(e){return!!e}),3);return{pageName:t[1],folderHash:t[2]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(g.LFG(m.yh),g.LFG(m.eX),g.LFG(Ye.I))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t}(),Bc=function(){var e=function e(t,n){var i=this;f(this,e),this.actions$=t,this.store=n,this.actions$.pipe((0,m.nW)(Q)).pipe((0,ht.h)(function(){return"starred"===i.store.selectSnapshot(it.activePage).name})).subscribe(function(e){i.store.dispatch(new J(e.entries))})};return e.\u0275fac=function(t){return new(t||e)(g.LFG(m.eX),g.LFG(m.yh))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac}),e}(),Rc=a(18295),Yc=a(98097),jc=a(95217),Qc=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[d.ez]]}),e}(),Jc=a(93410),Vc=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({providers:[xs.T,is,{provide:ts,useClass:ns}],imports:[[d.ez,Fc.N,ri.eL,Nt.ot,Mc.p]]}),e}(),zc=a(66705),Hc=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[d.ez,Fc.N,Bt.Tx,Nt.ot,at.Ps]]}),e}(),Gc=a(87446),Wc=a(12414),Xc=a(58193),Kc=a(6253),el=[sc,lc,pc,Tc,Ec,qc,Nc,$c,Bc],tl=((Oc=function e(t){var n=this;f(this,e),this.injector=t,el.forEach(function(e){return n.injector.get(e)})}).\u0275fac=function(e){return new(e||Oc)(g.LFG(g.zs3))},Oc.\u0275mod=g.oAB({type:Oc}),Oc.\u0275inj=g.cJS({providers:[xs.T,is,nt.F].concat(el,[{provide:ii,useValue:ac,multi:!0},{provide:Ne,deps:[Dt.Z],useFactory:function(e){var t={multiple:!0},n=e.getJson("drive.validation.allowed_extensions");return n&&(t.extensions=n.map(function(e){return"."+e})),t}},{provide:Wc.F,useValue:{description:"Workspaces are shared spaces where teams can store, share and collaborate on files and folders."}}]),imports:[[d.ez,zc.z,zs,Vc,Pt.u5,Lc,Rc.l,Fc.N,Yc.X,Pt.UX,jc.u,Mc.p,Qc,Jc.v,Hc,Gc.m,Xc.x,Kc.B,Dc.a,fr,Kn,Nt.ot,Ut.Is,kr.Cv,at.Ps,Rr.AV,oc.Nh,rc,Bt.Tx,m.$l.forFeature([it,Et,vn])]]}),Oc);g.B6R(Oo,[zo],[])},79893:function(e,t,n){"use strict";n.d(t,{M:function(){return a},b:function(){return s}});var i=n(83644),r=n(45418),o=n(35866),a=new i.XQ({type:i.Bq.Select,key:"type",description:"Type of the file",defaultValue:"text",options:[{key:"Text",value:"text"},{key:"Audio",value:"audio"},{key:"Video",value:"video"},{key:"Image",value:"image"},{key:"PDF",value:"pdf"},{key:"Spreadsheet",value:"spreadsheet"},{key:"Word Document",value:"word"},{key:"Photoshop",value:"photoshop"},{key:"Archive",value:"archive"},{key:"Folder",value:"folder"}]}),s=[a,new i.XQ({type:i.Bq.Select,key:"public",label:"status",defaultValue:!1,description:"Whether file is publicly accessible",options:[{key:"Private",value:!1},{key:"Public",value:!0}]}),new r.T7({description:"Date file was uploaded"}),new r.yH({description:"Date file was last changed"}),new i.XQ({type:i.Bq.SelectModel,key:"owner_id",label:"Uploader",description:"User that this file was uploaded by",component:o.y})]},35866:function(e,t,n){"use strict";n.d(t,{y:function(){return k}});var i=n(22238),r=n(3679),o=n(54395),a=n(87519),c=n(43190),l=n(5304),u=n(26215),d=n(25917),p=n(37716),h=n(73429),v=n(15515),g=n(76627),m=n(20616),y=n(38583);function b(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"div",9),p.NdJ("click",function(){var e=p.CHM(n).$implicit;return p.oxw().close(e)}),p._UZ(1,"img",10),p.TgZ(2,"div",11),p.TgZ(3,"div",12),p._uU(4),p.qZA(),p.TgZ(5,"div",13),p._uU(6),p.qZA(),p.qZA(),p.qZA()}if(2&e){var i=t.$implicit;p.xp6(1),p.Q6J("src",i.avatar,p.LSH),p.xp6(3),p.Oqu(i.display_name),p.xp6(2),p.Oqu(i.email)}}var k=function(){var e=function(){function e(t,n,i){f(this,e),this.dialogRef=t,this.data=n,this.users=i,this.searchFormControl=new r.NI,this.loading$=new u.X(!1),this.users$=new u.X([])}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.searchFormControl.valueChanges.pipe((0,o.b)(250),(0,a.x)(),(0,c.w)(function(t){return e.searchUsers(t)}),(0,l.K)(function(){return(0,d.of)([])})).subscribe(function(t){e.users$.next(t),e.loading$.next(!1)})}},{key:"searchUsers",value:function(e){return this.loading$.next(!0),e?this.users.getAll({query:e}):(0,d.of)([])}},{key:"close",value:function(e){var t=e&&this.data.normalizeValue?this.normalizeUser(e):e;this.dialogRef.close(t)}},{key:"normalizeUser",value:function(e){return e?{id:e.id,name:e.display_name,image:e.avatar}:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(i.so),p.Y36(i.WI),p.Y36(h.Q))},e.\u0275cmp=p.Xpm({type:e,selectors:[["find-user-modal"]],decls:13,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for user by name or email...",3,"formControl"],[1,"small",3,"isVisible"],[1,"users"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],[1,"email","overflow-hidden"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"h2",1),p._uU(2,"Find User"),p.qZA(),p.TgZ(3,"button",2),p.NdJ("click",function(){return t.close()}),p._UZ(4,"mat-icon",3),p.qZA(),p.qZA(),p.TgZ(5,"mat-dialog-content"),p.TgZ(6,"div",4),p._UZ(7,"input",5),p._UZ(8,"loading-indicator",6),p.ALo(9,"async"),p.qZA(),p.TgZ(10,"div",7),p.YNc(11,b,7,3,"div",8),p.ALo(12,"async"),p.qZA(),p.qZA()),2&e&&(p.xp6(7),p.Q6J("formControl",t.searchFormControl),p.xp6(1),p.Q6J("isVisible",p.lcZ(9,3,t.loading$)),p.xp6(3),p.Q6J("ngForOf",p.lcZ(12,5,t.users$)))},directives:[i.uh,v.P,g.Hw,i.xY,r.Fj,r.JJ,r.oH,m.Q,y.sg],pipes:[y.Ov],styles:["[_nghost-%COMP%]{display:block;width:500px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.users[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0 -15px}.user[_ngcontent-%COMP%]{display:flex;align-items:center;width:calc(50% - 10px);flex-shrink:0;min-width:0;padding:12px;border-radius:4px;cursor:pointer}.user[_ngcontent-%COMP%]:hover{background-color:var(--be-hover)}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),e}()},63868:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var i=(function(e){e[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE",e[e.ESCAPE=27]="ESCAPE",e[e.DELETE=46]="DELETE",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.S=83]="S",e[e.N=78]="N",e[e.A=65]="A",e[e.T=84]="T",e[e.B=66]="B",e[e.C=67]="C",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.F=70]="F",e[e.Y=89]="Y",e[e.Z=90]="Z"}(i||(i={})),i),r=n(22759),o=n(37716),a=function(){var e=function(){function e(){f(this,e),this.bindings=[]}return s(e,[{key:"add",value:function(e,t){var n=this;Array.isArray(e)||(e=[e]),e.forEach(function(e){n.bindings.push({keybind:n.parseKeybindString(e),keybindString:e,callback:t})})}},{key:"addWithPreventDefault",value:function(e,t){this.bindings.push({keybind:this.parseKeybindString(e),keybindString:e,callback:t,preventDefault:!0})}},{key:"listenOn",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.R)(e,"keydown").subscribe(function(e){!n.fireIfInputFocused&&["input","select"].includes(document.activeElement.nodeName.toLowerCase())||t.executeBindings(e)})}},{key:"executeBindings",value:function(e){var t=this;this.bindings.forEach(function(n){t.bindingMatches(n.keybind,e)&&(n.preventDefault&&e.preventDefault&&e.preventDefault(),n.callback(e))})}},{key:"bindingMatches",value:function(e,t){return i[e.key.toUpperCase()]===t.keyCode&&(t.ctrlKey===e.ctrl||t.metaKey===e.ctrl)&&t.shiftKey===e.shift}},{key:"parseKeybindString",value:function(e){var t=e.trim().split("+"),n={ctrl:!1,shift:!1,key:""};return t.forEach(function(e){"ctrl"===(e=e.trim().toLowerCase())?n.ctrl=!0:"shift"===e?n.shift=!0:n.key=e}),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},44666:function(e,t,n){"use strict";n.d(t,{S:function(){return I}});var r=n(3679),o=n(26215),a=n(25917),c=n(54395),l=n(87519),u=n(43190),d=n(5304),p=n(37716),h=n(58341),v=n(38583),g=n(21554),m=n(76627),y=n(72458),b=n(63297),k=["auto"],w=["inputEl"],x=["selectModeTemplate"];function _(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"mat-chip",8),p.NdJ("removed",function(){var e=p.CHM(n).index;return p.oxw().remove(e)}),p._uU(1),p._UZ(2,"mat-icon",9),p.qZA()}if(2&e){var i=t.$implicit,r=p.oxw();p.Q6J("selectable",!1)("removable",!r.selectMode),p.xp6(1),p.hij(" ",r.displayChipValue(i)," ")}}var C=function(e){return{elementRef:e}};function A(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"input",10,11),p.NdJ("matChipInputTokenEnd",function(e){return p.CHM(n),p.oxw().addFromChipInput(e.value)}),p.ALo(2,"trans"),p.qZA()}if(2&e){var i=p.oxw(),r=p.MAs(1),o=p.MAs(6);p.Q6J("placeholder",p.lcZ(2,7,i.placeholder))("type",i.type)("matChipInputFor",r)("matChipInputAddOnBlur",!0)("matAutocomplete",o)("matAutocompleteConnectedTo",p.VKq(9,C,i.el))("formControl",i.formControl)}}function Z(e,t){if(1&e&&(p.TgZ(0,"mat-option",12),p._uU(1),p.qZA()),2&e){var n=t.$implicit,i=p.oxw();p.Q6J("value",n),p.xp6(1),p.Oqu(i.displayChipValue(n))}}function O(e,t){if(1&e&&(p.TgZ(0,"mat-option",12),p._uU(1),p.qZA()),2&e){var n=t.$implicit,i=p.oxw(2);p.Q6J("value",n),p.xp6(1),p.Oqu(i.displayChipValue(n))}}function S(e,t){1&e&&p.YNc(0,O,2,2,"mat-option",6),2&e&&p.Q6J("ngForOf",t.suggestions)}var I=function(){var e=function(){function e(t){f(this,e),this.el=t,this.type="text",this.emailsInput=!1,this.selectMode=!1,this.formControl=new r.NI,this.items$=new o.X([]),this.suggestedValues$=new o.X([])}return s(e,[{key:"suggestedValues",set:function(e){this.suggestedValues$.next(e)}},{key:"ngOnInit",value:function(){this.suggestFn&&this.bindToSearchControl()}},{key:"ngAfterViewInit",value:function(){this.emailsInput&&this.parseEmailsOnPaste()}},{key:"remove",value:function(e){var t=i(this.items$.value);t.splice(e,1),this.items$.next(t),this.propagateChange(this.items$.value)}},{key:"addFromChipInput",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!e||this.matAutocomplete.isOpen||this.selectMode||this.add(e,t)}},{key:"addFromAutocomplete",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.add(e,t)}},{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e="string"==typeof e?e.trim():e;var n=this.findValueIndex(e)>-1;e&&!n&&(this.items$.next([].concat(i(this.items$.value),[e])),t&&this.propagateChange(this.items$.value)),this.inputEl&&(this.inputEl.nativeElement.value=""),this.formControl.setValue(null),this.suggestedValues$.next([])}},{key:"findValueIndex",value:function(e){return"string"==typeof e?this.items$.value.indexOf(e):this.items$.value.findIndex(function(t){return t.id===e.id})}},{key:"writeValue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&t.length)t.forEach(function(t){return e.add(t,!1)});else if(this.items$.value.length)for(;0!==this.items$.value.length;)this.remove(0)}},{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(){}},{key:"bindToSearchControl",value:function(){var e=this;this.formControl.valueChanges.pipe((0,c.b)(150),(0,l.x)(),(0,u.w)(function(t){return t?e.suggestFn(t):(0,a.of)([])}),(0,d.K)(function(){return(0,a.of)([])})).subscribe(function(t){var n=t.filter(function(t){return-1===e.findValueIndex(t)});e.suggestedValues$.next(n)})}},{key:"displayChipValue",value:function(e){return"object"==typeof e?e.name:e}},{key:"parseEmailsOnPaste",value:function(){var e=this;this.inputEl.nativeElement.addEventListener("paste",function(t){var n=(t.clipboardData||window.clipboardData).getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(n){t.preventDefault();var i=window.getSelection();i.rangeCount&&(i.deleteFromDocument(),n.forEach(function(t){return e.add(t)}))}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(p.Y36(p.SBq))},e.\u0275cmp=p.Xpm({type:e,selectors:[["chip-input"]],viewQuery:function(e,t){var n;(1&e&&(p.Gf(k,5),p.Gf(w,5),p.Gf(x,5)),2&e)&&(p.iGM(n=p.CRH())&&(t.matAutocomplete=n.first),p.iGM(n=p.CRH())&&(t.inputEl=n.first),p.iGM(n=p.CRH())&&(t.selectModeTemplate=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&p.ekj("select-mode",t.selectMode)},inputs:{placeholder:"placeholder",type:"type",emailsInput:"emailsInput",suggestFn:"suggestFn",selectMode:"selectMode",suggestedValues:"suggestedValues"},features:[p._Bn([{provide:r.JU,useExisting:e,multi:!0}])],decls:11,vars:9,consts:[[3,"selectable"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["class","mat-chip-input mat-input-element",3,"placeholder","type","matChipInputFor","matChipInputAddOnBlur","matAutocomplete","matAutocompleteConnectedTo","formControl","matChipInputTokenEnd",4,"ngIf"],[1,"chip-input-autocomplete-panel",3,"autoActiveFirstOption","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["selectModeTemplate",""],[3,"selectable","removable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"mat-chip-input","mat-input-element",3,"placeholder","type","matChipInputFor","matChipInputAddOnBlur","matAutocomplete","matAutocompleteConnectedTo","formControl","matChipInputTokenEnd"],["inputEl",""],[3,"value"]],template:function(e,t){1&e&&(p.TgZ(0,"mat-chip-list",0,1),p.YNc(2,_,3,3,"mat-chip",2),p.ALo(3,"async"),p.YNc(4,A,3,11,"input",3),p.qZA(),p.TgZ(5,"mat-autocomplete",4,5),p.NdJ("optionSelected",function(e){return t.addFromAutocomplete(e.option.value)}),p.YNc(7,Z,2,2,"mat-option",6),p.ALo(8,"async"),p.qZA(),p.YNc(9,S,1,1,"ng-template",null,7,p.W1O)),2&e&&(p.Q6J("selectable",!1),p.xp6(2),p.Q6J("ngForOf",p.lcZ(3,5,t.items$)),p.xp6(2),p.Q6J("ngIf",!t.selectMode),p.xp6(1),p.Q6J("autoActiveFirstOption",!0),p.xp6(2),p.Q6J("ngForOf",p.lcZ(8,7,t.suggestedValues$)))},directives:[h.qn,v.sg,v.O5,g.XC,h.HS,m.Hw,h.qH,h.oH,g.ZL,r.Fj,r.JJ,r.oH,y.ey],pipes:[v.Ov,b.R],styles:["chip-input{display:block;min-height:46px}chip-input .mat-chip-list-wrapper{width:100%;height:100%;color:inherit;border:1px solid var(--be-divider-default);padding:6px;line-height:normal;font-size:1.4rem;font-family:inherit;background-color:inherit;box-sizing:border-box;border-radius:2px;margin:0}chip-input .mat-chip-input{height:24px;font:inherit;background:0 0;color:currentColor;border:none;outline:0;padding:0;margin:0;width:0;max-width:100%;vertical-align:bottom;text-align:inherit}chip-input .mat-chip-input:focus{outline:none;box-shadow:none}.chip-input-select-panel{background-color:var(--be-background);min-width:180px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}"],encapsulation:2,changeDetection:0}),e}()},87738:function(e,t,n){"use strict";n.d(t,{G:function(){return p}});var i=n(38583),r=n(58341),o=n(76627),a=n(3679),s=n(49866),c=n(21554),l=n(51095),u=n(72458),d=n(37716),p=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.ez,r.Hi,c.Bb,a.UX,s.N,l.ot,o.Ps,u.si]]}),e}()},64833:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var i=n(37716),r=n(84430),o=function(){var e=function(){function e(t){f(this,e),this.theme=t,this.animation="wave",this.variant="text",this.dark=this.theme.isDarkMode()}return s(e,[{key:"pulsate",get:function(){return"pulsate"===this.animation}},{key:"wave",get:function(){return"wave"===this.animation}},{key:"avatar",get:function(){return"avatar"===this.variant}},{key:"text",get:function(){return"text"===this.variant}},{key:"rect",get:function(){return"rect"===this.variant}},{key:"icon",get:function(){return"icon"===this.variant}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Y36(r.f))},e.\u0275cmp=i.Xpm({type:e,selectors:[["skeleton"]],hostAttrs:["aria-busy","true","aria-valuemin","0","aria-valuemax","100","aria-valuetext","Loading...","role","progressbar"],hostVars:14,hostBindings:function(e,t){2&e&&i.ekj("dark",t.dark)("pulsate",t.pulsate)("wave",t.wave)("avatar",t.avatar)("text",t.text)("rect",t.rect)("icon",t.icon)},inputs:{animation:"animation",variant:"variant"},decls:0,vars:0,template:function(e,t){},styles:['@charset "UTF-8";[_nghost-%COMP%]{display:inline-block;overflow:hidden;position:relative;background-color:var(--be-divider-lighter);background-repeat:no-repeat;border-radius:4px;width:100%;height:100%;will-change:transform}.wave[_nghost-%COMP%]{-webkit-animation:wave 2s ease-in-out infinite;animation:wave 2s ease-in-out infinite;background-size:200px 100%;background-image:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.6),hsla(0,0%,100%,0))}.wave.dark[_nghost-%COMP%]{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.pulsate[_nghost-%COMP%]{-webkit-animation:pulse 1.5s ease-in-out infinite;animation:pulse 1.5s ease-in-out infinite;-webkit-animation-delay:.5s;animation-delay:.5s}.avatar[_nghost-%COMP%]{width:40px;height:40px;margin-right:10px;border-radius:4px;flex-shrink:0}.circle[_nghost-%COMP%]{border-radius:50%}.icon[_nghost-%COMP%]{width:24px;height:24px;margin-left:8px;margin-right:8px}.text[_nghost-%COMP%]{height:1.4rem;vertical-align:middle}.text[_nghost-%COMP%]:before{content:"\xa0"}@-webkit-keyframes wave{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}@keyframes wave{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),e}()},87446:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var i=n(38583),r=n(37716),o=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.ez]]}),e}()},24162:function(e,t,n){"use strict";function i(e,t){return e in t}n.d(t,{w:function(){return i}})},84889:function(e,t,n){"use strict";function i(e){var t=Object.assign({},e);return Object.keys(t).forEach(function(e){null!=t[e]&&""!==t[e]||delete t[e]}),t}n.d(t,{N:function(){return i}})},83644:function(e,t,n){"use strict";n.d(t,{XQ:function(){return i},Bq:function(){return r},pg:function(){return o},Hi:function(){return a}});var i=function e(t){f(this,e),this.defaultValue=void 0!==t.defaultValue?t.defaultValue:"",this.key=t.key||"",this.label=t.label||t.key||"",this.description=t.description||"",this.defaultOperator=t.defaultOperator||o.eq,this.required=!!t.required,this.order=void 0===t.order?1:t.order,this.type=t.type||r.Select,this.inputType=t.inputType,this.options=t.options||[],this.operators=t.operators,this.component=t.component},r=(function(e){e.Select="select",e.DatePicker="datePicker",e.SelectModel="selectModel",e.Input="input",e.StaticValue="staticValue"}(r||(r={})),r),o=(function(e){e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.doesntHave="doesntHave"}(o||(o={})),o),a=[o.eq,o.ne,o.gt,o.gte,o.lt,o.lte]},45418:function(e,t,n){"use strict";n.d(t,{T7:function(){return o},yH:function(){return a}});var i=n(83644),r=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).type=i.Bq.DatePicker,e.description="Date file was uploaded",e.operators=i.Hi,e.defaultOperator=i.pg.lte,e.defaultValue=(new Date).toISOString().split("T")[0],e}return n}(i.XQ),o=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).key="created_at",e.label="Created At",e}return n}(r),a=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).key="updated_at",e.label="Updated At",e}return n}(r)},75499:function(t,n,i){"use strict";i.d(n,{k:function(){return ne}});var r=i(37716),o=i(39761),a=i(88002),c=i(87519),l=i(45435),u=i(26215),d=i(90739),p=i(66682),h=i(22759),v=i(15515),g=i(38583),m=i(76627),y=["filterSuggestion"];function b(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"div",8,9),r.NdJ("click",function(){var e=r.CHM(n).$implicit;return r.oxw().filterSelected.emit(e.value)}),r.TgZ(2,"div",10),r._uU(3),r.qZA(),r.TgZ(4,"div",2),r._uU(5),r.qZA(),r.qZA()}if(2&e){var i=t.$implicit,o=t.index;r.uIk("data-filter-key",i.key)("data-index",o),r.xp6(3),r.Oqu(i.value.label),r.xp6(2),r.Oqu(i.value.description)}}var k=function(){var e=function(){function e(){f(this,e),this.filterSelected=new r.vpe,this.originalOrder=function(){return 0}}return s(e,[{key:"anyFocused",value:function(){return document.activeElement.classList.contains("filter-suggestion-item")}},{key:"focusItemAt",value:function(e){this.items.get(e).nativeElement.focus()}},{key:"getFocusedFilter",value:function(){if(this.anyFocused()){var e=document.activeElement.dataset.filterKey;return this.filters[e]}}},{key:"getFocusedIndex",value:function(){if(this.anyFocused()){var e=document.activeElement;return parseInt(e.dataset.index)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["filter-suggestions"]],viewQuery:function(e,t){var n;(1&e&&r.Gf(y,5),2&e)&&(r.iGM(n=r.CRH())&&(t.items=n))},inputs:{filters:"filters"},outputs:{filterSelected:"filterSelected"},decls:13,vars:4,consts:[[1,"table"],[1,"filter-suggestion-header","row"],["trans","",1,"column"],["role","list",1,"body"],["role","listitem","class","row filter-suggestion-item","tabindex","0",3,"click",4,"ngFor","ngForOf"],[1,"help-container"],["svgIcon","info"],["trans",""],["role","listitem","tabindex","0",1,"row","filter-suggestion-item",3,"click"],["filterSuggestion",""],["trans","",1,"column","label-column"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r._uU(3,"Field"),r.qZA(),r.TgZ(4,"div",2),r._uU(5,"Description"),r.qZA(),r.qZA(),r.TgZ(6,"div",3),r.YNc(7,b,6,4,"div",4),r.ALo(8,"keyvalue"),r.qZA(),r.qZA(),r.TgZ(9,"div",5),r._UZ(10,"mat-icon",6),r.TgZ(11,"div",7),r._uU(12," Use arrows, tab or mouse to navigate added filters. Backspace or delete key to remove them. "),r.qZA(),r.qZA()),2&e&&(r.xp6(7),r.Q6J("ngForOf",r.xi3(8,1,t.filters,t.originalOrder)))},directives:[v.P,g.sg,m.Hw],pipes:[g.Nd],styles:["[_nghost-%COMP%]{display:none;position:absolute;left:0;z-index:10;background-color:var(--be-background);width:100%;border-radius:4px;overflow:hidden;color:var(--be-text);box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.visible[_nghost-%COMP%]{display:block}.filter-suggestion-header[_ngcontent-%COMP%]{background-color:var(--be-background-alternative)}.row[_ngcontent-%COMP%]{display:flex;height:55px;padding:15px;border-bottom:1px solid var(--be-divider-lighter)}.row[_ngcontent-%COMP%]:not(.header){cursor:pointer}.row[_ngcontent-%COMP%]:not(.header):focus, .row[_ngcontent-%COMP%]:not(.header):hover{background-color:var(--be-hover)}.row[_ngcontent-%COMP%]:not(.header):focus{outline:none}.column[_ngcontent-%COMP%]{flex:0 0 48%}.label-column[_ngcontent-%COMP%]{text-transform:capitalize}.help-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background-color:var(--be-accent-emphasis)}.help-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:10px;color:var(--be-accent-default)}"],changeDetection:0}),e}(),w=i(58480),x=i(95439),_=i(3679),C=i(15381);function A(e,t){if(1&e&&(r.ynx(0),r._UZ(1,"img",2),r.TgZ(2,"div",3),r._uU(3),r.qZA(),r.BQk()),2&e){var n=t.ngIf;r.xp6(1),r.Q6J("src",n.image,r.LSH),r.xp6(2),r.Oqu(n.name)}}function Z(e,t){1&e&&(r.TgZ(0,"div",4),r._uU(1,"Click to select"),r.qZA())}var O=function(){var e=function(){function e(t){f(this,e),this.dialog=t,this.value$=new u.X(null)}return s(e,[{key:"registerOnChange",value:function(e){this.propagateChange=e}},{key:"registerOnTouched",value:function(e){}},{key:"writeValue",value:function(e){this.value$.next(e)}},{key:"onClick",value:function(){this.openSelectModelDialog()}},{key:"openSelectModelDialog",value:function(){var e=this;this.dialog.open(this.component,{normalizeValue:!0}).afterClosed().subscribe(function(t){t&&(e.value$.next(t),e.propagateChange(t))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Y36(C.u))},e.\u0275cmp=r.Xpm({type:e,selectors:[["select-model-control"]],hostBindings:function(e,t){1&e&&r.NdJ("click",function(){return t.onClick()})},inputs:{component:"component"},features:[r._Bn([{provide:_.JU,useExisting:e,multi:!0}])],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["defaultHint",""],[1,"image",3,"src"],[1,"name"],["trans",""]],template:function(e,t){if(1&e&&(r.YNc(0,A,4,2,"ng-container",0),r.ALo(1,"async"),r.YNc(2,Z,2,0,"ng-template",null,1,r.W1O)),2&e){var n=r.MAs(3);r.Q6J("ngIf",r.lcZ(1,2,t.value$))("ngIfElse",n)}},directives:[g.O5,v.P],pipes:[g.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;padding:0 8px;cursor:pointer}img[_ngcontent-%COMP%]{height:22px;width:22px;border-radius:4px;margin-right:8px;flex-shrink:0;-o-object-fit:cover;object-fit:cover}"],changeDetection:0}),e}(),S={"=":"is","!=":"is not",">":"is greater than",">=":"is greater than or equal to","<":"is less than","<=":"is less than or equal to",has:"Include",doesntHave:"Do not include"},I=i(96605),T=function(){var e=function(){function e(t){f(this,e),this.breakpoints=t}return s(e,[{key:"transform",value:function(e,t){return t||this.breakpoints.isMobile$.value?e:S[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Y36(I.S,16))},e.\u0275pipe=r.Yjl({name:"operatorDisplayName",type:e,pure:!0}),e}(),E=["select"];function P(e,t){if(1&e&&(r.TgZ(0,"option",4),r._uU(1),r.ALo(2,"operatorDisplayName"),r.qZA()),2&e){var n=t.$implicit,i=r.oxw();r.Q6J("value",n),r.xp6(1),r.hij(" ",r.xi3(2,2,n,i.compact)," ")}}var F=function(){var e=function(){function e(){f(this,e)}return s(e,[{key:"ngAfterViewInit",value:function(){this.resizeSelect()}},{key:"resizeSelect",value:function(){var e,t=null===(e=this.select)||void 0===e?void 0:e.nativeElement;t&&t.selectedIndex>-1&&(t.style.width="".concat(t.options[t.selectedIndex].label.length+5,"ch"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["operator-select"]],viewQuery:function(e,t){var n;(1&e&&r.Gf(E,5),2&e)&&(r.iGM(n=r.CRH())&&(t.select=n.first))},inputs:{compact:"compact",formGroup:"formGroup",operators:"operators"},decls:4,vars:2,consts:[[3,"formGroup"],["formControlName","operator",1,"operator-select",3,"ngModelChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(r.ynx(0,0),r.TgZ(1,"select",1,2),r.NdJ("ngModelChange",function(){return t.resizeSelect()}),r.YNc(3,P,3,5,"option",3),r.qZA(),r.BQk()),2&e&&(r.Q6J("formGroup",t.formGroup),r.xp6(3),r.Q6J("ngForOf",t.operators))},directives:[_.JL,_.sg,_.EJ,_.JJ,_.u,g.sg,_.YN,_.Kr],pipes:[T],styles:['[_nghost-%COMP%]{display:flex;align-items:center;position:relative;height:100%}[_nghost-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;width:50%;left:0;background-color:var(--be-chip)}[_nghost-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:50%;right:0;background-color:var(--be-accent-default)}.operator-select[_ngcontent-%COMP%]{transition:width .1s ease-in-out 0s;padding:2px 8px;min-width:60px;max-width:200px;height:27px;color:var(--be-accent-default);z-index:10;background-color:var(--be-accent-contrast);text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:10px;-moz-text-align-last:center;text-align-last:center;border:1px solid transparent}.operator-select[_ngcontent-%COMP%]:focus-visible{outline:0;border-color:var(--be-accent-default);box-shadow:0 0 0 1px #fff}'],changeDetection:0}),e}(),M=["valueInput"];function U(e,t){if(1&e&&r._UZ(0,"operator-select",8),2&e){var n=r.oxw().ngIf,i=r.oxw();r.Q6J("compact",i.compact)("formGroup",n)("operators",i.filter.operators)}}function D(e,t){if(1&e&&(r.TgZ(0,"option",16),r._uU(1),r.qZA()),2&e){var n=t.$implicit;r.Q6J("ngValue",n.value),r.xp6(1),r.hij(" ",n.key," ")}}function L(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"select",10,11),r.NdJ("ngModelChange",function(){return r.CHM(n),r.oxw(2).resizeInput()}),r.YNc(3,D,2,2,"option",12),r.qZA(),r.O4$(),r.TgZ(4,"svg",13),r._UZ(5,"path",14),r._UZ(6,"path",15),r.qZA(),r.qZA()}if(2&e){var i=r.oxw(2);r.xp6(1),r.Q6J("id",i.key)("compareWith",i.compareFilterValueFn),r.xp6(2),r.Q6J("ngForOf",i.filter.options)}}function q(e,t){if(1&e&&(r.TgZ(0,"div",17),r._UZ(1,"input",18,11),r.qZA()),2&e){var n=r.oxw(2);r.xp6(1),r.Q6J("id",n.key)}}function N(e,t){if(1&e&&r._UZ(0,"select-model-control",19,11),2&e){var n=r.oxw(2);r.Q6J("component",n.filter.component)("id",n.key)}}function $(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"input",20,11),r.NdJ("ngModelChange",function(){return r.CHM(n),r.oxw(2).resizeInput()}),r.qZA(),r.qZA()}if(2&e){var i=r.oxw(2);r.xp6(1),r.Q6J("id",i.key)("type",i.filter.inputType||"text")}}function B(e,t){if(1&e){var n=r.EpF();r.ynx(0,1),r.TgZ(1,"div",2),r.NdJ("click",function(){return r.CHM(n),r.oxw().el.nativeElement.focus()}),r._uU(2),r.qZA(),r.YNc(3,U,1,3,"operator-select",3),r.ynx(4,4),r.YNc(5,L,7,3,"div",5),r.YNc(6,q,3,1,"div",6),r.YNc(7,N,2,2,"select-model-control",7),r.YNc(8,$,3,2,"div",5),r.BQk(),r.BQk()}if(2&e){var i=t.ngIf,o=r.oxw();r.Q6J("formGroup",i),r.xp6(2),r.Oqu(o.filter.label),r.xp6(1),r.Q6J("ngIf",o.filter.operators),r.xp6(1),r.Q6J("ngSwitch",o.filter.type),r.xp6(1),r.Q6J("ngSwitchCase","select"),r.xp6(1),r.Q6J("ngSwitchCase","datePicker"),r.xp6(1),r.Q6J("ngSwitchCase","selectModel"),r.xp6(1),r.Q6J("ngSwitchCase","input")}}var R=function(){var e=function(){function e(t){f(this,e),this.el=t,this.compareFilterValueFn=function(e,t){return x(e,t)}}return s(e,[{key:"ngAfterViewInit",value:function(){this.resizeInput()}},{key:"focus",value:function(){this.el.nativeElement.focus()}},{key:"focusValueInput",value:function(){var e;this.valueInput instanceof O?this.valueInput.openSelectModelDialog():(null===(e=this.valueInput)||void 0===e?void 0:e.nativeElement)&&this.valueInput.nativeElement.focus()}},{key:"resizeInput",value:function(){var e,t=null===(e=this.valueInput)||void 0===e?void 0:e.nativeElement;if("SELECT"===(null==t?void 0:t.nodeName)){var n=t;n.selectedIndex>-1&&(n.style.width="".concat(n.options[n.selectedIndex].label.length+5,"ch"))}else"INPUT"===(null==t?void 0:t.nodeName)&&"date"!==t.type&&(t.style.width="".concat(t.value.length+7,"ch"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq))},e.\u0275cmp=r.Xpm({type:e,selectors:[["active-filter"]],viewQuery:function(e,t){var n;(1&e&&r.Gf(M,5),2&e)&&(r.iGM(n=r.CRH())&&(t.valueInput=n.first))},hostAttrs:["tabIndex","0","role","button"],hostVars:1,hostBindings:function(e,t){2&e&&r.uIk("data-control-key",t.key)},inputs:{key:"key",compact:"compact",form:"form",filter:"filter"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["trans","",1,"filter-label",3,"click"],[3,"compact","formGroup","operators",4,"ngIf"],[3,"ngSwitch"],["class","filter-input-container",4,"ngSwitchCase"],["class","date-picker-container",4,"ngSwitchCase"],["formControlName","value","class","filter-value select-model-input",3,"component","id",4,"ngSwitchCase"],[3,"compact","formGroup","operators"],[1,"filter-input-container"],["formControlName","value",1,"filter-input","filter-value",3,"id","compareWith","ngModelChange"],["valueInput",""],["trans","",3,"ngValue",4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"caret-svg"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],["trans","",3,"ngValue"],[1,"date-picker-container"],["type","date","formControlName","value",1,"date-input","filter-value",3,"id"],["formControlName","value",1,"filter-value","select-model-input",3,"component","id"],["formControlName","value","min","1","required","",1,"filter-input","filter-value",3,"id","type","ngModelChange"]],template:function(e,t){1&e&&r.YNc(0,B,9,8,"ng-container",0),2&e&&r.Q6J("ngIf",t.form.controls[t.key])},directives:[g.O5,_.JL,_.sg,v.P,g.RF,g.n9,F,_.EJ,_.JJ,_.u,g.sg,_.YN,_.Kr,_.Fj,O,_.Q7],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:flex-start;border-radius:4px;height:37px;background-color:var(--be-chip);margin:3px 5px 3px 0}[_nghost-%COMP%]:focus{outline:none;box-shadow:var(--be-accent-default) 0 0 0 1px}.filter-label[_ngcontent-%COMP%]{color:var(--be-text);line-height:37px;cursor:pointer;padding:0 12px;text-transform:capitalize;white-space:nowrap;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.filter-input-container[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;border-radius:0 4px 4px 0}.caret-svg[_ngcontent-%COMP%]{position:absolute;top:9.5px;right:5px;z-index:11;fill:var(--be-accent-contrast);width:18px;height:18px;pointer-events:none}.filter-input[_ngcontent-%COMP%]{border:0;transition:width .1s ease-in-out 0s;padding:0 12px;min-width:60px;max-width:200px;z-index:10;text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:100%;font-weight:500}select.filter-select[_ngcontent-%COMP%]{padding:0 25px 0 12px}.date-input[_ngcontent-%COMP%]{position:relative;max-width:30ch;line-height:37px;height:37px;font-size:inherit;border:none;margin:0;padding:0 12px;width:20ch;font-weight:500}.select-model-input[_ngcontent-%COMP%]{min-width:76px;height:100%}.filter-value[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-radius:0 4px 4px 0}"],changeDetection:0}),e}();function Y(e,t){if(1&e&&r._UZ(0,"active-filter",2),2&e){var n=t.ngIf,i=r.oxw(),o=i.$implicit,a=i.index,s=r.oxw();r.Q6J("compact",s.compact)("key",o.key)("form",s.form)("filter",n),r.uIk("data-index",a)}}function j(e,t){if(1&e&&(r.ynx(0),r.YNc(1,Y,1,5,"active-filter",1),r.BQk()),2&e){var n=t.$implicit,i=r.oxw();r.xp6(1),r.Q6J("ngIf",i.config[n.value.value.key])}}var Q=["*"],J=function(){var e=function(){function e(t,n,i){f(this,e),this.fb=t,this.cd=n,this.el=i}return s(e,[{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.fb.group({key:e.key,value:void 0!==t.value?t.value:e.defaultValue,operator:t.operator||e.defaultOperator}),i=Object.keys(this.form.controls).length+(0,w.O)(8);this.form.addControl(i,n),this.cd.detectChanges(),t.focus&&this.filters.last.focusValueInput()}},{key:"removeByKey",value:function(e){this.form.removeControl(e),this.cd.markForCheck()}},{key:"removeCurrentlyFocused",value:function(){var e=document.activeElement;this.removeByKey(e.dataset.controlKey)}},{key:"anyFocused",value:function(){return"ACTIVE-FILTER"===document.activeElement.nodeName}},{key:"focusLast",value:function(){this.filters.last&&this.filters.last.focus()}},{key:"focusPrevious",value:function(){var e=this.getFocusedIndex(),t=this.filters.get(e-1);t&&t.focus()}},{key:"getByIndex",value:function(e){return this.filters.get(e)}},{key:"lastIsFocused",value:function(){return this.getFocusedIndex()===this.filters.length-1}},{key:"getFocusedIndex",value:function(){var e=document.activeElement.dataset.index;return e?parseInt(e):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Y36(_.qu),r.Y36(r.sBO),r.Y36(r.SBq))},e.\u0275cmp=r.Xpm({type:e,selectors:[["active-filters"]],viewQuery:function(e,t){var n;(1&e&&r.Gf(R,5),2&e)&&(r.iGM(n=r.CRH())&&(t.filters=n))},inputs:{compact:"compact",form:"form",config:"config"},ngContentSelectors:Q,decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"compact","key","form","filter",4,"ngIf"],[3,"compact","key","form","filter"]],template:function(e,t){1&e&&(r.F$t(),r.YNc(0,j,2,1,"ng-container",0),r.ALo(1,"keyvalue"),r.Hsn(2)),2&e&&r.Q6J("ngForOf",r.lcZ(1,1,t.form.controls))},directives:[g.sg,g.O5,R],pipes:[g.Nd],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-wrap:wrap;align-items:center}"],changeDetection:0}),e}(),V=i(63423),z=i(63868),H=i(51095),G=i(63297),W=["searchInput"],X=["filterSuggestion"];function K(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"button",8),r.NdJ("click",function(){return r.CHM(n),r.oxw().clearSearch()}),r._UZ(1,"mat-icon",9),r.qZA()}}function ee(e,t){1&e&&(r.TgZ(0,"span",13),r._uU(1,"Filter"),r.qZA())}function te(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(n),r.oxw().toggleFilterDropdown()}),r._UZ(1,"mat-icon",11),r.YNc(2,ee,2,0,"span",12),r.qZA()}if(2&e){var i=r.oxw();r.xp6(2),r.Q6J("ngIf",!i.compact)}}var ne=function(){var t=function(){function t(e,n,i,o,a,s){f(this,t),this.fb=e,this.route=n,this.el=i,this.keybinds=o,this.cd=a,this.router=s,this.filterChange=new r.vpe,this.inputFocus=new r.vpe,this.form=this.fb.group({}),this.filterBarHeight=0,this.filterDropdownVisible$=new u.X(!1)}return s(t,[{key:"filters",set:function(e){var t=this;this.keyedFilters={},(e||[]).forEach(function(e){t.keyedFilters[e.key]=e})}},{key:"ngOnInit",value:function(){this.haveFiltersOrQuery$=(0,d.aj)([this.searchControl.valueChanges.pipe((0,o.O)(null)),this.form.valueChanges.pipe((0,o.O)(null))]).pipe((0,a.U)(function(t){var n=e(t,2),i=n[0],r=n[1];return i||r&&0!==Object.keys(r).length}))}},{key:"ngAfterViewInit",value:function(){this.watchForSizeChanges(),this.setFiltersFromQuery(),this.setupKeybinds(),this.subscribeToCloseActions(),this.bindToFormValueChange()}},{key:"onClick",value:function(e){e.target!==this.el.nativeElement&&e.target!==this.activeFilters.el.nativeElement||this.searchInput.nativeElement.focus()}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.closeActionsStream$)||void 0===e||e.unsubscribe()}},{key:"clearSearch",value:function(){var e=this;Object.keys(this.form.controls).forEach(function(t){e.activeFilters.removeByKey(t)}),this.searchControl.reset(),this.form.reset()}},{key:"toggleFilterDropdown",value:function(){this.filterDropdownVisible$.next(!this.filterDropdownVisible$.value)}},{key:"addFilterFromDropdownClick",value:function(e){this.activeFilters.add(e,{focus:!0}),this.filterDropdownVisible$.next(!1)}},{key:"searchInputIsFocused",value:function(){return document.activeElement===this.searchInput.nativeElement}},{key:"cursorAtStartOfSearchInput",value:function(){return this.searchInputIsFocused()&&0===this.searchInput.nativeElement.selectionStart}},{key:"cursorAtEndOfSearchInput",value:function(){return this.searchInputIsFocused()&&this.searchInput.nativeElement.selectionStart===this.searchInput.nativeElement.value.length}},{key:"bindToFormValueChange",value:function(){var e=this;this.form.valueChanges.pipe((0,a.U)(function(e){return Object.keys(e).length?e:null}),(0,c.x)()).subscribe(function(t){e.filterChange.emit(t?ie(t):null)})}},{key:"watchForSizeChanges",value:function(){var e=this;new ResizeObserver(function(t){e.filterBarHeight=t[0].contentRect.height}).observe(this.el.nativeElement,{box:"border-box"})}},{key:"setFiltersFromQuery",value:function(){var e=this,t=this.router.routerState.root.snapshot.queryParams;t.filters&&re(t.filters).forEach(function(t){e.activeFilters.add(e.keyedFilters[t.key],t)}),t.query&&this.searchControl.setValue(t.query)}},{key:"setupKeybinds",value:function(){var e=this;this.keybinds.add(["backspace","delete"],function(){return e.cursorAtStartOfSearchInput()?e.activeFilters.focusLast():e.activeFilters.anyFocused()?(e.activeFilters.removeCurrentlyFocused(),e.searchInput.nativeElement.focus()):void 0}),this.keybinds.add("arrow_left",function(t){e.cursorAtStartOfSearchInput()?(e.activeFilters.focusLast(),t.preventDefault()):e.activeFilters.anyFocused()&&(e.activeFilters.focusPrevious(),t.preventDefault())}),this.keybinds.add("arrow_right",function(t){if(e.activeFilters.anyFocused()){t.preventDefault();var n=e.activeFilters.getFocusedIndex(),i=e.activeFilters.getByIndex(n+1);i?i.focus():e.activeFilters.lastIsFocused()&&e.searchInput.nativeElement.focus()}}),this.keybinds.add(["arrow_down","tab"],function(t){if(e.cursorAtEndOfSearchInput()||e.suggestions.anyFocused()){t.preventDefault(),e.filterDropdownVisible$.value||e.toggleFilterDropdown();var n=e.suggestions.getFocusedIndex(),i=n>-1?n:0;e.suggestions.anyFocused()&&(i+=1),i>=e.suggestions.items.length&&(i=0),e.suggestions.focusItemAt(i)}}),this.keybinds.add(["arrow_up","shift+tab"],function(t){if(e.suggestions.anyFocused()){t.preventDefault();var n=e.activeFilters.getFocusedIndex(),i=n>-1?n:0;-1===(i-=1)?e.searchInput.nativeElement.focus():e.suggestions.focusItemAt(i)}}),this.keybinds.add("enter",function(t){var n=e.suggestions.getFocusedFilter();n&&(t.preventDefault(),e.activeFilters.add(n,{focus:!0}),e.filterDropdownVisible$.next(!1))}),this.keybinds.add("esc",function(t){e.filterDropdownVisible$.value&&(t.preventDefault(),e.filterDropdownVisible$.next(!1))}),this.keybinds.listenOn(document,{fireIfInputFocused:!0})}},{key:"subscribeToCloseActions",value:function(){var e=this;this.closeActionsStream$=(0,p.T)((0,h.R)(document,"click"),(0,h.R)(document,"auxclick"),(0,h.R)(document,"touchend")).pipe((0,l.h)(function(t){var n=t.target;return n!==e.el.nativeElement&&!e.el.nativeElement.contains(n)})).subscribe(function(){e.filterDropdownVisible$.next(!1)})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Y36(_.qu),r.Y36(V.gz),r.Y36(r.SBq),r.Y36(z.C),r.Y36(r.sBO),r.Y36(V.F0))},t.\u0275cmp=r.Xpm({type:t,selectors:[["search-input-with-filters"]],viewQuery:function(e,t){var n;(1&e&&(r.Gf(W,5),r.Gf(k,5),r.Gf(J,5),r.Gf(X,5)),2&e)&&(r.iGM(n=r.CRH())&&(t.searchInput=n.first),r.iGM(n=r.CRH())&&(t.suggestions=n.first),r.iGM(n=r.CRH())&&(t.activeFilters=n.first),r.iGM(n=r.CRH())&&(t.filterContainers=n))},hostBindings:function(e,t){1&e&&r.NdJ("click",function(e){return t.onClick(e)})},inputs:{compact:"compact",searchControl:"searchControl",pluralName:"pluralName",filters:"filters"},outputs:{filterChange:"filterChange",inputFocus:"inputFocus"},decls:11,vars:18,consts:[[3,"form","config","compact"],[1,"input-container","search-input-container"],["svgIcon","search",1,"search-icon"],["type","text",1,"search-input",3,"placeholder","formControl","focus"],["searchInput",""],["type","button","class","clear-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","class","filter-button",3,"click",4,"ngIf"],[3,"filters","filterSelected"],["type","button","mat-icon-button","",1,"clear-button",3,"click"],["svgIcon","close"],["type","button","mat-button","",1,"filter-button",3,"click"],["svgIcon","filter-list",1,"filter-button-icon"],["class","filter-button-text","trans","",4,"ngIf"],["trans","",1,"filter-button-text"]],template:function(e,t){1&e&&(r.TgZ(0,"active-filters",0),r.TgZ(1,"div",1),r._UZ(2,"mat-icon",2),r.TgZ(3,"input",3,4),r.NdJ("focus",function(){return t.inputFocus.emit()}),r.ALo(5,"trans"),r.qZA(),r.qZA(),r.qZA(),r.YNc(6,K,2,0,"button",5),r.ALo(7,"async"),r.YNc(8,te,3,1,"button",6),r.TgZ(9,"filter-suggestions",7),r.NdJ("filterSelected",function(e){return t.addFilterFromDropdownClick(e)}),r.ALo(10,"async"),r.qZA()),2&e&&(r.Q6J("form",t.form)("config",t.keyedFilters)("compact",t.compact),r.xp6(3),r.Q6J("placeholder",r.lcZ(5,12,"Type to search for "+t.pluralName))("formControl",t.searchControl),r.xp6(3),r.Q6J("ngIf",r.lcZ(7,14,t.haveFiltersOrQuery$)),r.xp6(2),r.Q6J("ngIf",t.keyedFilters),r.xp6(1),r.Udp("top",t.filterBarHeight+5+"px"),r.ekj("visible",r.lcZ(10,16,t.filterDropdownVisible$)),r.Q6J("filters",t.keyedFilters))},directives:[J,m.Hw,_.Fj,_.JJ,_.oH,g.O5,k,H.lW,v.P],pipes:[G.R,g.Ov],styles:["[_nghost-%COMP%]{display:flex;background-color:var(--be-background);border:1px solid var(--be-divider-default);height:45px;border-radius:4px;position:relative;padding-left:3px;overflow:hidden;width:100%}@media only screen and (max-width:768px){[_nghost-%COMP%]{flex-wrap:wrap;justify-content:center}}[_nghost-%COMP%]:focus-within{outline:none;border-color:var(--be-accent-lighter);box-shadow:0 0 0 2px var(--be-accent-lighter);z-index:3;overflow:visible;height:auto!important}.search-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 auto;width:auto;height:43px;padding-left:8px}.search-icon[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:5px}.search-input[_ngcontent-%COMP%]{border:none;height:100%;padding:0}.search-input[_ngcontent-%COMP%]:focus{box-shadow:none;z-index:1}.filter-button[_ngcontent-%COMP%]{min-width:auto;padding:0 14px}.clear-button[_ngcontent-%COMP%], .filter-button[_ngcontent-%COMP%]{color:var(--be-accent-default);height:43px}.clear-button[_ngcontent-%COMP%]{width:43px;line-height:43px}.filter-button-text[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),t}(),ie=function(e){var t=[];return Object.values(e).forEach(function(e){""!==e.value&&t.push(e)}),t.length?encodeURIComponent(btoa(JSON.stringify(t))):""},re=function(e){var t=[];try{t=JSON.parse(atob(decodeURIComponent(e)))}catch(n){}return t}},6253:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var i=n(38583),r=n(49866),o=n(3679),a=n(76627),s=n(51095),c=n(37716),l=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.ez,r.N,o.UX,a.Ps,s.ot]]}),e}()},58193:function(e,t,n){"use strict";n.d(t,{x:function(){return m}});var i=n(38583),r=n(76627),o=n(49866),a=n(7539),s=n(3679),c=n(51095),l=n(58341),u=n(12178),d=n(87738),p=n(95217),h=n(98097),v=n(6253),g=n(37716),m=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,o.N,s.UX,s.u5,d.G,p.u,h.X,v.B,c.ot,r.Ps,a.p9,l.Hi,u.Cv],a.p9]}),e}()},99883:function(t,r,o){"use strict";o.d(r,{x:function(){return F}});var a=o(26215),c=o(90739),l=o(61927),u=o(25917),d=o(88002),p=o(43190),h=o(93342),v=o(37716),g=o(63423),m=o(90299),y=o(90962),b=function(){var e=function(){function e(t,n,i){var r=this;f(this,e),this.router=t,this.http=n,this.localStorage=i,this.params$=new a.X({}),this.paginatedOnce$=new a.X(!1),this.loading$=new a.X(!1),this.response$=new a.X(null),this.dontUpdateQueryParams=!1,this.perPageCacheKey=null,this.noResults$=this.response$.pipe((0,d.U)(function(e){return r.paginatedOnce$.value&&0===e.pagination.data.length}))}return s(e,[{key:"params",get:function(){return this.params$.value}},{key:"currentPage",get:function(){var e,t;return null===(t=null===(e=this.response$.value)||void 0===e?void 0:e.pagination)||void 0===t?void 0:t.current_page}},{key:"paginate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=this.subscription?{}:this.currentQueryParams();this.params$.next(Object.assign(Object.assign(Object.assign({},this.response$.value?{perPage:this.response$.value.pagination.per_page,page:this.response$.value.pagination.current_page}:{}),i),e)),this.subscription||this.init(t,n)}},{key:"nextPage",value:function(){var e=this.response$.value.pagination.current_page||0;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:e+1,cursor:this.response$.value.pagination.next_cursor}))}},{key:"previousPage",value:function(){var e=this.response$.value.pagination.current_page;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:e-1||1,cursor:this.response$.value.pagination.prev_cursor}))}},{key:"changePerPage",value:function(e){var t;e!==(null===(t=this.params$.value)||void 0===t?void 0:t.perPage)&&(this.perPageCacheKey&&this.localStorage.set(this.perPageCacheKey,e),this.paginate(Object.assign(Object.assign({},this.params$.value),{perPage:e})))}},{key:"currentQueryParams",value:function(){return this.router.routerState.root.snapshot.queryParams}},{key:"init",value:function(e,t){var n=this;this.subscription=this.params$.pipe((0,p.w)(function(i){n.loading$.next(!0);var r=!n.paginatedOnce$.value;return r&&n.perPageCacheKey&&n.localStorage.get(n.perPageCacheKey)&&(i=Object.assign({perPage:n.localStorage.get(n.perPageCacheKey)},i)),(r&&t?(0,u.of)({pagination:t}):n.http.get(e,i)).pipe((0,h.b)(function(){n.updateQueryParams(i),n.loading$.next(!1),n.paginatedOnce$.next(!0)},function(){n.loading$.next(!1),n.paginatedOnce$.next(!0)}))})).subscribe(function(e){n.response$.next(e)})}},{key:"updateQueryParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.dontUpdateQueryParams){for(var t in e)Array.isArray(e[t])&&(e[t]=e[t].join(","));this.router.navigate([],{queryParams:e,replaceUrl:!0})}}},{key:"canLoadNextPage",value:function(){var e,t=null===(e=this.response$.value)||void 0===e?void 0:e.pagination;return!!t&&(!!t.next_cursor||this.currentPage<t.last_page)}},{key:"canLoadPrevPage",value:function(){var e,t=null===(e=this.response$.value)||void 0===e?void 0:e.pagination;return!!t&&(!!t.prev_cursor||this.currentPage>1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(v.LFG(g.F0),v.LFG(m.r),v.LFG(y.m))},e.\u0275prov=v.Yz7({token:e,factory:e.\u0275fac}),e}(),k=o(54395),w=o(59328),x=o(45435),_=o(84889),C=o(8208),A=o(48358),Z=o(80970),O=o(39490);function S(e,t){var n=Z.pick(t,e);if((0,O.t6)(n)){var i=Number(n);return i<9007199254740991?i:n}return n}function I(e,t){return e.filter(function(e){return function(e,t){var n=T(e),i=t.trim().toLowerCase();return-1!==n.indexOf(i)}(e,t)})}function T(e){return Object.keys(e).reduce(function(t,n){return t+(e[n]&&"object"==typeof e[n]?T(e[n]):e[n])+"\u25ec"},"").toLowerCase()}var E=o(3679),P=o(15381),F=function(){var t=function(){function t(e,n,i,r){f(this,t),this.modal=e,this.router=n,this.http=i,this.localStorage=r,this.sort$=new a.X({}),this.filters$=new a.X({}),this.searchControl=new E.NI,this.searchTerm$=new a.X(null),this.staticParams$=new a.X({}),this.paginator=new b(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new a.X([]),this.data$=new a.X([]),this.selectedRows$=new a.X([])}return s(t,[{key:"data",get:function(){return this.data$.value},set:function(e){var t=i(e);this.originalData$.next(t),this.data$.next(t),this.ignoreNextParamChange=!0,this.reset()}},{key:"init",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.config=n,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),n.staticParams)),n.uri?this.connectToPaginator():n.initialData&&(this.data=n.initialData),n.uri){var r=this.router.routerState.root.snapshot.queryParams,o=r.query;this.searchControl.setValue(o),this.searchTerm$.next(o),this.sort$.next({orderBy:r.orderBy,orderDir:r.orderDir})}return this.searchControlSub=this.searchControl.valueChanges.pipe((0,k.b)(300)).subscribe(function(e){t.searchTerm$.next(e)}),this.mainSub=(0,c.aj)([this.sort$,this.filters$,this.staticParams$,this.searchTerm$.pipe((0,d.U)(function(e){return{query:e}}))]).pipe((0,k.b)(0,l.Z),(0,d.U)(function(e){return Object.assign.apply(Object,[{}].concat(i(e)))})).subscribe(function(n){if(t.ignoreNextParamChange)return t.ignoreNextParamChange=!1;n=(0,_.N)(n),Object.entries(n).forEach(function(t){var i=e(t,2),r=i[0],o=i[1];"object"==typeof o&&o.id&&(n["".concat(r,"Id")]=o.id,delete n[r])}),t.config.uri?t.paginator.paginate(n,t.config.uri,t.config.initialData):Object.keys(n).length&&t.data.length&&t.applyLocalTransforms(n)}),this}},{key:"connectToPaginator",value:function(){var t=this;this.paginatorSub=this.paginator.response$.pipe((0,w.G)()).subscribe(function(n){var r,o=e(n,2),a=o[0],s=o[1],c=t.config.infiniteScroll&&(null===(r=null==a?void 0:a.pagination)||void 0===r?void 0:r.current_page)!==s.pagination.current_page?[].concat(i(t.data$.value),i(s.pagination.data)):s.pagination.data;t.data$.next(c)})}},{key:"applyLocalTransforms",value:function(e){var t=i(this.originalData$.value);e.query&&(t=I(t,e.query)),e.orderBy&&e.orderDir&&(t=function(e,t,n){return e.sort(function(e,i){var r=S(e,t),o=S(i,t),a=typeof r,s=typeof o;a!==s&&("number"===a&&(r+=""),"number"===s&&(o+=""));var c=0;return null!=r&&null!=o?r>o?c=1:r<o&&(c=-1):null!=r?c=1:null!=o&&(c=-1),c*("asc"===n?1:-1)})}(t,e.orderBy,e.orderDir)),this.data$.next(t)}},{key:"addFilter",value:function(e,t){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),n({},e,t)))}},{key:"removeFilter",value:function(e){var t=Object.assign({},this.filters$.value);delete t[e],this.filters$.next(t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),e&&this.staticParams$.next(e)}},{key:"openCrupdateResourceModal",value:function(e,t,n){var i=this;return this.modal.open(e,t,n).beforeClosed().pipe((0,x.h)(function(e){return!!e}),(0,h.b)(function(){return i.reset()}))}},{key:"confirmResourceDeletion",value:function(e){var t=Object.assign(Object.assign({},A.M),{replacements:{resource:e}});return this.modal.open(C.z,t).afterClosed().pipe((0,x.h)(function(e){return e}))}},{key:"getCurrentParams",value:function(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}},{key:"destroy",value:function(){var e,t,n;null===(e=this.paginatorSub)||void 0===e||e.unsubscribe(),null===(t=this.mainSub)||void 0===t||t.unsubscribe(),null===(n=this.searchControlSub)||void 0===n||n.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(v.LFG(P.u),v.LFG(g.F0),v.LFG(m.r),v.LFG(y.m))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac}),t}()},48358:function(e,t,n){"use strict";n.d(t,{M:function(){return i}});var i={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"}},1303:function(e,t,n){"use strict";n.d(t,{p:function(){return g}});var i=n(45435),r=n(36461),o=n(6966),a=n(37716),c=n(99883),l=n(19238),u=n(38583),d=n(76627),p=["columnName"],h=["table-sort-header",""],v=["*"],g=function(){var e=function(){function e(t,n,i,r){f(this,e),this.datable=t,this.cd=n,this.focusMonitor=i,this.el=r,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}return s(e,[{key:"sortDisabled",get:function(){var e;return null===(e=this.datable.config)||void 0===e?void 0:e.disableSort}},{key:"ngOnInit",value:function(){var e=this;this.orderBy||(this.orderBy=(0,o.V)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe((0,i.h)(function(t){return t.orderBy!==e.orderBy})).subscribe(function(){e.orderDir=null,e.onMouseLeave(),e.cd.markForCheck()})}},{key:"ngAfterViewInit",value:function(){this.focusMonitor.monitor(this.el).subscribe()}},{key:"ngOnDestroy",value:function(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}},{key:"changeSort",value:function(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}},{key:"getDirection",value:function(e){switch(e){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}},{key:"onMouseEnter",value:function(){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||(this.arrowVisible=!0)}},{key:"onMouseLeave",value:function(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}},{key:"handleClick",value:function(){var e;(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)||this.changeSort()}},{key:"handleKeydown",value:function(e){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||e.keyCode!==r.L_&&e.keyCode!==r.K5||(e.preventDefault(),this.changeSort())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Y36(c.x),a.Y36(a.sBO),a.Y36(l.tE),a.Y36(a.SBq))},e.\u0275cmp=a.Xpm({type:e,selectors:[["","table-sort-header",""]],viewQuery:function(e,t){var n;(1&e&&a.Gf(p,7),2&e)&&(a.iGM(n=a.CRH())&&(t.columnName=n.first))},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(e,t){1&e&&a.NdJ("click",function(){return t.handleClick()})("keydown",function(e){return t.handleKeydown(e)})("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()}),2&e&&a.ekj("active",t.orderDir)("sort-disabled",t.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:h,ngContentSelectors:v,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(e,t){1&e&&(a.F$t(),a.TgZ(0,"span",0,1),a.Hsn(2),a.qZA(),a.TgZ(3,"span",2),a._UZ(4,"mat-icon",3),a.qZA()),2&e&&(a.xp6(3),a.Q6J("ngClass",t.arrowDirection),a.xp6(1),a.ekj("hint-visible",t.arrowVisible))},directives:[u.mk,d.Hw],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:1px solid}.text[_ngcontent-%COMP%]{display:inline-block;text-transform:capitalize}.sort-icon[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{vertical-align:middle}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),e}()},52781:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i=n(37716),r=n(41880),o=function(){var e=function(){function e(t){f(this,e),this.el=t,this.config={},this.filesSelected=new i.vpe}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.el.nativeElement.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),(0,r.r)(e.config).then(function(t){t&&t.length&&e.filesSelected.emit(t)})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),e}()},52644:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var i=n(1796),r=n(37716),o=function(){var e=function(){function e(){f(this,e)}return s(e,[{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return isNaN(parseFloat(String(e)))||!isFinite(e)?"-":(0,i.H)(e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Yjl({name:"formattedFileSize",type:e,pure:!0}),e}()},56456:function(e,t,n){"use strict";n.d(t,{A:function(){return F}});var i=n(79765),r=n(26215),o=n(82298),a=n(58480),l=function(){function e(t,n){f(this,e),this.canceled$=new i.xQ,this.processing$=new r.X(!1),this.uploadedResponse$=new o.t(1),this.progress$=new r.X({percentage:0}),this.error$=new r.X(null),this.customData={},this.uploadedFile=t,this.id=n||(0,a.O)()}return s(e,[{key:"completed",get:function(){return!this.processing$.value&&100===this.progress$.value.percentage}},{key:"inProgress",get:function(){return!this.error$.value&&!this.completed}},{key:"cancel",value:function(){this.canceled$.next(!0),this.finalize()}},{key:"complete",value:function(){this.setProgress({percentage:100,eta:null}),this.finalize()}},{key:"finalize",value:function(){this.uploadedResponse$.complete(),this.canceled$.complete(),this.progress$.complete()}},{key:"finishProcessing",value:function(){this.processing$.next(!1),this.processing$.complete()}},{key:"addError",value:function(e){this.error$.next(e)}},{key:"setProgress",value:function(e){this.progress$.next(Object.assign(Object.assign({},this.progress$.value),e))}}]),e}(),d=n(94402),p=n(40205),h=n(59193),v=n(19773),g=n(5304),m=n(46782),y=n(88002),b=n(45435),k=n(66421),w=n(81769),x=n(37716),_=n(97312),C=n(18715),A=n(68756),Z=n(45746),O=n(43256),S=n(16850),I=function(){var e,t=function(e){c(n,e);var t=u(n);function n(){var e;return f(this,n),(e=t.apply(this,arguments)).DEFAULT_MAX_FILE_SIZE_MB=8,e.showToast=!0,e}return s(n,[{key:"initValidations",value:function(){this.validations.push(new A.p({maxSize:this.getMaxFileSize()},this.i18n));var e=this.getAllowedExtensions(),t=this.getBlockedExtensions();e&&e.length&&this.validations.push(new Z.G({extensions:e},this.i18n)),t&&t.length&&this.validations.push(new O.u({extensions:t},this.i18n))}},{key:"getMaxFileSize",value:function(){return this.settings.get("uploads.max_size",(0,S.F)(this.DEFAULT_MAX_FILE_SIZE_MB,"MB"))}},{key:"getAllowedExtensions",value:function(){return this.settings.getJson("uploads.allowed_extensions")}},{key:"getBlockedExtensions",value:function(){return this.settings.getJson("uploads.blocked_extensions")}}]),n}(C.c);return t.\u0275fac=function(n){return(e||(e=x.n5z(t)))(n||t)},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),T=n(35718),E=n(24688),P=n(34673),F=function(){var e=function(){function e(t,n,a,s,c){f(this,e),this.api=t,this.defaultValidator=n,this.toast=a,this.currentUser=s,this.settings=c,this.uploads$=new r.X([]),this.totalProgress$=new o.t(1),this.uploadsAdded$=new i.xQ,this.count$=new r.X({pending:0,completed:0})}return s(e,[{key:"isEmpty",value:function(){return!this.uploads$.value.length}},{key:"getAllCompleted",value:function(){return this.uploads$.value.filter(function(e){return e.completed}).map(function(e){return e.fileEntry})}},{key:"updateTotalProgress",value:function(){var e=this.uploads$.value.map(function(e){return e.progress$.value.percentage||0});this.totalProgress$.next(e.reduce(function(e,t){return e+t},0)/e.length)}},{key:"totalProgress",value:function(){return this.totalProgress$.asObservable()}},{key:"start",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.validator||this.defaultValidator,r=[];if(Array.isArray(e))r=this.transformUploads(e,i),this.uploads$.next(this.uploads$.value.concat(r)),this.uploadsAdded$.next(r);else{var o=this.uploads$.value.map(function(n){if(e[n.id]){var o=t.transformUploads([e[n.id]],i,n.id)[0];return r.push(o),o}return n});this.uploads$.next(o)}return this.updateCount(),(0,d.D)(r.filter(function(e){return!e.error$.value})).pipe((0,v.zg)(function(e){return t.api.upload(e.uploadedFile,n).pipe((0,g.K)(function(r){return t.handleUploadFailure(r,e,i),n.bubbleError?(0,p._)(r):h.E}),(0,m.R)(e.canceled$),(0,y.U)(function(i){return t.handleUploadEvent(i,e,n.willProcessFiles),i.name===k.b.COMPLETED&&(i.body.queueItemId=e.id),i}))},1),(0,b.h)(function(e){return e.name===k.b.COMPLETED}),(0,y.U)(function(e){return e.body}))}},{key:"updateProgress",value:function(e,t){var n=this.find(e);n&&(n.setProgress({eta:t.eta,speed:t.speed,percentage:t.progress,totalBytes:t.totalBytes,completedBytes:t.completedBytes}),this.updateTotalProgress())}},{key:"completeUpload",value:function(e,t){var n=this.find(e);n&&(n.uploadedResponse$.next(t),n.fileEntry=t.fileEntry,n.complete(),this.updateTotalProgress())}},{key:"errorUpload",value:function(e,t){this.find(e).addError(t)}},{key:"reset",value:function(){this.uploads$.value.forEach(function(e){return e.cancel()}),this.uploads$.next([])}},{key:"remove",value:function(e){var t=this.uploads$.value.findIndex(function(t){return t.id===e}),n=this.uploads$.value[t];n.completed?n.finalize():n.cancel(),this.uploads$.value.splice(t,1),this.uploads$.next(this.uploads$.value)}},{key:"find",value:function(e){return this.uploads$.value.find(function(t){return t.id===e})}},{key:"transformUploads",value:function(e,t,n){return e.map(function(e){var i=new l(e,n);if(t){var r=t.validate(e);r.failed&&i.addError(r.errorMessage)}return i})}},{key:"handleUploadEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.name===k.b.PROGRESS?(100===e.progress&&(e=Object.assign(Object.assign({},e),{progress:99}),n&&t.processing$.next(!0)),this.updateProgress(t.id,e)):e.name===k.b.COMPLETED&&(this.completeUpload(t.id,e.body),this.updateCount())}},{key:"handleUploadFailure",value:function(e,t,n){var i,r=null===(i=null==e?void 0:e.errors)||void 0===i?void 0:i.file,o=null;r||(r=w.v.DefaultUpload,o=this.currentUser.isAdmin()&&!this.settings.get("site.hide_docs_buttons")),this.errorUpload(t.id,r),this.updateCount(),this.updateTotalProgress(),n.showToast&&this.toast.open(r,{action:o?"Learn More":null}).onAction().subscribe(function(){window.open(w.h)})}},{key:"updateCount",value:function(){var e=this.uploads$.value.filter(function(e){return e.inProgress}).length;this.count$.next({pending:e,completed:this.uploads$.value.length-e})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(x.LFG(_.f),x.LFG(I),x.LFG(T.F),x.LFG(E.I),x.LFG(P.Z))},e.\u0275prov=x.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},66705:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var i=n(38583),r=n(51095),o=n(76627),a=n(12178),s=n(37716),c=function(){var e=function e(){f(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,r.ot,a.Cv,o.Ps]]}),e}()},63412:function(e,t,n){"use strict";function i(e,t){var n=document.createElement("a");n.href=e,t&&(n.download=t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}n.d(t,{k:function(){return i}})},45746:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var i=function(e){c(n,e);var t=u(n);function n(e,i){var r;return f(this,n),(r=t.call(this)).params=e,r.i18n=i,r.errorMessage=r.i18n.t("Only these file types are allowed: :extensions",{extensions:r.params.extensions.join(", ")}),r}return s(n,[{key:"fails",value:function(e){return!this.params.extensions.some(function(t){return t.toLowerCase()===e.extension.toLowerCase()})}}]),n}(n(26232).y)},43256:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var i=function(e){c(n,e);var t=u(n);function n(e,i){var r;return f(this,n),(r=t.call(this)).params=e,r.i18n=i,r.errorMessage=r.i18n.t("These file types are not allowed: :extensions",{extensions:r.params.extensions.join(", ")}),r}return s(n,[{key:"fails",value:function(e){return this.params.extensions.some(function(t){return t===e.extension})}}]),n}(n(26232).y)},12414:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var i=new(n(37716).OlP)("WORKSPACE_CONFIG")},87991:function(e,t,n){"use strict";n.d(t,{b:function(){return y}});var r=n(93342),o=n(45435),a=n(26215),c=n(24162),l=n(81769),u=n(37716),d=n(90299),p=n(24688),h=n(58092),v=n(99665),g=n(35718),m={name:"Default",default:!0,id:null},y=function(){var e=function(){function e(t,n,i,r,o){f(this,e),this.http=t,this.currentUser=n,this.cookie=i,this.notifications=r,this.toast=o,this.available$=new a.X([m]),this.activeId$=new a.X(this.getIdFromCookie()),this.activeWorkspace$=new a.X(this.getIdFromCookie()?null:m)}return s(e,[{key:"currentUserCan",value:function(e){var t,n=null===(t=this.activeWorkspace$.value)||void 0===t?void 0:t.currentUser;return n&&(n.is_owner||n.permissions.findIndex(function(t){return t.name===e})>-1)}},{key:"select",value:function(e){var t=this;e!==this.activeId$.value&&(this.cookie.set(this.cookieName(),e),this.activeId$.next(e));var n=this.available$.value.find(function(e){return e.id===t.activeId$.value});this.activeWorkspace$.next(n||this.available$.value[0])}},{key:"pushAndSelect",value:function(e){this.available$.next([].concat(i(this.available$.value),[e])),this.select(e.id)}},{key:"replace",value:function(e){var t=i(this.available$.value),n=t.findIndex(function(t){return t.id===e.id});n&&(t[n]=e),this.available$.next(t)}},{key:"remove",value:function(e){var t=i(this.available$.value);e.forEach(function(e){var n=t.findIndex(function(t){return t.id===e});n&&t.splice(n,1)}),this.available$.next(t),e.includes(this.activeId$.value)&&this.select(null)}},{key:"indexUserWorkspaces",value:function(){var t=this;return this.http.get("me/".concat(e.BASE_URI,"s")).pipe((0,r.b)(function(e){t.available$.next([].concat(i(t.available$.value),i(e.workspaces))),t.select(t.activeId$.value)}))}},{key:"get",value:function(t){return this.http.get("".concat(e.BASE_URI,"/").concat(t))}},{key:"delete",value:function(t){var n=this;return this.http.delete("".concat(e.BASE_URI,"/").concat(t)).pipe((0,r.b)(function(){n.remove(t)}))}},{key:"create",value:function(t){var n=this;return this.http.post("".concat(e.BASE_URI),t).pipe((0,r.b)(function(e){return n.pushAndSelect(e.workspace)}))}},{key:"update",value:function(t,n){var i=this;return this.http.put("".concat(e.BASE_URI,"/").concat(t),n).pipe((0,r.b)(function(e){return i.replace(e.workspace)}))}},{key:"invitePeople",value:function(t,n){return this.http.post("".concat(e.BASE_URI,"/").concat(t,"/invite"),n)}},{key:"resendInvite",value:function(t,n){return this.http.post("".concat(e.BASE_URI,"/").concat(t,"/").concat(n,"/resend"))}},{key:"deleteMember",value:function(t,n){var i=this;return this.http.delete("".concat(e.BASE_URI,"/").concat(t,"/member/").concat(n)).pipe((0,r.b)(function(){n===i.currentUser.get("id")&&i.remove([t])}))}},{key:"deleteInvite",value:function(t){return this.http.delete("".concat(e.BASE_URI,"/invite/").concat(t))}},{key:"changeRole",value:function(t,n,i){var r=(0,c.w)("member_id",n)?n.member_id:n.id;return this.http.post("".concat(e.BASE_URI,"/").concat(t,"/").concat(n.model_type,"/").concat(r,"/change-role"),{roleId:i})}},{key:"join",value:function(e){return this.http.get("workspace/join/".concat(e))}},{key:"bindToNotificationClick",value:function(){var e=this;return this.notifications.clickedOnNotification$.pipe((0,o.h)(function(e){return"Common\\Workspaces\\Notifications\\WorkspaceInvitation"===e.notification.type})).subscribe(function(t){var n=t.notification.data.inviteId;"join"===t.action.action?e.join(n).subscribe(function(n){e.notifications.delete([t.notification]).subscribe(),e.pushAndSelect(n.workspace),e.toast.open("Joined workspace.")},function(n){e.handleWorkspaceInviteClickError(n,t.notification)}):"decline"===t.action.action&&e.deleteInvite(n).subscribe(function(){e.notifications.delete([t.notification]).subscribe(),e.toast.open("Declined workspace invite.")},function(n){e.handleWorkspaceInviteClickError(n,t.notification)})})}},{key:"handleWorkspaceInviteClickError",value:function(e,t){404===e.status?(this.notifications.delete([t]).subscribe(),this.toast.open("That invite is no longer valid.")):this.toast.open(l.v.Default)}},{key:"getIdFromCookie",value:function(){var e=this.cookie.get(this.cookieName());return e="string"==typeof e?parseInt(e):e,isNaN(e)?null:e}},{key:"cookieName",value:function(){return"".concat(this.currentUser.get("id"),"_activeWorkspace")}}]),e}();return e.BASE_URI="workspace",e.\u0275fac=function(t){return new(t||e)(u.LFG(d.r),u.LFG(p.I),u.LFG(h.N),u.LFG(v.g),u.LFG(g.F))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();
//# sourceMappingURL=12-es5.20c18f12b23629bbc576.js.map